window.__require=function e(t,n,r){function i(o,c){if(!n[o]){if(!t[o]){var u=o.split("/");if(u=u[u.length-1],!t[u]){var l="function"==typeof __require&&__require;if(!c&&l)return l(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+o+"'")}}var s=n[o]={exports:{}};t[o][0].call(s.exports,function(e){return i(t[o][1][e]||e)},s,s.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof __require&&__require,o=0;o<r.length;o++)i(r[o]);return i}({AppMain:[function(e,t,n){"use strict";cc._RF.push(t,"1239cDIlGxMnqQmAuEhtupz","AppMain");var r,i,a,o,c,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./LocalData"),_=p(e("./MRes")),f=p(e("./MPanel"));e("../3rdlib/WxLib");function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=cc._decorator,g=m.ccclass,w=m.property,k=.5,P=1;r=w(cc.ProgressBar),i=w(cc.Label),g((o=function(e){function t(){var e,n,r;b(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),h(r,"pb",c,r),h(r,"ll",u,r),y(r,n)}return d(t,cc.Component),l(t,[{key:"start",value:function(){var e=this;_.default.ins.load_chain().then(function(){s.L.is_init=!1,e.inin_local_data(),e.init_test_local_data(),f.default.ins.create_all_panel(),e.pb.progress=1,cc.log("========================="),e.scheduleOnce(function(){f.default.ins.panel_hide("PanelLoading"),f.default.ins.panel_show("PanelMenu"),cc.log("=========================")},P)}),this.pb.progress=0}},{key:"update",value:function(e){this.pb.progress>=1||(this.pb.progress+=k*e)}},{key:"inin_local_data",value:function(){s.L.is_init!==(!0).toString()?(cc.warn("\u672a\u68c0\u6d4b\u5230\u672c\u5730\u7528\u6237\u6570\u636e\uff0c\u6b63\u5728\u8fdb\u884c\u8fdb\u884c\u7528\u6237\u6570\u636e\u521d\u59cb\u5316"),s.L.is_init=!0):cc.log("\u5df2\u6709\u672c\u5730\u7528\u6237\u6570\u636e\uff0c\u4e0d\u518d\u8fdb\u884c\u7528\u6237\u6570\u636e\u521d\u59cb\u5316")}},{key:"init_test_local_data",value:function(){}},{key:"loading_log",set:function(e){this.ll.string=e}}]),t}(),c=v(o.prototype,"pb",[r],{enumerable:!0,initializer:function(){return null}}),u=v(o.prototype,"ll",[i],{enumerable:!0,initializer:function(){return null}}),a=o));cc._RF.pop()},{"../3rdlib/WxLib":"WxLib","./LocalData":"LocalData","./MPanel":"MPanel","./MRes":"MRes"}],CubeCollision:[function(e,t,n){"use strict";cc._RF.push(t,"084e3ZQ83NPyLiW9s741I9L","CubeCollision"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,a,o,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=f(e("../framework/MRes")),l=f(e("./GamePlay")),s=e("./Cube"),_=f(e("./GameDraw"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=cc._decorator,v=d.ccclass,m=.1,g=(r=(0,d.property)(cc.SpriteFrame),v((a=function(e){function t(){var e,n,r;h(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),p(r,"on_sf",o,r),b(r,n)}return y(t,cc.Component),c(t,[{key:"onLoad",value:function(){this.is_put=!1,this.off_sf=u.default.ins.array_cube[0],t.ins=this}},{key:"onCollisionEnter",value:function(e,t){switch(this.clear_draw(),s.Cube.ins.type){case s.CubeType.SINGLE:this.single_handle_enter(e,t);break;case s.CubeType.HOR:this.hor_handle_enter(e,t);break;case s.CubeType.LEFT:this.left_handle_enter(e,t);break;case s.CubeType.RIGHT:this.right_handle_enter(e,t)}}},{key:"onCollisionStay",value:function(e,t){}},{key:"onCollisionExit",value:function(e,t){this.put_with_collider(e,t)}},{key:"clear_draw",value:function(){_.default.ins.update_cube_bg()}},{key:"single_p_merge",value:function(e){var t=this;new Promise(function(n,r){t.scheduleOnce(function(){var r=l.default.ins.game.merge(e);if(void 0!==r)_.default.ins.merge_animation(e,r).then(function(){if(l.default.ins.score+=(r.length+1)*l.default.ins.game.get_p_value(e),l.default.ins.game.merge_data(e,r),7===l.default.ins.game.get_p_value(e)){var t=l.default.ins.game.merge_around(e);_.default.ins.merge_animation(e,t).then(function(){l.default.ins.game.merge_around_data(e,t),l.default.ins.score+=100})}n()});else if(t.merge_done_count++,t.merge_done_count>=t.merge_done_count_max){s.Cube.ins.create_random_cube(),s.Cube.ins.rotation=0,s.Cube.ins.direction=!0,s.Cube.ins.cl.enabled=!0;var i=cc.scaleTo(.2,1);s.Cube.ins.node.runAction(i)}},m)}).then(function(){return t.single_p_merge(e)})}},{key:"put",value:function(){var e=this;this.is_put=!0,s.Cube.ins.cl.enabled=!1,this.scheduleOnce(function(){e.is_put&&(e.clear_draw(),s.Cube.ins.position=cc.v2(0,-400),s.Cube.ins.cl.enabled=!0,e.is_put=!1)},.1)}},{key:"put_with_collider",value:function(e,t){var n=this;if(this.is_put){var r=!1;switch(s.Cube.ins.type){case s.CubeType.SINGLE:r=this.single_check(e.node);break;case s.CubeType.HOR:r=this.hor_check(e.node);break;case s.CubeType.LEFT:r=this.left_check(e.node);break;case s.CubeType.RIGHT:r=this.right_check(e.node)}if(r){this.is_put=!1;var i=cc.sequence(cc.place(this.cube_position(e.node)),cc.callFunc(function(){l.default.ins.game.set_p_value(n.cube_p(e.node),s.Cube.ins.v),null!=n.cube_next_p(e.node)&&l.default.ins.game.set_p_value(n.cube_next_p(e.node),s.Cube.ins.next_v),_.default.ins.change_cube_sprite(n.cube_p(e.node),s.Cube.ins.sf),null!=n.cube_next_p(e.node)&&_.default.ins.change_cube_sprite(n.cube_next_p(e.node),s.Cube.ins.next_sf),s.Cube.ins.position=cc.v2(0,-400),s.Cube.ins.scale=0,n.merge_done_count=0,n.merge_done_count_max=1,n.single_p_merge(n.cube_p(e.node)),s.Cube.ins.is_same||null==n.cube_next_p(e.node)||(n.merge_done_count_max=2,n.single_p_merge(n.cube_next_p(e.node)))}));s.Cube.ins.node.runAction(i)}}}},{key:"cube_p",value:function(e){return e.p}},{key:"cube_next_p",value:function(e){switch(s.Cube.ins.type){case s.CubeType.SINGLE:return null;case s.CubeType.HOR:return this.hor_next_cube_p(e);case s.CubeType.LEFT:return this.left_next_cube_p(e);case s.CubeType.RIGHT:return this.right_next_cube_p(e)}}},{key:"cube_position",value:function(e){switch(s.Cube.ins.type){case s.CubeType.SINGLE:return this.single_position(e);case s.CubeType.HOR:return this.hor_position(e);case s.CubeType.LEFT:return this.left_position(e);case s.CubeType.RIGHT:return this.right_position(e)}}},{key:"cube_value",value:function(e){return l.default.ins.game.get_p_value(this.cube_p(e))}},{key:"single_check",value:function(e){return 0===this.cube_value(e)}},{key:"single_handle_enter",value:function(e,t){this.single_check(e.node)&&_.default.ins.change_cube_sprite(this.cube_p(e.node),this.on_sf)}},{key:"single_handle_exit",value:function(e,t){this.single_check(e.node)&&_.default.ins.change_cube_sprite(this.cube_p(e.node),this.off_sf)}},{key:"single_position",value:function(e){return e.position.add(e.parent.position)}},{key:"hor_check",value:function(e){return 0===this.cube_value(e)&&0===this.hor_next_cube_value(e)}},{key:"hor_handle_enter",value:function(e,t){this.hor_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.on_sf),_.default.ins.change_cube_sprite(this.hor_next_cube_p(e.node),this.on_sf))}},{key:"hor_handle_exit",value:function(e,t){this.hor_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.off_sf),_.default.ins.change_cube_sprite(this.hor_next_cube_p(e.node),this.off_sf))}},{key:"hor_next_cube_p",value:function(e){return s.Cube.ins.direction?e.p.add(cc.v2(0,1)):e.p.add(cc.v2(0,-1))}},{key:"hor_next_cube_value",value:function(e){return l.default.ins.game.get_p_value(this.hor_next_cube_p(e))}},{key:"hor_position",value:function(e){return e.position.add(cc.v2(37.5,0)).add(e.parent.position)}},{key:"left_check",value:function(e){return 0===this.cube_value(e)&&0===this.left_next_cube_value(e)}},{key:"left_handle_enter",value:function(e,t){this.left_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.on_sf),_.default.ins.change_cube_sprite(this.left_next_cube_p(e.node),this.on_sf))}},{key:"left_handle_exit",value:function(e,t){this.left_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.off_sf),_.default.ins.change_cube_sprite(this.left_next_cube_p(e.node),this.off_sf))}},{key:"left_next_cube_p",value:function(e){var t=void 0;return t=s.Cube.ins.direction?e.p.x%2==0?cc.v2(1,1):cc.v2(1,0):e.p.x%2==0?cc.v2(-1,0):cc.v2(-1,-1),e.p.add(t)}},{key:"left_next_cube_value",value:function(e){return l.default.ins.game.get_p_value(this.left_next_cube_p(e))}},{key:"left_position",value:function(e){return e.position.add(cc.v2(21.75,-36)).add(e.parent.position)}},{key:"right_check",value:function(e){return 0===this.cube_value(e)&&0===this.right_next_cube_value(e)}},{key:"right_handle_enter",value:function(e,t){this.right_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.on_sf),_.default.ins.change_cube_sprite(this.right_next_cube_p(e.node),this.on_sf))}},{key:"right_handle_exit",value:function(e,t){this.right_check(e.node)&&(_.default.ins.change_cube_sprite(this.cube_p(e.node),this.off_sf),_.default.ins.change_cube_sprite(this.right_next_cube_p(e.node),this.off_sf))}},{key:"right_next_cube_p",value:function(e){var t=void 0;return t=s.Cube.ins.direction?e.p.x%2==0?cc.v2(1,0):cc.v2(1,-1):e.p.x%2==0?cc.v2(-1,1):cc.v2(-1,0),e.p.add(t)}},{key:"right_next_cube_value",value:function(e){return l.default.ins.game.get_p_value(this.right_next_cube_p(e))}},{key:"right_position",value:function(e){return e.position.add(cc.v2(-21.75,-36)).add(e.parent.position)}}]),t}(),o=function(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}(a.prototype,"on_sf",[r],{enumerable:!0,initializer:function(){return null}}),i=a))||i);n.default=g,t.exports=n.default,cc._RF.pop()},{"../framework/MRes":"MRes","./Cube":"Cube","./GameDraw":"GameDraw","./GamePlay":"GamePlay"}],Cube:[function(e,t,n){"use strict";cc._RF.push(t,"399fdvdWElKh7fCWoUO8DV0","Cube"),Object.defineProperty(n,"__esModule",{value:!0}),n.Cube=n.CubeType=void 0;var r,i,a,o,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=_(e("../framework/MRes")),l=e("../framework/Global"),s=_(e("./GamePlay"));function _(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=cc._decorator,d=y.ccclass,v=y.property,m={CL_SINGLE:cc.v2(0,0),CL_HOR:cc.v2(-37.5,0),CL_LEFT:cc.v2(-21.75,36),CL_RIGHT:cc.v2(21.75,36),TIME_ROTATION:.2,PROBABILITY:{T_SINGLE:.1,T_HOR:.3,T_LEFT:.3,T_RIGHT:.3,V_1:.3,V_2:.3,V_3:.15,V_4:.15,V_5:.05,V_6:.05}},g=n.CubeType={SINGLE:Symbol("SINGLE"),HOR:Symbol("HOR"),LEFT:Symbol("LEFT"),RIGHT:Symbol("RIGHT")};n.Cube=(r=v(cc.Node),d((a=function(e){function t(){var e,n,r;p(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),f(r,"cube_node_array",o,r),h(r,n)}return b(t,cc.Component),c(t,[{key:"onLoad",value:function(){this.type,this.direction=!0,this.is_same=!1,this.v,this.next_v,this.cl=this.node.getComponent(cc.CircleCollider),this.type_array,this.value_array,t.ins=this}},{key:"update_cube_info",value:function(){return this.type_array=[],this.value_array=[],this.type_array=Array.from(s.default.ins.game.empty_type()),this.value_array=Array.from(s.default.ins.game.empty_value()),0!==this.type_array.length||(s.default.ins.game_fail(),!1)}},{key:"random_type",value:function(){var e=Math.random(),t=void 0;return t=e<m.PROBABILITY.T_SINGLE?g.SINGLE:e<m.PROBABILITY.T_SINGLE+m.PROBABILITY.T_HOR?g.HOR:e<m.PROBABILITY.T_SINGLE+m.PROBABILITY.T_HOR+m.PROBABILITY.T_LEFT?g.LEFT:g.RIGHT,new Set(this.type_array).has(t)?t:l.G.random_item_form_array(this.type_array)}},{key:"random_value",value:function(){var e=Math.random(),t=void 0;return t=e<m.PROBABILITY.V_1?1:e<m.PROBABILITY.V_1+m.PROBABILITY.V_2?2:e<m.PROBABILITY.V_1+m.PROBABILITY.V_2+m.PROBABILITY.V_3?3:e<m.PROBABILITY.V_1+m.PROBABILITY.V_2+m.PROBABILITY.V_3+m.PROBABILITY.V_4?4:e<m.PROBABILITY.V_1+m.PROBABILITY.V_2+m.PROBABILITY.V_3+m.PROBABILITY.V_4+m.PROBABILITY.V_5?5:6,new Set(this.value_array).has(t)?t:l.G.random_item_form_array(this.value_array)}},{key:"create_random_cube",value:function(){if(this.update_cube_info()){switch(this.random_type()){case g.SINGLE:this.create_random_single_cube();break;case g.HOR:this.create_random_hor_cube();break;case g.LEFT:this.create_random_left_cube();break;case g.RIGHT:this.create_random_right_cube()}this.next_v===this.v?this.is_same=!0:this.is_same=!1}}},{key:"create_different_random_cube",value:function(){var e=this,t=this.type,n=this.v,r=this.next_v;return new Promise(function(i,a){(function a(){if(e.create_random_cube(),e.type===t&&e.v===n&&e.next_v===r)return a();i()})()})}},{key:"create_random_single_cube",value:function(){this.type=g.SINGLE,this.v=this.random_value(),this.next_v=null,this.un_active_all_children_cube(),this.cube_node_array[0].active=!0,this.cube_node_array[0].getComponent(cc.Sprite).spriteFrame=this.sf,this.cl.offset=m.CL_SINGLE}},{key:"create_random_hor_cube",value:function(){this.type=g.HOR,this.v=this.random_value(),this.next_v=this.random_value(),this.un_active_all_children_cube(),this.cube_node_array[1].active=!0,this.cube_node_array[2].active=!0,this.cube_node_array[1].getComponent(cc.Sprite).spriteFrame=this.sf,this.cube_node_array[2].getComponent(cc.Sprite).spriteFrame=this.next_sf,this.cl.offset=m.CL_HOR}},{key:"create_random_left_cube",value:function(){this.type=g.LEFT,this.v=this.random_value(),this.next_v=this.random_value(),this.un_active_all_children_cube(),this.cube_node_array[3].active=!0,this.cube_node_array[4].active=!0,this.cube_node_array[3].getComponent(cc.Sprite).spriteFrame=this.sf,this.cube_node_array[4].getComponent(cc.Sprite).spriteFrame=this.next_sf,this.cl.offset=m.CL_LEFT}},{key:"create_random_right_cube",value:function(){this.type=g.RIGHT,this.v=this.random_value(),this.next_v=this.random_value(),this.un_active_all_children_cube(),this.cube_node_array[5].active=!0,this.cube_node_array[6].active=!0,this.cube_node_array[5].getComponent(cc.Sprite).spriteFrame=this.sf,this.cube_node_array[6].getComponent(cc.Sprite).spriteFrame=this.next_sf,this.cl.offset=m.CL_RIGHT}},{key:"un_active_all_children_cube",value:function(){this.cube_node_array.forEach(function(e){e.active=!1})}},{key:"rotate",value:function(){void 0===this.rotate_count&&(this.rotate_count=0),this.rotate_count++,1===this.rotate_count&&this.rotate_180()}},{key:"rotate_180",value:function(){var e=this;return new Promise(function(n,r){if(0!==e.rotate_count){var i=cc.sequence(cc.rotateBy(m.TIME_ROTATION,180),cc.callFunc(function(){t.ins.direction=!t.ins.direction,e.rotate_count--,e.rotate_count>=1&&(e.rotate_count=1),e.rotate_180()}));e.node.runAction(i)}else n()})}},{key:"sf",get:function(){return u.default.ins.array_cube[this.v]}},{key:"next_sf",get:function(){return u.default.ins.array_cube[this.next_v]}},{key:"position",set:function(e){this.node.position=e},get:function(){return this.node.position}},{key:"rotation",set:function(e){this.node.rotation=e},get:function(){return this.node.rotation}},{key:"scale",set:function(e){this.node.scale=e},get:function(){return this.node.scale}}]),t}(),o=function(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}(a.prototype,"cube_node_array",[r],{enumerable:!0,initializer:function(){return[]}}),i=a))||i);cc._RF.pop()},{"../framework/Global":"Global","../framework/MRes":"MRes","./GamePlay":"GamePlay"}],GameDraw:[function(e,t,n){"use strict";cc._RF.push(t,"58f71XSqcBMgpJi0aO3OKZT","GameDraw"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,a,o,c,u,l,s,_,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=y(e("./GamePlay")),b=y(e("../framework/MRes"));e("../framework/LocalData"),y(e("./Game"));function y(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=cc._decorator,P=k.ccclass,O=k.property,T={X:43.5,Y:72},C=10,R=.5,L=7,x=7,j=(r=O(cc.Prefab),i=O(cc.Node),a=O(cc.Node),o=O(cc.Prefab),P((u=function(e){function t(){var e,n,r;v(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),d(r,"cube_bg_prefab",l,r),d(r,"cube_bg_parent",s,r),d(r,"shadow_parent",_,r),d(r,"shadow_prefab",f,r),m(r,n)}return g(t,cc.Component),p(t,[{key:"onLoad",value:function(){this.cube_array=Array.of(),this.draw_cube_bg(),t.ins=this}},{key:"get_cube",value:function(e){try{return this.cube_array[e.x][e.y]}catch(e){return}}},{key:"draw_cube_bg",value:function(){for(var e=0;e<L;e++){this.cube_array.push(Array.of());var t=new cc.Node("cube_line");t.parent=this.cube_bg_parent,t.y=T.Y*(3-e),e%2==0&&(t.x=T.X);var n=t.addComponent(cc.Layout);n.type=cc.Layout.Type.HORIZONTAL,n.resizeMode=cc.Layout.ResizeMode.CONTAINER,n.spacingX=C;for(var r=0;r<x;r++){var i=cc.instantiate(this.cube_bg_prefab);i.parent=t,this.cube_array[e].push(i),i.p=cc.v2(e,r)}}}},{key:"update_cube_bg",value:function(){for(var e=h.default.ins.game,t=0;t<e.map_array.length;t++)for(var n=0;n<e.map_array[t].length;n++){var r=cc.v2(t,n);-1!==e.get_p_value(r)?this.change_cube_sprite(r,b.default.ins.array_cube[e.get_p_value(r)]):this.change_cube_sprite(r,null)}}},{key:"pMult",value:function(e,t){return cc.v2(e.x*t,e.y*t)}},{key:"pDot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"pLengthSQ",value:function(e){return this.pDot(e,e)}},{key:"pLength",value:function(e){return Math.sqrt(this.pLengthSQ(e))}},{key:"pNormalize",value:function(e){var t=this.pLength(e);return 0===t?cc.v2(e):this.pMult(e,1/t)}},{key:"pAngleSigned",value:function(e,t){var n=parseFloat("1.192092896e-07F"),r=this.pNormalize(e),i=this.pNormalize(t),a=Math.atan2(r.x*i.y-r.y*i.x,this.pDot(r,i));return Math.abs(a)<n?0:a}},{key:"merge_animation",value:function(e,t){var n=this,r=this.get_cube(e).position.add(this.get_cube(e).parent.position),i=b.default.ins.array_cube_shadow[h.default.ins.game.get_p_value(e)];return t.forEach(function(e){var t=n.get_cube(e);if(void 0!==t){var a=t.getComponent(cc.Sprite);if(null!==a.spriteFrame){a.spriteFrame=b.default.ins.array_cube[0];var o=cc.instantiate(n.shadow_prefab);o.parent=n.shadow_parent,o.position=t.position.add(t.parent.position),o.getComponent(cc.Sprite).spriteFrame=i;var c=o.position,u=n.pAngleSigned(cc.v2(1,0),r.sub(c));o.rotation=180*-u/Math.PI;var l=cc.sequence(cc.spawn(cc.moveTo(R,r),cc.fadeOut(R)),cc.callFunc(function(){o.removeFromParent()}));o.runAction(l)}}}),new Promise(function(t,r){n.scheduleOnce(function(){h.default.ins.game.get_p_value(e)>=7?n.change_cube_sprite(e,b.default.ins.array_cube[0]):n.change_cube_sprite(e,b.default.ins.array_cube[h.default.ins.game.get_p_value(e)+1]),t()},R)})}},{key:"change_cube_sprite",value:function(e,t){this.get_cube(e).getComponent(cc.Sprite).spriteFrame=t}}]),t}(),l=w(u.prototype,"cube_bg_prefab",[r],{enumerable:!0,initializer:function(){return null}}),s=w(u.prototype,"cube_bg_parent",[i],{enumerable:!0,initializer:function(){return null}}),_=w(u.prototype,"shadow_parent",[a],{enumerable:!0,initializer:function(){return null}}),f=w(u.prototype,"shadow_prefab",[o],{enumerable:!0,initializer:function(){return null}}),c=u))||c);n.default=j,t.exports=n.default,cc._RF.pop()},{"../framework/LocalData":"LocalData","../framework/MRes":"MRes","./Game":"Game","./GamePlay":"GamePlay"}],GamePlay:[function(e,t,n){"use strict";cc._RF.push(t,"b33afVSrHBLPr+1l8c/xcSj","GamePlay"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,a,o,c,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=v(e("./Game")),_=(e("../framework/LocalData"),v(e("./GameDraw"))),f=v(e("./CubeCollision")),p=e("./Cube"),h=v(e("../panel/PanelGame")),b=v(e("../framework/MPanel")),y=e("../framework/Global"),d=v(e("../framework/MRes"));function v(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var O=cc._decorator,T=O.ccclass,C=O.property,R=3,L=3,x=(r=C(cc.Node),i=C(cc.Node),T((o=function(e){function t(){var e,n,r;g(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),m(r,"new_cube",c,r),m(r,"new_cube_bg",u,r),w(r,n)}return k(t,cc.Component),l(t,[{key:"onLoad",value:function(){this.game=new s.default,this.game.init(),this._score=0,this.is_prop_change_done=!1,this.is_prop_remove_done=!1,this.open_collider_manager(),this.set_touch_event(),t.ins=this}},{key:"game_init",value:function(){this.game.init(),this.score=0,this.is_prop_change_done=!0,this.prop_change_count=R,this.is_prop_remove_done=!0,this.prop_remove_count=L}},{key:"game_start",value:function(){cc.log("[GamePlay.start] \u6e38\u620f\u5f00\u59cb"),this.game_init(),p.Cube.ins.create_random_cube()}},{key:"game_restart",value:function(){cc.log("[GamePlay.restart] \u6e38\u620f\u91cd\u65b0\u5f00\u59cb"),this.game_init(),_.default.ins.update_cube_bg(),p.Cube.ins.create_random_cube()}},{key:"game_fail",value:function(){cc.log("[GamePlay.fail] \u6e38\u620f\u7ed3\u675f"),b.default.ins.panel_show("PanelScore")}},{key:"set_touch_event",value:function(){var e=this;this.new_cube.on(cc.Node.EventType.TOUCH_START,function(){}),this.new_cube.on(cc.Node.EventType.TOUCH_END,function(e){e.getDelta().equals(cc.Vec2.ZERO)&&e.getLocationX()===e.getStartLocation().x&&e.getLocationY()===e.getStartLocation().y&&(cc.log("\u65cb\u8f6c"),p.Cube.ins.rotate())}),this.new_cube.on(cc.Node.EventType.TOUCH_MOVE,function(t){t.getDelta().equals(cc.Vec2.ZERO)||(cc.log("\u79fb\u52a8"),e.new_cube.position=e.node.convertTouchToNodeSpaceAR(t))}),this.new_cube.on(cc.Node.EventType.TOUCH_END,function(e){cc.log("\u653e\u7f6e\uff08\u4e0d\u8bba\u653e\u7f6e\u6210\u529f\u4e0e\u5426\uff09"),f.default.ins.put()}),this.new_cube.on(cc.Node.EventType.TOUCH_CANCEL,function(e){cc.log("\u653e\u7f6e\u5931\u8d25"),p.Cube.ins.position=cc.v2(0,-400)})}},{key:"open_collider_manager",value:function(){cc.director.getCollisionManager().enabled=!0}},{key:"prop_change",value:function(){var e=this;if(cc.log("[GamePlay.prop.change]"),this.is_prop_change_done&&!(this.prop_change_count<1)){this.is_prop_change_done=!1;var t=cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(){p.Cube.ins.create_different_random_cube().then(function(){p.Cube.ins.rotation=0,p.Cube.ins.direction=!0,p.Cube.ins.cl.enabled=!0})}),cc.scaleTo(.2,1),cc.callFunc(function(){e.is_prop_change_done=!0,e.prop_change_count--}));p.Cube.ins.node.runAction(t)}}},{key:"prop_remove",value:function(){var e=this;if(cc.log("[GamePlay.prop.remove]"),this.is_able_to_remove=!0,void 0===this.is_first_set){this.is_first_set=0;for(var t=0;t<_.default.ins.cube_array.length;t++)for(var n=function(n){var r=_.default.ins.get_cube(cc.v2(t,n));y.G.set_event(r,!1,function(){if(e.is_prop_remove_done&&!(e.prop_remove_count<1)&&!(e.game.get_p_value(r.p)<=0)&&e.is_able_to_remove){e.is_prop_remove_done=!1;var t=cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.game.set_p_value(r.p,0),_.default.ins.change_cube_sprite(r.p,d.default.ins.array_cube[0])}),cc.fadeIn(.2),cc.callFunc(function(){e.is_prop_remove_done=!0,e.prop_remove_count--,e.is_able_to_remove=!1}));r.runAction(t)}})},r=0;r<_.default.ins.cube_array[t].length;r++)n(r)}}},{key:"score",set:function(e){this._score=e,h.default.ins.update_score()},get:function(){return this._score}},{key:"prop_change_count",set:function(e){this._prop_change_count=e,h.default.ins.update_prop_change_count()},get:function(){return this._prop_change_count}},{key:"prop_remove_count",set:function(e){this._prop_remove_count=e,h.default.ins.update_prop_remove_count()},get:function(){return this._prop_remove_count}}]),t}(),c=P(o.prototype,"new_cube",[r],{enumerable:!0,initializer:function(){return null}}),u=P(o.prototype,"new_cube_bg",[i],{enumerable:!0,initializer:function(){return null}}),a=o))||a);n.default=x,t.exports=n.default,cc._RF.pop()},{"../framework/Global":"Global","../framework/LocalData":"LocalData","../framework/MPanel":"MPanel","../framework/MRes":"MRes","../panel/PanelGame":"PanelGame","./Cube":"Cube","./CubeCollision":"CubeCollision","./Game":"Game","./GameDraw":"GameDraw"}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"0dd0a3kmtlEBbts65Mnhes+","Game"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./Cube");function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c={V_UP_LEFT:cc.v2(-1,-1),V_UP_MID:cc.v2(-1,0),V_UP_RIGHT:cc.v2(-1,1),V_LEFT:cc.v2(0,-1),V_RIGHT:cc.v2(0,1),V_DOWN_LEFT:cc.v2(1,-1),V_DOWN_MID:cc.v2(1,0),V_DOWN_RIGHT:cc.v2(1,1)},u=function(){function e(){o(this,e),this.map_array=Array.of(),this.kind_array=Array.of(),this.start_map_arraylike={0:[-1,0,0,0,0,-1,-1],1:[-1,0,0,0,0,0,-1],2:[0,0,0,0,0,0,-1],3:[0,0,0,0,0,0,0],4:[0,0,0,0,0,0,-1],5:[-1,0,0,0,0,0,-1],6:[-1,0,0,0,0,-1,-1],length:7},this.test_map_arraylike={0:[-1,0,1,0,0,-1,-1],1:[-1,0,1,0,0,0,-1],2:[0,0,1,1,0,0,-1],3:[0,0,1,1,1,0,0],4:[0,0,1,1,0,0,-1],5:[-1,0,0,0,0,0,-1],6:[-1,0,0,0,0,-1,-1],length:7}}return r(e,[{key:"init",value:function(){this.map_array.length=0;for(var e=0;e<this.start_map_arraylike.length;e++)this.map_array.push(Array.from(this.start_map_arraylike[e.toString()]));this.kind_array.length=this.map_array.length,this.kind_array.fill(null);for(var t=0;t<this.map_array.length;t++)for(var n=0;n<this.map_array[t].length;n++){var r=this.get_p_value(cc.v2(t,n));0!==r&&(-1!==r&&(null===this.kind_array[r]&&(this.kind_array[r]=Array.of()),this.kind_array[r].push(cc.v2(t,n))))}}},{key:"empty_type",value:function(){for(var e=new Set,t=0;t<this.map_array.length;t++)for(var n=0;n<this.map_array[t].length;n++){var r=cc.v2(t,n);if(this.is_p_empty(r)&&(this.empty_type_has_single(r)&&e.add(i.CubeType.SINGLE),this.empty_type_has_hor(r)&&e.add(i.CubeType.HOR),this.empty_type_has_left(r)&&e.add(i.CubeType.LEFT),this.empty_type_has_right(r)&&e.add(i.CubeType.RIGHT),4===e.size))return e}return e}},{key:"empty_value",value:function(){for(var e=new Set,t=0;t<this.map_array.length;t++)for(var n=0;n<this.map_array[t].length;n++){var r=cc.v2(t,n);if(e.add(this.get_p_value(r)),8===e.size)return e.delete(-1),e.delete(0),e}return e.delete(-1),e.delete(0),e.add(1),e.add(2),e}},{key:"empty_type_has_single",value:function(e){return!0}},{key:"empty_type_has_hor",value:function(e){var t=e.add(c.V_LEFT);return this.is_p_empty(t)}},{key:"empty_type_has_left",value:function(e){var t=void 0;return t=e.x%2==1?e.add(c.V_UP_LEFT):e.add(c.V_UP_MID),this.is_p_empty(t)}},{key:"empty_type_has_right",value:function(e){var t=void 0;return t=e.x%2==1?e.add(c.V_UP_MID):e.add(c.V_UP_RIGHT),this.is_p_empty(t)}},{key:"is_p_empty",value:function(e){return 0===this.get_p_value(e)}},{key:"set_p_value",value:function(e,t){try{this.map_array[e.x][e.y]=t}catch(e){}}},{key:"get_p_value",value:function(e){var t=void 0;try{t=this.map_array[e.x][e.y]}catch(e){t=-1}return t}},{key:"merge",value:function(e){var t=this;if(0!==this.get_p_value(e)){var n=new Set,r=new Set;if(r.add(this.p_trans_string(e)),(n=this.merge_recursive(this.get_p_value(e),n,r)).delete(this.p_trans_string(e)),!(n.size<2)){var i=Array.of();return n.forEach(function(e){i.push(t.p_untrans_string(e))}),i}}}},{key:"merge_data",value:function(e,t){var n=this;t.forEach(function(e){n.set_p_value(e,0)}),this.set_p_value(e,this.get_p_value(e)+1)}},{key:"merge_around",value:function(e){return this.p_around(e)}},{key:"merge_around_data",value:function(e,t){this.merge_data(e,t),this.set_p_value(e,0)}},{key:"merge_recursive",value:function(e,t,n){var r=this;if(0===(n=new Set([].concat(a(n)).filter(function(e){return!t.has(e)}))).size)return t;t=new Set([].concat(a(t),a(n)));var i=new Set;return n.forEach(function(t){var n=r.p_untrans_string(t),a=r.p_around(n),o=!0,c=!1,u=void 0;try{for(var l,s=a[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var _=l.value;r.get_p_value(_)===e&&i.add(r.p_trans_string(_))}}catch(e){c=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(c)throw u}}}),n=i,this.merge_recursive(e,t,n)}},{key:"p_around",value:function(e){var t,n,r,i,a=void 0,o=void 0;return e.x%2==1?(a=e.add(c.V_UP_LEFT),o=e.add(c.V_DOWN_LEFT)):(a=e.add(c.V_UP_RIGHT),o=e.add(c.V_DOWN_RIGHT)),t=e.add(c.V_UP_MID),n=e.add(c.V_LEFT),r=e.add(c.V_RIGHT),i=e.add(c.V_DOWN_MID),Array.of(a,o,t,n,r,i)}},{key:"p_trans_string",value:function(e){return e.x.toString()+e.y.toString()}},{key:"p_untrans_string",value:function(e){var t=Array.of.apply(Array,a(e));return cc.v2(Number.parseInt(t[0]),Number.parseInt(t[1]))}}]),e}();n.default=u,t.exports=n.default,cc._RF.pop()},{"./Cube":"Cube"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"dc582NdJf9FLrIRw0MnInZl","Global"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){i(this,e)}return r(e,[{key:"random_int",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"random_float",value:function(e,t){return Math.random()*(t-e)+e}},{key:"random_item_form_array",value:function(e){if(0!==e.length)return e[this.random_int(0,e.length)]}},{key:"set_as_btn_like",value:function(e){if(null===e.getComponent(cc.Button)){var t=e.addComponent(cc.Button);t.transition=cc.Button.Transition.SCALE,t.duration=.05,t.zoomScale=.9}}},{key:"set_event",value:function(e,t,n){e.on(cc.Node.EventType.TOUCH_END,n),t&&this.set_as_btn_like(e)}}]),e}();n.G=new a;cc._RF.pop()},{}],LocalData:[function(e,t,n){"use strict";cc._RF.push(t,"a2f52DB/E5GA4HbIoCAAma2","LocalData"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){i(this,e)}return r(e,[{key:"set_item",value:function(e,t){cc.sys.localStorage.setItem(e,t)}},{key:"get_item",value:function(e){return cc.sys.localStorage.getItem(e)}},{key:"is_init",set:function(e){this.set_item("is_init",e)},get:function(){return this.get_item("is_init")}},{key:"music",set:function(e){this.set_item("music",e)},get:function(){return this.get_item("music")}},{key:"sound",set:function(e){this.set_item("sound",e)},get:function(){return this.get_item("sound")}},{key:"max_score",set:function(e){this.set_item("max_score",e)},get:function(){return null===this.get_item("max_score")&&this.set_item("max_score",0),Number(this.get_item("max_score"))}}]),e}();n.L=new a;cc._RF.pop()},{}],MAudio:[function(e,t,n){"use strict";cc._RF.push(t,"46253frOl1MOL45ukfh+0LZ","MAudio"),Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=cc._decorator,l=u.ccclass,s=(u.property,l(r=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,cc.Component),i(t,[{key:"onLoad",value:function(){t.instance=this}}],[{key:"ins",get:function(){return t.instance}}]),t}())||r);n.default=s,t.exports=n.default,cc._RF.pop()},{}],MPanel:[function(e,t,n){"use strict";cc._RF.push(t,"6dc19Xe9PVP8ZgwdrYKs6Uw","MPanel"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,a,o,c,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=f(e("./PanelBase")),_=f(e("./MRes"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=cc._decorator,m=v.ccclass,g=v.property,w=(r=g(cc.Node),i=g(cc.Node),m((o=function(e){function t(){var e,n,r;h(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),p(r,"panel_parent",c,r),p(r,"panel_loading",u,r),b(r,n)}return y(t,cc.Component),l(t,[{key:"onLoad",value:function(){this.now_z_index=0,this.panel_array={},t.instance=this}},{key:"create_all_panel",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=_.default.ins.array_panel[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value,o=cc.instantiate(a);o.parent=this.panel_parent,o.active=!1,this.panel_array[a.name]=new s.default(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.panel_array.PanelLoading=new s.default(this.panel_loading),cc.log("\u521b\u5efa\u6240\u6709UI\u8282\u70b9\u6210\u529f",this.panel_array)}},{key:"panel_show",value:function(e){var t=this.check_panel(e);if(!1!==t){try{t.node.getComponent(e).show()}catch(e){t.show()}this.now_z_index+=1,t.node.zIndex=this.now_z_index}}},{key:"panel_hide",value:function(e){var t=this.check_panel(e);if(!1!==t)try{t.node.getComponent(e).hide()}catch(e){t.hide()}}},{key:"check_panel",value:function(e){var t=this.panel_array[e];return void 0===t?(cc.error("\u67e5\u627e\u7684panel\u4e0d\u5b58\u5728\uff0cpanel_name=",e),!1):t}}],[{key:"ins",get:function(){return t.instance}}]),t}(),c=d(o.prototype,"panel_parent",[r],{enumerable:!0,initializer:function(){return null}}),u=d(o.prototype,"panel_loading",[i],{enumerable:!0,initializer:function(){return null}}),a=o))||a);n.default=w,t.exports=n.default,cc._RF.pop()},{"./MRes":"MRes","./PanelBase":"PanelBase"}],MRes:[function(e,t,n){"use strict";cc._RF.push(t,"3d629PEsTtI4oCo2rwK6HYq","MRes"),Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=cc._decorator,s=l.ccclass,_=(l.property,"panel"),f="audio",p="cube",h="cube_shadow",b=s(r=function(e){function t(){return o(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,cc.Component),i(t,[{key:"onLoad",value:function(){this.load_count=0,this.total_count=0,this.array_panel=Array.of(),this.array_audio=Array.of(),this.array_cube=Array.of(),this.array_cube_shadow=Array.of(),t.instance=this}},{key:"load_chain",value:function(){var e=this;return new Promise(function(t,n){e.load_res(f,cc.AudioClip,e.array_audio).then(function(n){var r;(r=cc).log.apply(r,a(n)),e.load_res(_,cc.Prefab,e.array_panel).then(function(n){var r;(r=cc).log.apply(r,a(n)),e.load_res(p,cc.SpriteFrame,e.array_cube).then(function(n){var r;(r=cc).log.apply(r,a(n)),e.load_res(h,cc.SpriteFrame,e.array_cube_shadow).then(function(e){var n;(n=cc).log.apply(n,a(e)),t()})})})})})}},{key:"load_res",value:function(e,t,n){var r=this;return new Promise(function(i,a){cc.loader.loadResDir(e,t,function(o,c){if(o)a(Array.of("\u8f7d\u5165\u8d44\u6e90\u5931\u8d25\uff0cpath&type=",e,t.toString(),"err=",o));else{r.total_count+=c.length;var u=!0,l=!1,s=void 0;try{for(var _,f=c[Symbol.iterator]();!(u=(_=f.next()).done);u=!0){var p=_.value;n.push(p),r.load_count+=1}}catch(o){l=!0,s=o}finally{try{!u&&f.return&&f.return()}finally{if(l)throw s}}i(Array.of("\u8d44\u6e90\u8f7d\u5165\u6210\u529f\uff0cpath=",e))}})})}},{key:"total_count",get:function(){return this._total_count},set:function(e){this._total_count=e}},{key:"load_count",get:function(){return this._load_count},set:function(e){this._load_count=e}}],[{key:"ins",get:function(){return t.instance}}]),t}())||r;n.default=b,t.exports=n.default,cc._RF.pop()},{}],PanelBase:[function(e,t,n){"use strict";cc._RF.push(t,"aa003y3OtRJbJbbn7rv8vli","PanelBase"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=.2,o=function(){function e(t){i(this,e),this.node=t}return r(e,[{key:"show",value:function(){this.node.stopAllActions(),this.show_with_scale()}},{key:"hide",value:function(){this.hide_with_scale()}},{key:"show_with_nothing",value:function(){this.node.active=!0}},{key:"hide_with_nothing",value:function(){this.node.active=!1}},{key:"show_with_scale",value:function(){var e=a,t=cc.scaleTo(e,1);return this.node.scale=0,this.show_with_nothing(),this.node.runAction(t),e}},{key:"hide_with_scale",value:function(){var e=this,t=a,n=cc.sequence(cc.scaleTo(t,0),cc.callFunc(function(){e.hide_with_nothing()}));return this.node.runAction(n),t}},{key:"node",get:function(){return this._node},set:function(e){this._node=e}}]),e}();n.default=o,t.exports=n.default,cc._RF.pop()},{}],PanelDemo:[function(e,t,n){"use strict";cc._RF.push(t,"386036grR9N6b3mg0DfO++0","PanelDemo");var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(function(e){e&&e.__esModule})(e("./PanelBase"));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=cc._decorator,l=u.ccclass;u.property,l(r=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,cc.Component),i(t,[{key:"onLoad",value:function(){}}]),t}());cc._RF.pop()},{"./PanelBase":"PanelBase"}],PanelGame:[function(e,t,n){"use strict";cc._RF.push(t,"f36bc4L3E1Kq6Dm/eSd7RmW","PanelGame"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,a,o,c,u,l,s,_,f,p,h,b,y,d,v,m,g,w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),k=C(e("../framework/MPanel")),P=e("../framework/Global"),O=C(e("../gameplay/GamePlay")),T=e("../framework/LocalData");function C(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function z(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var G=cc._decorator,E=G.ccclass,I=G.property,M=15,A=(r=I(cc.Node),i=I(cc.Node),a=I(cc.Label),o=I(cc.Label),c=I(cc.Node),u=I(cc.Node),l=I(cc.Label),s=I(cc.Label),E((f=function(e){function t(){var e,n,r;L(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=x(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),R(r,"circle",p,r),R(r,"btn_pause",h,r),R(r,"score_label",b,r),R(r,"max_score_label",y,r),R(r,"btn_change",d,r),R(r,"btn_remove",v,r),R(r,"change_count_label",m,r),R(r,"remove_count_label",g,r),x(r,n)}return j(t,cc.Component),w(t,[{key:"onLoad",value:function(){this.is_first=!0,this.set_circle_rotation(),this.set_event_pause(),this.set_event_change(),this.set_event_remove(),t.ins=this}},{key:"onEnable",value:function(){this.is_first?this.is_first=!1:(this.update_score(),O.default.ins.game_restart())}},{key:"update_score",value:function(){this.score_label.string=O.default.ins.score,O.default.ins.score>T.L.max_score&&(T.L.max_score=O.default.ins.score),this.max_score_label.string=T.L.max_score}},{key:"update_prop_change_count",value:function(){this.change_count_label.string=O.default.ins.prop_change_count}},{key:"update_prop_remove_count",value:function(){this.remove_count_label.string=O.default.ins.prop_remove_count}},{key:"set_circle_rotation",value:function(){var e=cc.rotateBy(M,360).repeatForever();this.circle.runAction(e)}},{key:"set_event_pause",value:function(){var e=this;P.G.set_event(this.btn_pause,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_pause.name),k.default.ins.panel_show("PanelPause")})}},{key:"set_event_change",value:function(){var e=this;P.G.set_event(this.btn_change,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_change.name),O.default.ins.prop_change()})}},{key:"set_event_remove",value:function(){var e=this;P.G.set_event(this.btn_remove,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_remove.name),O.default.ins.prop_remove()})}}]),t}(),p=z(f.prototype,"circle",[r],{enumerable:!0,initializer:function(){return null}}),h=z(f.prototype,"btn_pause",[i],{enumerable:!0,initializer:function(){return null}}),b=z(f.prototype,"score_label",[a],{enumerable:!0,initializer:function(){return null}}),y=z(f.prototype,"max_score_label",[o],{enumerable:!0,initializer:function(){return null}}),d=z(f.prototype,"btn_change",[c],{enumerable:!0,initializer:function(){return null}}),v=z(f.prototype,"btn_remove",[u],{enumerable:!0,initializer:function(){return null}}),m=z(f.prototype,"change_count_label",[l],{enumerable:!0,initializer:function(){return null}}),g=z(f.prototype,"remove_count_label",[s],{enumerable:!0,initializer:function(){return null}}),_=f))||_);n.default=A,t.exports=n.default,cc._RF.pop()},{"../framework/Global":"Global","../framework/LocalData":"LocalData","../framework/MPanel":"MPanel","../gameplay/GamePlay":"GamePlay"}],PanelMenu:[function(e,t,n){"use strict";cc._RF.push(t,"986ec4NP1lLPKD6VhFA+H/6","PanelMenu");var r,i,a,o,c,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=f(e("../framework/MPanel")),_=e("../framework/Global");f(e("../gameplay/GamePlay"));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var v=cc._decorator,m=v.ccclass,g=v.property;r=g(cc.Node),i=g(cc.Node),m((o=function(e){function t(){var e,n,r;h(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),p(r,"start_btn",c,r),p(r,"rank_btn",u,r),b(r,n)}return y(t,cc.Component),l(t,[{key:"onLoad",value:function(){}},{key:"start",value:function(){this.set_event_start()}},{key:"set_event_start",value:function(){var e=this;_.G.set_event(this.start_btn,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.start_btn.name),s.default.ins.panel_hide("PanelMenu"),s.default.ins.panel_show("PanelGame")})}}]),t}(),c=d(o.prototype,"start_btn",[r],{enumerable:!0,initializer:function(){return null}}),u=d(o.prototype,"rank_btn",[i],{enumerable:!0,initializer:function(){return null}}),a=o));cc._RF.pop()},{"../framework/Global":"Global","../framework/MPanel":"MPanel","../gameplay/GamePlay":"GamePlay"}],PanelPause:[function(e,t,n){"use strict";cc._RF.push(t,"8ed35PuV/pJgKnsb8S4LGdI","PanelPause");var r,i,a,o,c,u,l,s,_,f,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=d(e("../framework/MPanel")),b=e("../framework/Global"),y=d(e("../gameplay/GamePlay"));function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var P=cc._decorator,O=P.ccclass,T=P.property;r=T(cc.Node),i=T(cc.Node),a=T(cc.Node),o=T(cc.Node),O((u=function(e){function t(){var e,n,r;m(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),v(r,"btn_continue",l,r),v(r,"btn_restart",s,r),v(r,"btn_score",_,r),v(r,"btn_back",f,r),g(r,n)}return w(t,cc.Component),p(t,[{key:"onLoad",value:function(){}},{key:"start",value:function(){this.set_event_continue(),this.set_event_restart(),this.set_event_score(),this.set_event_back()}},{key:"set_event_continue",value:function(){var e=this;b.G.set_event(this.btn_continue,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_continue.name),h.default.ins.panel_hide("PanelPause")})}},{key:"set_event_restart",value:function(){var e=this;b.G.set_event(this.btn_restart,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_restart.name),y.default.ins.game_restart(),h.default.ins.panel_hide("PanelPause")})}},{key:"set_event_score",value:function(){var e=this;b.G.set_event(this.btn_score,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_score.name),h.default.ins.panel_hide("PanelPause"),h.default.ins.panel_show("PanelScore")})}},{key:"set_event_back",value:function(){var e=this;b.G.set_event(this.btn_back,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_back.name),h.default.ins.panel_hide("PanelPause"),h.default.ins.panel_hide("PanelGame"),h.default.ins.panel_show("PanelMenu")})}}]),t}(),l=k(u.prototype,"btn_continue",[r],{enumerable:!0,initializer:function(){return null}}),s=k(u.prototype,"btn_restart",[i],{enumerable:!0,initializer:function(){return null}}),_=k(u.prototype,"btn_score",[a],{enumerable:!0,initializer:function(){return null}}),f=k(u.prototype,"btn_back",[o],{enumerable:!0,initializer:function(){return null}}),c=u));cc._RF.pop()},{"../framework/Global":"Global","../framework/MPanel":"MPanel","../gameplay/GamePlay":"GamePlay"}],PanelScore:[function(e,t,n){"use strict";cc._RF.push(t,"8e1beQgRQRDC5vaLWjh+zd0","PanelScore");var r,i,a,o,c,u,l,s,_,f,p,h,b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=g(e("../framework/MPanel")),d=e("../framework/Global"),v=g(e("../gameplay/GamePlay")),m=e("../framework/LocalData");function g(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var C=cc._decorator,R=C.ccclass,L=C.property;r=L(cc.Node),i=L(cc.Node),a=L(cc.Node),o=L(cc.Label),c=L(cc.Label),R((l=function(e){function t(){var e,n,r;k(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=P(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),w(r,"btn_restart",s,r),w(r,"btn_back",_,r),w(r,"btn_share",f,r),w(r,"score_label",p,r),w(r,"max_score_label",h,r),P(r,n)}return O(t,cc.Component),b(t,[{key:"onLoad",value:function(){this.set_event_restart(),this.set_event_back(),this.set_event_share(),this.is_first=!0}},{key:"onEnable",value:function(){this.is_first?this.is_first=!1:this.update_score()}},{key:"update_score",value:function(){this.score_label.string=v.default.ins.score,this.max_score_label.string=m.L.max_score}},{key:"set_event_restart",value:function(){var e=this;d.G.set_event(this.btn_restart,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_restart.name),v.default.ins.game_restart(),y.default.ins.panel_hide("PanelScore")})}},{key:"set_event_back",value:function(){var e=this;d.G.set_event(this.btn_back,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_back.name),y.default.ins.panel_hide("PanelScore"),y.default.ins.panel_hide("PanelGame"),y.default.ins.panel_show("PanelMenu")})}},{key:"set_event_share",value:function(){var e=this;d.G.set_event(this.btn_share,!0,function(){cc.log("[\u70b9\u51fb\u4e8b\u4ef6]",e.name,e.btn_share.name)})}}]),t}(),s=T(l.prototype,"btn_restart",[r],{enumerable:!0,initializer:function(){return null}}),_=T(l.prototype,"btn_back",[i],{enumerable:!0,initializer:function(){return null}}),f=T(l.prototype,"btn_share",[a],{enumerable:!0,initializer:function(){return null}}),p=T(l.prototype,"score_label",[o],{enumerable:!0,initializer:function(){return null}}),h=T(l.prototype,"max_score_label",[c],{enumerable:!0,initializer:function(){return null}}),u=l));cc._RF.pop()},{"../framework/Global":"Global","../framework/LocalData":"LocalData","../framework/MPanel":"MPanel","../gameplay/GamePlay":"GamePlay"}],WxLib:[function(e,t,n){"use strict";cc._RF.push(t,"de95dOS8+5OuoxJ4pDR57+q","WxLib"),Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){i(this,e)}return r(e,[{key:"test",value:function(){wx.login({success:function(){cc.log(1111111111),wx.getUserInfo()}})}}]),e}();n.WX=new a;cc._RF.pop()},{}],WxOpenData:[function(e,t,n){"use strict";cc._RF.push(t,"46c8c+sy25PO69Ig9YIZU9i","WxOpenData");var r,i,a,o,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function u(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=cc._decorator,p=f.ccclass;r=(0,f.property)(cc.Sprite),p((a=function(e){function t(){var e,n,r;l(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),u(r,"open_data_display",o,r),s(r,n)}return _(t,cc.Component),c(t,[{key:"start",value:function(){this.tex=new cc.Texture2D;var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.open_data_display.spriteFrame=new cc.SpriteFrame(this.tex)}}]),t}(),o=function(e,t,n,r,i){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}(a.prototype,"open_data_display",[r],{enumerable:!0,initializer:function(){return null}}),i=a));cc._RF.pop()},{}]},{},["WxLib","WxOpenData","AppMain","Global","LocalData","MAudio","MPanel","MRes","PanelBase","PanelDemo","Cube","CubeCollision","Game","GameDraw","GamePlay","PanelGame","PanelMenu","PanelPause","PanelScore"]);