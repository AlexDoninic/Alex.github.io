require=function o(a,r,s){function l(t,e){if(!r[t]){if(!a[t]){var c="function"==typeof require&&require;if(!e&&c)return c(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var n=r[t]={exports:{}};a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,o,a,r,s)}return r[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({AppStart:[function(c,e,t){"use strict";cc._RF.push(e,"cb039cAazpMW4XtLu3JBNtD","AppStart"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label},onLoad:function(){(function(){cc.Mgr={},cc.director.getCollisionManager().enabled=!0;var e=c("AudioMgr");cc.Mgr.AudioMgr=new e,cc.Mgr.AudioMgr.init(),cc.Mgr.global=c("Global"),cc.Mgr.UserMgr=c("UserMgr");var t=c("MapDecoder");cc.Mgr.MapDecoder=new t,cc.Mgr.MapDecoder.MapDecodejson(function(e){e&&cc.log("====解析数据成功====")})})(),cc.Mgr.AudioMgr.playBGM("bgm.mp3")},start:function(){var e=this,t="Just Loop",c=0;this.tipLabel.string="",this.schedule(function(){++c==t.length+1?e.onLoadSuccess():e.tipLabel.string=t.substring(0,c)},.3,t.length+1,.3)},onLoadSuccess:function(){cc.director.loadScene("HallScene")}}),cc._RF.pop()},{AudioMgr:"AudioMgr",Global:"Global",MapDecoder:"MapDecoder",UserMgr:"UserMgr"}],AudioMgr:[function(e,t,c){"use strict";cc._RF.push(t,"03fbffJyD9Eu5t62plKaVt3","AudioMgr");cc.Class({extends:cc.Component,properties:{bgmVolume:.5,sfxVolume:.5,bgmAudioID:-1,musicState:1},init:function(){var e;null!=(e=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/sound/"+e)},playBGM:function(e){var t=this.getUrl(e);console.log("播放背景音乐 "+t),0<=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){var t=this.getUrl(e);if(0<this.sfxVolume)cc.audioEngine.play(t,!1,this.sfxVolume)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e,t){0<=this.bgmAudioID&&(0<e?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){this.musicState=0,this.bgmVolume=0,this.sfxVolume=0,cc.audioEngine.pauseAll()},resumeAll:function(){this.musicState=1,this.bgmVolume=1,this.sfxVolume=1,cc.audioEngine.resumeAll()},getVoiceState:function(){return this.musicState}});cc._RF.pop()},{}],GameScene:[function(e,t,c){"use strict";cc._RF.push(t,"752c0JZ6lNJH4UPFYglzueC","GameScene");var o=e("GameState");e("tile");cc.Class({extends:cc.Component,properties:{backgroundNode:cc.Node,tilePrefab:[cc.Prefab],tileParent:cc.Node,layOutNode:cc.Node,level:1,tileSize:60,curLvlLbl:cc.Label,TipSuc:cc.Node,FinishLv:!1,toNextLv:!1},onLoad:function(){this.TipSuc.active=!1,cc.director.GlobalEvent.on("CheckAllTileDir",function(){this.checkAllTileDir()&&(cc.Mgr.global.gameState=o.FinishLv,cc.Mgr.UserMgr.setCurFinishLv(this.level),this.FinishLv=!0,this.TipSuc.active=!0,cc.log("顺利完成"),cc.Mgr.AudioMgr.playSFX("newLv.mp3"),this.TintAllTilesColor())},this)},start:function(){this.toNextLv=!1,cc.log("选择的加载关卡(从0开始算起) = "+cc.Mgr.global.ChooseLv),this.level=cc.Mgr.global.ChooseLv,this.curLvlLbl.string="Level:"+(this.level+1);var e=cc.Mgr.MapDecoder.getMapLevelData(this.level),t=e.width*this.tileSize;cc.log("宽度  "+e.width),this.layOutNode.width=t,this.RefreshMap(e.width,e.tiles)},RefreshMap:function(e,t){cc.Mgr.global.gameState=o.Game;for(var c=0;c<t.length;c++){var i=t[c],n=cc.instantiate(this.tilePrefab[i.spType]);n.active=!0,n.parent=this.tileParent}},TintAllTilesColor:function(){if(cc.Mgr.global.gameState==o.FinishLv)for(var e=this.tileParent.children,t=0;t<e.length;t++){e[t];e[t].runAction(cc.tintTo(1,135,125,69))}this.backgroundNode.runAction(cc.tintTo(1,105,159,95,150))},FadeOutAndDestoyAllTiles:function(){if(cc.Mgr.global.gameState==o.FinishLv)for(var e=this.tileParent.children,t=0;t<e.length;t++){e[t];e[t].runAction(cc.fadeOut(1))}},checkAllTileDir:function(){var e=this.tileParent.children;cc.log("============================ "+e.length);for(var t=0;t<e.length;t++){var c=e[t].getComponent("tile");if(null!=c&&1!=c.CheckDir())return!1}return!0},BackHallScene:function(){cc.director.GlobalEvent.clear(),cc.director.loadScene("HallScene")},ToNextLevel:function(){if(cc.Mgr.global.ChooseLv=this.level+1,cc.director.GlobalEvent.clear(),cc.Mgr.global.ChooseLv<cc.Mgr.MapDecoder.getMapLevelLenght()){var e=cc.sequence(cc.callFunc(function(){this.toNextLv=!0},this),cc.fadeOut(.5),cc.callFunc(function(){this.toNextLv=!1,cc.director.loadScene("gamescene")},this));0==this.toNextLv&&this.node.runAction(e)}else cc.director.loadScene("HallScene")}}),cc._RF.pop()},{GameState:"GameState",tile:"tile"}],GameState:[function(e,t,c){"use strict";cc._RF.push(t,"10a95T6qK5GarMaiRvPHono","GameState");var i=cc.Enum({Menu:0,Game:1,FinishLv:2});t.exports=i,cc._RF.pop()},{}],GlobalEvent:[function(e,t,c){"use strict";cc._RF.push(t,"ee7d234LKZEM6QklASaLrg0","GlobalEvent"),cc.director.GlobalEvent={handles_:{},emit:function(e,t){var c=[];for(var i in console.log("事件分发",e),t.eventName=e,this.handles_)if(i==e)for(var n=0;n<this.handles_[i].length;n++)if(this.handles_[i][n]){var o=this.handles_[i][n](t);c.push(o)}return c},on:function(e,t,c){this.handles_[e]=this.handles_[e]||[],console.log("收到事件",e),this.handles_[e].push(t.bind(c))},off:function(e){if(this.handles_[e])for(var t=0;t<this.handles_[e].length;t++)this.handles_[e][t]=null},clear:function(){for(var e in this.handles_)for(var t=0;t<this.handles_[e].length;t++)this.handles_[e][t]=null}},cc._RF.pop()},{}],Global:[function(e,t,c){"use strict";cc._RF.push(t,"ba6d3SsbQVMub9ZaMnXZ62h","Global");var i=e("GameState"),n=cc.Class({extends:cc.Component,statics:{AllLevelCount:cc.Integer,ChooseLv:cc.Integer,gameState:i.Menu}});t.exports=n,cc._RF.pop()},{GameState:"GameState"}],HallScene:[function(e,t,c){"use strict";cc._RF.push(t,"9f1b28tJq5M8b6PjPaLNYeB","HallScene");var i=e("GameState");cc.Class({extends:cc.Component,properties:{lvItemPrefab:cc.Prefab,lvItemParent:cc.Node},onLoad:function(){cc.Mgr.global.gameState=i.Menu,this.LoadLevelData()},start:function(){},LoadLevelData:function(){var e=cc.Mgr.MapDecoder.getMapLevelLenght(),t=cc.Mgr.UserMgr.getCurFinishLv();cc.log("拿到level数量 = "+e);for(var c=0;c<e;c++){var i=cc.instantiate(this.lvItemPrefab);c<=t&&(i.color=new cc.color(150,150,150)),i.getComponent("levelItem").init(c),i.active=!0,i.parent=this.lvItemParent}},OpenUrl:function(){cc.sys.openURL("https://alexdoninic.github.io/MyLove/")}}),cc._RF.pop()},{GameState:"GameState"}],LoadingScene:[function(e,t,c){"use strict";cc._RF.push(t,"8320fDOjPdMoJogQVro7f3x","LoadingScene"),cc.Class({extends:cc.Component,properties:{tipLabel:cc.Label},onLoad:function(){},start:function(){var e=this,t="你的酒窝没有酒,可我醉得像个傻子",c=0;this.tipLabel.string="",this.schedule(function(){++c==t.length+1?e.onLoadSuccess():e.tipLabel.string=t.substring(0,c)},.3,t.length+1,.3)},onLoadSuccess:function(){cc.director.loadScene("HallScene")}}),cc._RF.pop()},{}],MapDecoder:[function(e,t,c){"use strict";cc._RF.push(t,"e579d1pO5VJQ5Lj5MvPZM+6","MapDecoder");var l=e("TileData"),u=e("levelData"),i=cc.Class({extends:cc.Component,properties:{jsonName:"levels",levelDataList:{default:[],type:[u]}},MapDecodejson:function(e){cc.log("MLGB 开始解析数据了");var s=this;s.parseReCb=e,cc.loader.loadRes("json/"+s.jsonName+".json",function(e,t){if(e)return cc.log("错误信息 = "+e),void s.parseReCb(!1);var c=t[s.jsonName];cc.log("长度 = "+c.length),cc.Mgr.global.AllLevelCount=c.length;for(var i=0;i<c.length;i++){var n=new u;n.Id=i.toString(),n.width=c[i].width,n.height=c[i].height;for(var o=0;o<c[i].tiles.length;o++){var a=new l,r=c[i].tiles[o];a.spType=r[0],a.toDir=r[1],n.tiles[o]=a}s.levelDataList[i]=n}s.parseReCb(!0)})},getMapLevelLenght:function(){return this.levelDataList.length},getMapLevelData:function(e){return this.levelDataList[e]}});t.exports=i,cc._RF.pop()},{TileData:"TileData",levelData:"levelData"}],NoticeText:[function(e,t,c){"use strict";cc._RF.push(t,"516dcSPJD1MzJM23TZFk0Rw","NoticeText"),cc.director.NoticeText={ZHUANG_YING:"莊贏",ZHUANG_YING_LAST:"上壹局,莊贏",XIAN_YING_LAST:"上壹局,閑贏",XIAN_YING:"閑贏",HE_JU:"和局",WELCOME:"各位老板,歡迎光臨",START_CHIP_IN:"開始下註",STOP_CHIP_IN:"停止下註",LEFT:"剩余"},cc._RF.pop()},{}],TileData:[function(e,t,c){"use strict";cc._RF.push(t,"973abbGgT5GGbF+vyoO26Kw","TileData");var i=cc.Class({properties:{spType:cc.Integer,toDir:cc.Integer}});t.exports=i,cc._RF.pop()},{}],UserMgr:[function(e,t,c){"use strict";cc._RF.push(t,"6c7cabKaWJGWIUD94DDyEW6","UserMgr");var i=cc.Class({extends:cc.Component,statics:{getCurFinishLv:function(){var e=cc.sys.localStorage.getItem("FinishLv");return null==e&&(e=-1),e},setCurFinishLv:function(e){var t=cc.sys.localStorage.getItem("FinishLv");null==t&&(t=-1),t<e&&cc.sys.localStorage.setItem("FinishLv",e)}}});t.exports=i,cc._RF.pop()},{}],enterBox:[function(e,t,c){"use strict";cc._RF.push(t,"f00bdsI/0xPYohfbdqbu1oa","enterBox");cc.Class({extends:cc.Component,properties:{isContacting:!1},start:function(){},onCollisionStay:function(e,t){1!=this.isContacting&&(cc.log("开始触碰了"),this.isContacting=!0,cc.director.GlobalEvent.emit("CheckAllTileDir",{}))},onCollisionExit:function(e,t){cc.log("没有触碰了"),this.isContacting=!1},IsContacting:function(){return this.isContacting}});cc._RF.pop()},{}],levelData:[function(e,t,c){"use strict";cc._RF.push(t,"00e90YGLytAMLnd+d8HHVv9","levelData");var i=e("TileData"),n=cc.Class({properties:{Id:"",width:cc.Integer,height:cc.Integer,tiles:[i]}});t.exports=n,cc._RF.pop()},{TileData:"TileData"}],levelItem:[function(e,t,c){"use strict";cc._RF.push(t,"b9e61zkSPFIGboyvDVM8bcp","levelItem");var i=cc.Class({extends:cc.Component,properties:{lvLbl:cc.Label,level:cc.Integer},start:function(){},init:function(e){this.level=e,this.lvLbl.string="Level-"+(e+1).toString()},GotoLevelScene:function(){cc.Mgr.global.ChooseLv=this.level,cc.director.loadScene("gamescene")}});t.exports=i,cc._RF.pop()},{}],tile:[function(e,t,c){"use strict";cc._RF.push(t,"955a1GcfL5EKoQ1b11TtgVy","tile");var i=e("GameState"),n=e("enterBox"),o=cc.Class({extends:cc.Component,properties:{Sp:cc.Sprite,Atlas:cc.SpriteAtlas,SpType:1,ToDir:1,curDir:0,rotationState:!1,enterBoxArr:[n]},onLoad:function(){this.node.color=new cc.color(66,140,43),this.node.on("touchstart",function(e){if(cc.Mgr.global.gameState==i.Game){var t=cc.sequence(cc.callFunc(function(){this.rotationState=!0},this),cc.rotateBy(.1,90),cc.callFunc(function(){this.rotationState=!1},this));0==this.rotationState&&(cc.Mgr.AudioMgr.playSFX("turn.mp3"),this.node.runAction(t),this.curDir+=1,4==this.curDir&&(this.curDir=0))}},this)},init:function(e,t){this.spType=e,this.ToDir=t;var c="type"+this.spType.toString();this.Sp.spriteFrame=this.Atlas.getSpriteFrame(c)},start:function(){},checkRotation:function(){cc.log("当前方向 = "+this.curDir);var e=!1;return this.curDir==this.ToDir||0==this.SpType||5==this.spType?e=!0:2==this.SpType&&((0!=this.ToDir||0!=this.curDir&&2!=this.curDir)&&(1!=this.ToDir||1!=this.curDir&&3!=this.curDir)||(e=!0)),e},CheckDir:function(){for(var e=!0,t=0;t<this.enterBoxArr.length;t++)if(0==this.enterBoxArr[t].IsContacting()){e=!1;break}return e}});t.exports=o,cc._RF.pop()},{GameState:"GameState",enterBox:"enterBox"}]},{},["AppStart","AudioMgr","GameScene","GameState","Global","GlobalEvent","HallScene","LoadingScene","MapDecoder","NoticeText","TileData","UserMgr","enterBox","levelData","levelItem","tile"]);