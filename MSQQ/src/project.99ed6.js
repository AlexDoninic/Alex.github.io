window.__require=function t(e,i,n){function o(c,a){if(!i[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var r="function"==typeof __require&&__require;if(!a&&r)return r(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+c+"'")}}var d=i[c]={exports:{}};e[c][0].call(d.exports,function(t){return o(e[c][1][t]||t)},d,d.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({AdsMgr:[function(t,e,i){"use strict";cc._RF.push(e,"cf5c5NSFepPaaGFotmQ9lK8","AdsMgr");var n=t("AdsParam"),o=cc.Class({statics:{openAds:!0,platform:"wx",bannerId_baidu:"6305713",bannerId_wx:"adunit-17ad4731c111a2ec",bannerId_tt:"11bokii9d2pnkp5k15",bdVideoId_1:"6305753",bdVideoId_2:"6305781",bdVideoId_3:"6305782",bdVideoId_4:"6305784",bdVideoId_5:"6305786",bdVideoId_6:"6305788",bdVideoId_7:"6305753",bdVideoId_8:"6305753",bdVideoId_9:"6305753",bdVideoId_10:"6305753",wxVideoId_1:"adunit-bc90198ec1cfe77d",wxVideoId_2:"adunit-39961fe2aca2ea5d",wxVideoId_3:"adunit-44741bde349cb8e4",wxVideoId_4:"adunit-44d815ddde928eec",wxVideoId_5:"adunit-4dae7677f5e04ce9",wxVideoId_6:"adunit-8c0a91ae9857742f",wxVideoId_7:"adunit-45b5cf6daf41598c",wxVideoId_8:"adunit-503baddcdc515459",wxVideoId_9:"adunit-503baddcdc515459",wxVideoId_10:"adunit-503baddcdc515459",ttVideoId_1:"13d01bjc1d8gd3ef45",ttVideoId_2:"ebb236lsa1560024fh",ttVideoId_3:"45cqfbpjqu44gg30bm",ttVideoId_4:"15gha9fde03d3eh15l",ttVideoId_5:"35uq7pgmwmr1664ib1",ttVideoId_6:"325j40knmfa042cq4i",ttVideoId_7:"4j9lf35h4fh8kdda05",ttVideoId_8:"4j9lf35h4fh8kdda05",ttVideoId_9:"4j9lf35h4fh8kdda05",ttVideoId_10:"",allScreen:!1,hasReSizeBanner:!1,resizeTime:0,Init:function(){window.wx||window.tt||window.swan||(this.platform="pc"),this.allScreen=!1},getBannerAdId:function(){return"wx"==this.platform?this.bannerId_wx:"baidu"==this.platform?this.bannerId_baidu:"tt"==this.platform?this.bannerId_tt:null},getVideoAdId:function(t){var e="";if("wx"==this.platform)switch(t){case n.PointA:e=this.wxVideoId_1;break;case n.PointB:e=this.wxVideoId_2;break;case n.PointC:e=this.wxVideoId_3;break;case n.PointD:e=this.wxVideoId_4;break;case n.PointE:e=this.wxVideoId_5;break;case n.PointF:e=this.wxVideoId_6;break;case n.PointG:e=this.wxVideoId_7;break;case n.PointH:e=this.wxVideoId_8;break;case n.PointI:e=this.wxVideoId_9;break;case n.PointJ:e=this.wxVideoId_10}else if("baidu"==this.platform)switch(t){case n.PointA:e=this.bdVideoId_1;break;case n.PointB:e=this.bdVideoId_2;break;case n.PointC:e=this.bdVideoId_3;break;case n.PointD:e=this.bdVideoId_4;break;case n.PointE:e=this.bdVideoId_5;break;case n.PointF:e=this.bdVideoId_6;break;case n.PointG:e=this.bdVideoId_7;break;case n.PointH:e=this.bdVideoId_8;break;case n.PointI:e=this.bdVideoId_9;break;case n.PointJ:e=this.bdVideoId_10}else if("tt"==this.platform)switch(t){case n.PointA:e=this.ttVideoId_1;break;case n.PointB:e=this.ttVideoId_2;break;case n.PointC:e=this.ttVideoId_3;break;case n.PointD:e=this.ttVideoId_4;break;case n.PointE:e=this.ttVideoId_5;break;case n.PointF:e=this.ttVideoId_6;break;case n.PointG:e=this.ttVideoId_7;break;case n.PointH:e=this.ttVideoId_8;break;case n.PointI:e=this.ttVideoId_9;break;case n.PointJ:e=this.ttVideoId_10}return e},ShowBannerAds:function(){if(0!=this.openAds){var t=this;if(this.resizeTime=0,"wx"==this.platform){null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var e={};e.W=wx.getSystemInfoSync().windowWidth,e.H=wx.getSystemInfoSync().windowHeight;var i=0;i=this.allScreen?e.W:300,this.bannerAdCtrl=wx.createBannerAd({adUnitId:t.getBannerAdId(),style:{left:0,top:0,width:i}}),this.bannerAdCtrl.onResize(function(i){console.log("\u91cd\u7f6e\u5e7f\u544a\u5bbd\u5ea6 "+e.H+" , "+t.bannerAdCtrl.style.realHeight),t.bannerAdCtrl.style.top=e.H-t.bannerAdCtrl.style.realHeight,t.bannerAdCtrl.style.left=(e.W-t.bannerAdCtrl.style.realWidth)/2,t.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(t){console.log(t)}),console.log("\u663e\u793a\u5e7f\u544a")}else if("baidu"==this.platform){if("ios"==swan.getSystemInfoSync().platform)return;null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var n={};n.W=swan.getSystemInfoSync().windowWidth,n.H=swan.getSystemInfoSync().windowHeight,console.log("\u767e\u5ea6\u7684 bannerId = "+this.getBannerAdId()),this.bannerAdCtrl=swan.createBannerAd({adUnitId:t.getBannerAdId(),appSid:"f06bda59",style:{left:0,top:0,width:321}}),this.allScreen?t.bannerAdCtrl.style.width=n.H:t.bannerAdCtrl.style.width=300,this.bannerAdCtrl.onResize(function(e){console.log("\u91cd\u7f6e\u5e7f\u544a\u5bbd\u5ea6 "),t.bannerAdCtrl.style.top=n.H-e.height,t.bannerAdCtrl.style.left=(n.W-e.width)/2,t.bannerAdCtrl.show()}),this.bannerAdCtrl.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210"),t.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(t){console.log(t)}),console.log("\u663e\u793a\u5e7f\u544a")}else if("tt"==this.platform){null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var o={};o.W=tt.getSystemInfoSync().windowWidth,o.H=tt.getSystemInfoSync().windowHeight,console.log("\u5934\u6761 bannerId = "+this.getBannerAdId()),this.bannerAdCtrl=tt.createBannerAd({adUnitId:this.getBannerAdId(),style:{left:(o.W-200)/2,width:200,top:o.H-112.5}}),this.bannerAdCtrl.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210"),t.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(t){console.log(t)}),console.log("\u663e\u793a\u5e7f\u544a")}}},HideBannerAd:function(){console.log("\u9690\u85cfbanner"),null!=this.bannerAdCtrl&&this.bannerAdCtrl.hide(),"tt"!=this.platform&&this.DestroyBanner()},RecoverShowBanner:function(){console.log("\u91cd\u5f00banner"),null!=this.bannerAdCtrl?this.bannerAdCtrl.show():this.ShowBannerAds()},DestroyBanner:function(){null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy(),this.bannerAdCtrl=null},ShowVideoAds:function(t,e){var i=this;if(0!=this.openAds){var n=this;if(this.cb=null,this.cb=e,"wx"==this.platform){var o=wx.createRewardedVideoAd({adUnitId:n.getVideoAdId(t)});o.load().then(function(){return o.show()}).catch(function(t){return console.log(t.errMsg)}),o.onError(function(t){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+t.errMsg),i.cb(-1)}),o.onLoad(function(){console.log("\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),o.onClose(function(t){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+t.isEnded),i.cb(t.isEnded?0:1),o.offLoad(),o.offError(),o.offClose()})}else if("baidu"==this.platform){console.log("\u767e\u5ea6\u7684\u89c6\u9891\u5e7f\u544a  "+this.getVideoAdId(t));var s=swan.createRewardedVideoAd({adUnitId:n.getVideoAdId(t),appSid:"f06bda59"});s.load().then(function(){return s.show()}).catch(function(t){return console.log(t.errMsg)}),s.onError(function(t){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+t.errMsg),i.cb(-1)}),s.onLoad(function(){console.log("\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),s.onClose(function(t){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+t.isEnded),n.cb(t.isEnded?0:1),s.offLoad(),s.offError(),s.offClose()})}else if("tt"==this.platform){console.log("\u5934\u6761\u7684\u89c6\u9891\u5e7f\u544a  "+this.getVideoAdId(t));var c=tt.createRewardedVideoAd({adUnitId:n.getVideoAdId(t)});c.load().then(function(){return c.show()}).catch(function(t){return console.log(t.errMsg)}),c.onError(function(t){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+t.errMsg),i.cb(-1)}),c.onLoad(function(){console.log("\u5934\u6761\u89c6\u9891\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),c.onClose(function(t){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+t.isEnded),i.cb(t.isEnded?0:1),c.offLoad(),c.offError(),c.offClose()})}else this.cb(0)}else cc.Mgr.PlatformController.showToast("\u8be5\u529f\u80fd\u6682\u672a\u5f00\u653e,\u6b22\u8fce\u73a9\u5bb6\u5927\u5927\u5206\u4eab,\u4fbf\u53ef\u5c3d\u5feb\u5f00\u901a\u6b64\u9879\u529f\u80fd")}}});e.exports=o,cc._RF.pop()},{AdsParam:"AdsParam"}],AdsParam:[function(t,e,i){"use strict";cc._RF.push(e,"6ebac4YHD5OeI8LYh2tSbEw","AdsParam");var n=cc.Enum({PointA:1,PointB:2,PointC:3,PointD:4,PointE:5,PointF:6,PointG:7,PointH:8,PointI:9,PointJ:10});e.exports=n,cc._RF.pop()},{}],AnimFunc:[function(t,e,i){"use strict";cc._RF.push(e,"069bcLwjtNB/LYJrOEJbxa+","AnimFunc"),cc.Class({extends:cc.Component,properties:{},shake:function(){cc.log("helpBtnShake");var t=cc.rotateTo(.1,15),e=cc.rotateTo(.1,0),i=cc.rotateTo(.1,-15),n=cc.rotateTo(.12,0),o=cc.repeat(cc.sequence(t,e,i,n),3);this.node.stopAllActions(),this.node.runAction(o)}}),cc._RF.pop()},{}],AppStart:[function(t,e,i){"use strict";function n(){cc.Mgr={},cc.Mgr.OpenAds=!1,cc.Mgr.Utils=t("MUtils"),cc.Mgr.UserData=t("UserData");var e=t("AudioMgr");cc.Mgr.AudioMgr=new e,cc.Mgr.AudioMgr.init(),cc.Mgr.ShareInfos=t("ShareInfos"),cc.Mgr.ShareInfos.init(),cc.Mgr.PlatformController=t("PlatformController"),cc.Mgr.PlatformController.Init(),cc.Mgr.AdsMgr=t("AdsMgr"),cc.Mgr.AdsMgr.Init(),cc.Mgr.AudioMgr.playBGM("bgm")}cc._RF.push(e,"b507aQ8B6dK2JbmrxexXn0a","AppStart"),cc.director.initMgr=!1,cc.Class({extends:cc.Component,properties:{},onLoad:function(){0==cc.director.initMgr&&(n(),cc.director.initMgr=!0,cc.Mgr.PlatformController.ShareTopNav())},start:function(){cc.Mgr.AdsMgr.ShowBannerAds()},setLuPingState:function(){0==cc.Mgr.PlatformController.IsScreenRecord?this.screenSp.spriteFrame=this.UIAtlas.getSpriteFrame("luping_b"):this.screenSp.spriteFrame=this.UIAtlas.getSpriteFrame("luping_a")},ShareFriend:function(){var t=Math.floor(4*Math.random());cc.Mgr.ShareInfos.getShareInfos(t);cc.Mgr.PlatformController.ShareToFriend(t)},OpenRankPanel:function(){},OpenScreenRecord:function(){0!=cc.Mgr.PlatformController.IsSupportRecordScreen()?0==cc.Mgr.PlatformController.IsScreenRecord?(this.screenSp.spriteFrame=this.UIAtlas.getSpriteFrame("luping_a"),cc.Mgr.PlatformController.showToast("\u5f00\u59cb\u5f55\u5c4f"),cc.Mgr.PlatformController.StartRecordScreen()):(this.screenSp.spriteFrame=this.UIAtlas.getSpriteFrame("luping_b"),cc.Mgr.PlatformController.StopRecordScreen()):cc.Mgr.PlatformController.showToast("\u624b\u673a\u767e\u5ea6\u4e0d\u652f\u6301\u5f55\u5c4f\n\u8bf7\u5148\u5b8c\u6210\u5347\u7ea7")},JumpApp:function(){cc.Mgr.PlatformController.JumpToOtherApp("wxacaa8f3fc62bd8fd")}}),cc._RF.pop()},{AdsMgr:"AdsMgr",AudioMgr:"AudioMgr",MUtils:"MUtils",PlatformController:"PlatformController",ShareInfos:"ShareInfos",UserData:"UserData"}],AudioMgr:[function(t,e,i){"use strict";cc._RF.push(e,"6f6a96jWBND/6JHh/2pg51L","AudioMgr");var n=cc.Class({extends:cc.Component,properties:{bgmVolume:.3,sfxVolume:.5,bgmAudioID:-1,sfxAudioID:-1,musicState:1,voiceState:1},init:function(){var t;cc.Mgr.loadSound=!1,null!=(t=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(t)),null!=(t=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(t)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(t){return cc.url.raw("resources/sound/"+t+".mp3")},playBGM:function(t){var e=this.getUrl(t);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(e,!0,this.bgmVolume)},playSFX:function(t){if(0!=this.voiceState){var e=this.getUrl(t);cc.audioEngine.play(e,!1,this.sfxVolume)}},setSFXVolume:function(t){this.sfxVolume!=t&&(cc.sys.localStorage.setItem("sfxVolume",t),this.sfxVolume=t)},setBGMVolume:function(t,e){this.bgmAudioID>=0&&(t>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=t||e)&&(cc.sys.localStorage.setItem("bgmVolume",t),this.bgmVolume=t,cc.audioEngine.setVolume(this.bgmAudioID,t))},pauseAll:function(){this.musicState=0,this.voiceState=0,this.bgmVolume=0,this.sfxVolume=0,cc.audioEngine.pauseAll()},resumeAll:function(){this.musicState=1,this.voiceState=1,this.bgmVolume=1,this.sfxVolume=.5,cc.audioEngine.resumeAll()},pauseMusic:function(){this.musicState=0,this.bgmVolume=0,this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},resumeMusic:function(){this.musicState=1,this.bgmVolume=.3,this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},pauseVoice:function(){this.voiceState=0,this.sfxVolume=0},resumeVoice:function(){this.voiceState=1,this.sfxVolume=.8},getMusicState:function(){return this.musicState},getVoiceState:function(){return this.voiceState}});e.exports=n,cc._RF.pop()},{}],DataAnalytics:[function(t,e,i){"use strict";cc._RF.push(e,"d49dfgmydFBgImM7WOYFF/X","DataAnalytics");var n={};n.init=function(){},n.login=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3]},n.logout=function(t){},n.createAPart=function(t){},n.payBegin=function(t){},n.paySuccess=function(t){},n.levelBegin=function(t){},n.levelResult=function(t,e){},n.gameHideAndShow=function(t){},n.doEvent=function(t){},n.dealItem=function(t,e){},e.exports=n,cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"cfe104AL1BA4ZYID8PM1eVV","Enemy");t("./HexCell");var n=t("GUtils");cc.Class({extends:cc.Component,properties:{emeny:{default:null,type:cc.Node},_axialCoordinate:{default:cc.v2(0,0),visible:!1},axialCoordinate:{get:function(){return this._axialCoordinate},set:function(t){this._axialCoordinate=cc.v2(t.x,t.y)}}},onEnable:function(){this.schedule(this.check,.1)},onDisable:function(){this.unschedule(this.check)},onLoad:function(){},check:function(){if(n.pDistance(gameView.myRole.node.getPosition(),this.node.getPosition())<=40){this.unschedule(this.check);var t={};t.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),t.reason="\u88ab\u602a\u517d\u649e\u6b7b",gameView.die()}},start:function(){},moveTo:function(){}}),cc._RF.pop()},{"./HexCell":"HexCell",GUtils:"GUtils"}],GUtils:[function(t,e,i){"use strict";cc._RF.push(e,"040b7NjNk9G37cPM+D2Go4e","GUtils");var n=cc.Class({extends:cc.Component,statics:{pCompMult:function(t,e){return cc.v2(t.x*e.x,t.y*e.y)},pAdd:function(t,e){return cc.v2(t.x+e.x,t.y+e.y)},pDistance:function(t,e){var i=this.pSub(t,e);return this.pLength(i)},pLength:function(t){return Math.sqrt(this.pLengthSQ(t))},pLengthSQ:function(t){return this.pDot(t,t)},pDot:function(t,e){return t.x*e.x+t.y*e.y},pSub:function(t,e){return cc.v2(t.x-e.x,t.y-e.y)},hexToColor:function(t){t=t.replace(/^#?/,"0x");var e=parseInt(t),i=e>>16,n=(65280&e)>>8,o=255&e;return cc.color(i,n,o)}}});e.exports=n,cc._RF.pop()},{}],GameApplication:[function(t,e,i){"use strict";var n;function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"f08152UaoRPB64U7d0m5V+q","GameApplication");t("../GameLogic/Player");var s=t("../GameLogic/SoundManager");t("../UI/MainView"),t("../UI/LevelView");cc.Class((o(n={extends:cc.Component,properties:{soundManager:{default:null,type:s},missions:{default:[]},missionsCB:{default:[]},conf:{default:{}},confCB:{default:[]},_playTimes:{default:0,type:cc.Integer},playTimes:{get:function(){return this._playTimes},set:function(t){this._playTimes=t,this._playTimes%playTimesAD==0&&1!=this._playTimes&&console.log("\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a")}}},start:function(){},getConf:function(t,e){null!=this.conf[t]?e&&(cc.log("\u4ececache\u8bfb\u53d6\uff1a"+t),e(this.conf[t])):(cc.log("\u4ece\u786c\u76d8\u8bfb\u53d6\uff1a"+t),cc.loader.loadRes(t,function(i,n){this.conf[t]=n.json,null!=e&&e(n.json)}.bind(this)))},onLoad:function(){window.gameApplication=this,window.gameFirst=!0,cc.game.addPersistRootNode(this.node),window.gameTimes=1;var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!1,t.enabledDrawBoundingBox=!1,cc.loader.loadRes("conf/missions",function(t,e){this.missions=e.json,this.invokeMissionCB()}.bind(this)),this.openMainView(),cc.Mgr.UserData.getScore("playingMid",function(t){0!=t&&void 0!=t&&null!=t||(t=1),cc.Mgr.UserData.getScore("playingLid",function(e){0!=e&&void 0!=e&&null!=e||(e=1),window.bid=1,window.mid=t,window.lid=e}.bind(this))}.bind(this)),cc.game.on(cc.game.EVENT_HIDE,function(){cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){cc.audioEngine.resumeAll()})},onDestroy:function(){}},"onDestroy",function(){cc.director.getCollisionManager().enabled=!1}),o(n,"getMissions",function(t){null!=this.missions&&this.missions.length>0?t(this.missions):this.missionsCB.push(t)}),o(n,"invokeMissionCB",function(){var t=this;this.missionsCB.length>0&&this.missionsCB.forEach(function(e){null!=e&&e(t.missions)})}),o(n,"setNodeActive",function(t,e){cc.find("Canvas/"+t).active=e}),o(n,"openMainView",function(){this.setNodeActive("levelView",!1),this.setNodeActive("mainView",!0)}),o(n,"openLevelView",function(t,e){this.setNodeActive("levelView",!0),this.setNodeActive("mainView",!1),cc.find("Canvas/levelView").getComponent("LevelView").init(t,e)}),o(n,"onQuitBtnClick",function(){}),o(n,"popClick",function(t,e){}),n)),cc._RF.pop()},{"../GameLogic/Player":"Player","../GameLogic/SoundManager":"SoundManager","../UI/LevelView":"LevelView","../UI/MainView":"MainView"}],GameView:[function(t,e,i){"use strict";cc._RF.push(e,"3a5f4xh9CRAI6wc4y+upnjw","GameView");var n,o=t("../../Utils/Utils"),s=t("./HexCell"),c=t("./Role"),a=t("./Enemy"),l=t("./Tower"),r=t("GUtils"),d=100;cc.Class({extends:cc.Component,properties:{invAgain:{default:null,type:cc.Node},mission:{default:null},gm:{default:null,type:cc.Node},title:{default:null,type:cc.Label},star1:{default:null,type:cc.Node},star2:{default:null,type:cc.Node},star3:{default:null,type:cc.Node},moves:{default:null,type:cc.RichText},best:{default:null,type:cc.RichText},tileBox:{default:null,type:cc.Node},iceBox:{default:null,type:cc.Node},maxValidMoves:{default:0,type:cc.Integer},movesLeft:{default:0,type:cc.Integer},moved:{default:0,type:cc.Integer},levelDimensions:{default:cc.v2(0,0),visible:!1},gridOffset:{default:cc.v2(0,0),visible:!1},hexCellPrefab:{default:null,type:cc.Node},icePrefab:{default:null,type:cc.Node},rolePrefab:{default:null,type:cc.Node},enemyPrefab:{default:null,type:cc.Node},enemyPrefab1:{default:null,type:cc.Node},enemyPrefab2:{default:null,type:cc.Node},endPrefab:{default:null,type:cc.Node},allCells:{default:[],type:[s]},allTowers:{default:[],type:[l]},myRole:{default:null,type:c},enemys:{default:[]},helplines:{default:[]},endObj:{default:null,type:c},selectedLines:{default:[]},mouseIsDown:!1,userInputEnabled:!1,gameOver:!1,prevTilePosition:{default:cc.v2(-1e3,-1e3),visible:!1},mouseOffsetPos:{default:cc.v2(0,0),visible:!1},touchPos:{default:cc.v2(0,0),visible:!1},movePlus:{get:function(){return[cc.v2(0,1),cc.v2(-1,0),cc.v2(0,-1),cc.v2(1,0)]}},helpPath:{default:[]},helpShaked:{default:[]},helpBtn:{default:null,type:cc.Node},helpCountLabel:{default:null,type:cc.Label},_helpCount:{default:0,type:cc.Integer},helpCount:{get:function(){return this._helpCount},set:function(t){this._helpCount=t,this.helpCountLabel.string=t.toString();var e={};e.my_help=this._helpCount>0?this._helpCount:-1,cc.Mgr.UserData.setScore(e,null),this.helpBtn.getChildByName("icon").active=!0,this.helpBtn.getChildByName("num").active=!0}},timeHelpBtn:{default:null,type:cc.Node},timeHelpCountLabel:{default:null,type:cc.Label},_timeHelpCount:{default:0,type:cc.Integer},timeHelpCount:{get:function(){return this._timeHelpCount},set:function(t){this._timeHelpCount=t,this.timeHelpCountLabel.string=t.toString();var e={};e.timeHelp=this._timeHelpCount,cc.Mgr.UserData.setScore(e,null)}},replayCountLabel:{default:null,type:cc.Label},_replayCount:{default:0,type:cc.Integer},replayTimeCount:{get:function(){return this._replayCount},set:function(t){this.replayCount=t,this.replayCountLabel.string=t.toString();var e={};e.replayCount=this._timeHelpCount,cc.Mgr.UserData.setScore(e,null)}},watchVideoTip:{default:null,type:cc.Node},shareFriendTip:{default:null,type:cc.Node},preBtn:{default:null,type:cc.Node},nextBtn:{default:null,type:cc.Node},endView:{default:null,type:cc.Node},endView_nextBtn:{default:null,type:cc.Node},endView_backBtn:{default:null,type:cc.Node},endView_Stars:{default:null,type:cc.Node},endView_title:{default:null,type:cc.Label},endView_text:{default:null,type:cc.RichText},gameApplication:{default:null,type:Object},isMoving:!1,lastDirection:{default:-1,type:cc.Integer},turnBackCount:{default:0,type:cc.Integer},timesNode:{default:null,type:cc.Node},timesVal:{default:null,type:cc.Label},timesLeft:{default:0,type:cc.Integer},timeOutflowCB:{default:null},timeIsUpNode:{default:null,type:cc.Node},timeIsUpInvNode:{default:null,type:cc.Node},timeIsUpEndNode:{default:null,type:cc.Node},gotMoreTime:!1,goShareView:{default:null,type:cc.Node},musicBtn:{default:null,type:cc.Sprite},menuView:{default:null,type:cc.Node},isMemu:{default:!1,visible:!1},musicOn:{default:null,type:cc.SpriteFrame},musicOff:{default:null,type:cc.SpriteFrame},guideView:{default:null,type:cc.Node}},checkMusic:function(t,e){"turn"==e&&(gameApplication.soundManager.isOpen?gameApplication.soundManager.setIsOpen(!1):gameApplication.soundManager.setIsOpen(!0)),gameApplication.soundManager.isOpen?this.musicBtn.spriteFrame=this.musicOn:this.musicBtn.spriteFrame=this.musicOff},menuShow:function(t,e){"1"==e?(this.menuView.active=!0,this.isMemu=!0):"2"==e&&(this.menuView.active=!1,this.isMemu=!1)},onLoad:function(){window.gameView=this},plusMoreHelp:function(){this.helpCount+=plusHelp},clearHelp:function(){this.helpCount=0},onEnable:function(){cc.Mgr.UserData.getScore("timeHelp",function(t){this.timeHelpCount=t}.bind(this)),cc.Mgr.UserData.getScore("replayCount",function(t){this.replayTimeCount=t}.bind(this)),cc.Mgr.UserData.getScore("isFirst",function(t){0==t||null==t||void 0==t?cc.Mgr.UserData.setScore({isFirst:1}):window.gameFirst&&(this.goShareView.active=!0,window.gameFirst=!1)}.bind(this))},clearData:function(){},start:function(){var t=cc.find("GameApplication");null!=t&&(this.gameApplication=t.getComponent("GameApplication")),void 0!==this.gameApplication&&null!=this.gameApplication?(this.scheduleOnce(function(){this.init()},.2),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.onMouseDown(t)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.onMouseMove(t)},this)):this.onBackBtnClicked()},clear:function(){this.unschedule(this.timeOutflow),this.clearTile(),this.allCells.splice(0,this.allCells.length),this.allTowers.splice(0,this.allTowers.length),this.selectedLines.splice(0,this.selectedLines.length),this.enemys.splice(0,this.enemys.length),this.helplines.splice(0,this.helplines.length),this.myRole=null,this.helpShaked.splice(0,this.helpShaked.length),null!=this.helpPath&&this.helpPath.length>0&&this.helpPath.splice(0,this.helpPath.length),d=100,this.mouseIsDown=!1,this.gameOver=!1,this.movesLeft=0,this.moved=0,this.turnBackCount=0,this.lastDirection=-1,this.isMoving=!1,this.currentLineColor=0,this.oldCurrentLineColor=0},clearTile:function(){if(this.tileBox.childrenCount>0)for(var t=0;t<this.tileBox.childrenCount;t++){null!=(e=this.tileBox.children[t])&&(e.active=!1,e.destroy())}if(this.iceBox.childrenCount>0)for(t=0;t<this.iceBox.childrenCount;t++){var e;null!=(e=this.iceBox.children[t])&&(e.active=!1,e.destroy())}},init:function(){var t=this;if(this.selectedLines=[],this.enemys=[],this.helplines=[],this.helpPath=[],this.myRole=null,this.isMoving=!1,this.endView.active=!1,this.timeIsUpNode.active=!1,this.gotMoreTime=!1,null!=bid&&bid>0&&null!=mid&&mid>0&&null!=lid&&lid>0){var e="conf/level_detail/b_"+bid+"/"+mid+"/"+lid;this.gameApplication.getConf(e,function(t){this.mission=t,cc.log("this.mission:",this.mission),this.initGame()}.bind(this));var i=[];lid>1&&i.push(lid-1),lid<100&&i.push(lid+1),i.forEach(function(e){var i="conf/level_detail/b_"+bid+"/"+mid+"/"+e;t.gameApplication.getConf(i,null)}),this.initHelpBtn()}else this.onBackBtnClicked()},initHelpBtn:function(){var t=this;cc.Mgr.UserData.getScore("my_help",function(e){0==e?(t.helpCount=5,t.guideView.active=!0):t.helpCount=-1==e?0:e}.bind(this))},initGame:function(){this.timeIsUpNode.active=!1,this.timeIsUpInvNode.active=!1,this.timeIsUpEndNode.active=!1,this.gotMoreTime=!1,this.endView.active=!1,this.clear();var t=this.mission.lines.length;this.maxValidMoves=t,this.movesLeft=t,this.moved=0,this.turnBackCount=0,this.helpShaked.splice(0,this.helpShaked.length),this.lastDirection=-1;var e="conf/level_list/level_"+bid+"_"+mid;this.gameApplication.getConf(e,function(t){console.log("================================");var e=t;this.title.string=e.title+" "+lid}.bind(this)),this.moves.string="0/"+t,cc.Mgr.UserData.getScore(bid+"_"+mid+"_"+lid+"_moves",function(t){this.best.string=t<=0?"-":t.toString()}.bind(this));var i=cc.v2(this.mission.x,this.mission.y);this.createGrid(i,this.mission.walls,this.mission.ice,this.mission.tower,function(){this.scheduleOnce(function(){mid,lid>99?lid:(lid,lid),this.isMemu=!0,window.gameTimes=window.gameTimes+1,10==window.gameTimes&&(window.gameTimes=0,this.goShareView.active=!0);var t={};if(t.playingMid=mid,t.playingLid=lid,cc.Mgr.UserData.setScore(t,null),this.createRole(this.mission.start,this.mission.end),this.mission.enemy.length>0&&this.createEnemy(this.mission.enemy),this.initHelpPath(o.cloneObj(this.mission.lines)),6==mid){this.timeHelpBtn.active=!0;var e=12;e=lid<=5?12:lid<=20?15:lid<=45?20:lid<=75?25:30,this.timesLeft=e,this.timesNode.active=!0,this.timesVal.string=e.toString();var i=e+1e4;this.schedule(this.timeOutflow,1,i,1)}else this.timesLeft=-1,this.timeHelpBtn.active=!1;this.gameApplication.playTimes++}.bind(this),.5)}.bind(this)),this.updateUI()},initHelpPath:function(t){if(2!=mid&&4!=mid&&6!=mid)this.helpPath=t;else{cc.log("_______________"),this.helpPath=[],this.helpPath.push(this.myRole.axialCoordinate);for(var e=0;t.length>0;){for(var i=0;i<t.length;i++){var n=t[i];if(null!=n){n=this.checkXY(n,0,0);for(var o=this.checkMovePos(n),s=0;s<o.length;s++){var c=this.helpPath[this.helpPath.length-1];if(o[s].x==c.x&&o[s].y==c.y){this.helpPath.push(t[i]),t.splice(i,1);break}}}}++e>=500&&(t.splice(0,t.length),t=[])}}},getMoreTimeBtn:function(){this.timeHelpCount>0?(this.timesLeft=this.timesLeft+5,this.timeHelpCount=this.timeHelpCount-1):this.timeIsUpNode.active=!0},timeOutflow:function(){var t=this;this.timesLeft>0&&(this.isMemu||this.timeIsUpNode.active||this.watchVideoTip.active||this.timesLeft--,this.timesLeft<10&&this.timesLeft>1&&this.schedule(function(){t.gameApplication.soundManager.playSound("clock")},.5,2,0),this.timesNode.active=!0,this.timesVal.string=this.timesLeft.toString(),this.timesLeft<10?this.timesVal.node.color=r.hexToColor("#ef3a40"):this.timesVal.node.color=r.hexToColor("#ffffff"),0==this.timesLeft&&(this.gameOver=!0,this.timeIsUpEndNode.active=!0,t.unschedule(this.timeOutflow),this.stopAllAction()))},getMoreTime:function(t){t.target.getComponent(cc.Button).interactable=!1},getMoreTimeInv:function(t){},restarGame:function(t){this.myRole.node.stopAllActions(),this.unschedule(this.timeOutflow),this.timesVal.node.color=r.hexToColor("#ffffff"),this.timeIsUpNode.active=!1,this.gotMoreTime=!1,this.endView.active=!1,this.selectedLines.splice(0,this.selectedLines.length),this.enemys.splice(0,this.enemys.length),this.helplines.splice(0,this.helplines.length),this.helpPath.splice(0,this.helpPath.length),this.helpShaked.splice(0,this.helpShaked.length),this.isMoving=!1,this.movesLeft=this.maxValidMoves,this.moved=0,this.turnBackCount=0,this.lastDirection=-1,null!=t&&t>0?this.scheduleOnce(function(){this.gameOver=!1,this.myRole=null,this.initGame()},t):(this.gameOver=!1,this.myRole=null,this.initGame())},nextGame:function(){lid<100?(lid++,this.init()):this.onBackBtnClicked()},prevGame:function(){lid>1?(lid--,this.init()):this.onBackBtnClicked()},help:function(){if(!(this.gameOver||null==this.myRole||this.helpPath.length<=0)){var t=null,e=0;if(this.selectedLines.length>0)for(var i=this.helpPath.length-1;i>=0;i--)for(var n=this.checkXY(this.helpPath[i],0,0),o=cc.v2(n.x,n.y),s=this.selectedLines.length-1;s>=0;s--){var c=this.selectedLines[s];if(null==t&&o.equals(c)){t=o,e=i;break}}null==t&&(t=this.checkXY(this.helpPath[0],0,0),e=0),this.showHelpLine(t,e)}},showHelpLine:function(t,e){if(!(this.helpPath.length<=0)){var i=cc.v2(t.x,t.y);this.helplines.length>0&&(i=this.helplines[this.helplines.length-1]);for(var n=0;n<this.helpPath.length;n++){var s=this.helpPath[n];if(i.equals(s)){i=cc.v2(s.x,s.y),e=n;break}}e<this.helpPath.length-1&&this.helpCount--,this.helplines.length<=0&&(!i.equals(this.myRole.axialCoordinate)&&o.isNeighbors(i,this.myRole.axialCoordinate)&&this.helplines.push(cc.v2(this.myRole.axialCoordinate.x,this.myRole.axialCoordinate.y)),this.helplines.push(cc.v2(i.x,i.y)));for(var c=!0;++e<this.helpPath.length&&c;){t=this.checkXY(this.helpPath[e],0,0),this.helplines.push(cc.v2(t.x,t.y));var a=this.getCellByCoordinate(t);this.checkCanMoveCount(this.checkMove(t))>2&&this.helplines.length>1&&this.helplines.length>this.selectedLines.length&&!a.isIce&&(c=!1)}if(this.helplines.length>1)for(n=0;n<this.helplines.length;n++){var l=this.helplines[n];a=this.getCellByCoordinate(l);0==n?a.showStartHelp(this.helplines[n+1]):n==this.helplines.length-1?a.showEndHelp(this.helplines[this.helplines.length-2]):a.showHelp(this.helplines[n-1],this.helplines[n+1])}var r={itemID:"\u63d0\u793a",itemType:"\u9053\u5177"};r.itemCount=plusHelp,r.reason="\u4f7f\u7528"}},update:function(t){if(!this.gameOver){if(this.enemys.length>0)for(var e=0;e<this.enemys.length;e++){var i=this.enemys[e];this.roundMove(i)}if(this.allTowers.length>0)for(e=0;e<this.allTowers.length;e++){var n=this.allTowers[e];this.towerShoot(n)}}},towerShoot:function(t){if(!t.isShooting){t.isShooting=!0,t.bubble.active=!0;var e=this.checkMove(t.bubbleAxialCoordinate),i=-1;if(-1!=t.direction&&e[t.direction]&&(i=t.direction),-1==i){var n=cc.callFunc(function(){t.bubble.getComponent("NormalAnimation").play()},this),o=cc.delayTime(1),s=cc.callFunc(function(){t.bubbleAxialCoordinate=t.axialCoordinate,t.bubble.position=r.pCompMult(t.node.getPosition(),cc.v2(.5,.5)),t.bubble.opacity=0},this),c=cc.delayTime(t.delay),a=cc.callFunc(function(){t.isShooting=!1,t.bubble.opacity=255},this),l=cc.sequence(n,o,s,c,a);t.bubble.runAction(l)}else{var d,h=t.bubbleAxialCoordinate.add(this.movePlus[i]),u=this.getCellByCoordinate(h),f=this.tileBox.convertToWorldSpaceAR(u.node.getPosition()),p=t.node.convertToNodeSpaceAR(f);d=1==i?cc.v2(-1*p.y,-1*p.x):2==i?cc.v2(-1*p.x,-1*p.y):3==i?cc.v2(p.y,p.x):cc.v2(p.x,p.y);var g=cc.moveTo(.3*t.s,d.y,d.x);n=cc.callFunc(function(){t.bubbleAxialCoordinate=h,t.isShooting=!1},this),l=cc.sequence(g,n);t.bubble.runAction(l)}}},roundMove:function(t){if(!t.isMoving){t.isMoving=!0;var e=this.checkMove(t.axialCoordinate),i=-1;if(-1!=t.direction&&e[t.direction]&&1==this.checkMoveDirectionCount(e,t.direction)||-1!=t.direction&&e[t.direction]&&Math.random()>.6)i=t.direction;else for(;-1==i;){var n=o.GetRandomNum(0,3);e[n]&&(i=n)}t.direction=i;var s=t.axialCoordinate.add(this.movePlus[i]),c=this.getCellByCoordinate(s).node.getPosition(),a=cc.moveTo(1,c.x,c.y),l=cc.callFunc(function(){t.axialCoordinate=s,t.isMoving=!1},this),r=cc.sequence(a,l);t.node.runAction(r)}},onMouseDown:function(t){this.gameOver||null==this.myRole||(this.mouseIsDown=!0,this.touchPos=this.tileBox.convertToNodeSpaceAR(t.getLocation()))},onMouseMove:function(t){if(!this.gameOver&&null!=this.myRole&&this.mouseIsDown){var e=this.tileBox.convertToNodeSpaceAR(t.getLocation()),i=e.x-this.touchPos.x,n=e.y-this.touchPos.y;if(Math.abs(i)<30&&Math.abs(n)<30)return;Math.abs(i)>Math.abs(n)?i<0?this.doAction(1,!0):this.doAction(3,!0):n>0?this.doAction(0,!0):this.doAction(2,!0),this.mouseIsDown=!1}},getCellByCoordinate:function(t){for(var e=0;e<this.allCells.length;e++){var i=this.allCells[e];if(i.axialCoordinate.equals(t))return i}return null},stopAllAction:function(){cc.log("stopAllAction")},die:function(){this.unschedule(this.timeOutflow),this.gameOver=!0,this.myRole.playDie(),this.gameApplication.soundManager.playSound("error"),this.restarGame(2.1)},showGameOver:function(){this.guideView.active=!1;var t={};t.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),t.reason="\u8fc7\u5173",this.gameApplication.soundManager.playSound("gamewin"),this.unschedule(this.timeOutflow),this.timeIsUpInvNode.active=!1,this.timeIsUpNode.active=!1,this.watchVideoTip.active=!1;var e=this;this.gameOver=!0,this.endView.active=!0,this.stopAllAction();var i=0;i=this.turnBackCount<=0?3:this.turnBackCount<=6?2:1,this.endView_title.string=3==i?"\u592a\u68d2\u5566":2==i?"\u5389\u5bb3":"\u4e00\u822c",this.endView_text.string="\u627e\u5230\u5973\u670b\u53cb\u53ea\u7528\u4e86 "+this.moved+" \u6b65",cc.Mgr.UserData.getScore(bid+"_"+mid+"_"+lid,function(t){if(t<1){var e={};e[bid+"_"+mid+"_"+lid]=1,cc.Mgr.UserData.setScore(e,null);cc.Mgr.UserData.getScore("all",function(t){t+=1,cc.Mgr.UserData.setScore({all:t},null)}.bind(this)),cc.Mgr.UserData.getScore(bid+"_"+mid,function(t){t+=1;var e={};e[bid+"_"+mid]=t,cc.Mgr.UserData.setScore(e,null)}.bind(this))}}.bind(this)),cc.Mgr.UserData.getScore(bid+"_"+mid+"_"+lid+"_moves",function(t){if(e.moved<t||t<=0){var i={};i[bid+"_"+mid+"_"+lid+"_moves"]=e.moved,cc.Mgr.UserData.setScore(i,null)}}.bind(this))},checkWin:function(){var t=this.myRole.axialCoordinate.equals(this.endObj.axialCoordinate);return t&&this.showGameOver(),t},moveEnd:function(){if(this.isMoving=!1,!this.checkWin()){var t=this.checkMove();this.gameApplication.soundManager.playSound("done"),this.getCellByCoordinate(this.myRole.axialCoordinate).isIce&&t[this.lastDirection]?this.doAction(this.lastDirection,!0):(this.moved++,this.turnBackCount>0&&this.turnBackCount%2==0&&!o.inArray(this.turnBackCount,this.helpShaked)&&(this.helpBtnShake(),this.helpShaked.push(this.turnBackCount)),this.myRole.setArrow(t[0],t[1],t[2],t[3]))}this.updateUI()},addSelectedLines:function(t){var e=this;if(this.selectedLines.length>=2&&t.equals(this.selectedLines[this.selectedLines.length-2])){var i=this.selectedLines.pop();this.getCellByCoordinate(i).hideLine()}else this.selectedLines.push(cc.v2(t.x,t.y));this.selectedLines.length>1&&this.scheduleOnce(function(){for(var t=0;t<=e.selectedLines.length-1;t++){var i=e.selectedLines[t];(n=e.getCellByCoordinate(i)).hideLine()}for(t=0;t<=e.selectedLines.length-1;t++){i=e.selectedLines[t];var n=e.getCellByCoordinate(i);0==t?n.showStartLine(e.selectedLines[t+1]):t==e.selectedLines.length-1?n.showEndLine(e.selectedLines[e.selectedLines.length-2]):n.showLine(e.selectedLines[t-1],e.selectedLines[t+1])}},.08)},doAction:function(t,e){if(this.isMemu=!1,!this.isMoving&&!this.gameOver){this.isMoving=!0,this.myRole.hideArrow();var i=this,n=this.checkMove();if(!e&&this.checkMoveDirectionCount(n,t)>1)this.moveEnd();else if(n[t]){var o=this.myRole.axialCoordinate.add(this.movePlus[t]);if(null!=(r=this.getCellByCoordinate(o))){(0==t?2==this.lastDirection:3==t?1==this.lastDirection:1==t?3==this.lastDirection:0==this.lastDirection)&&this.turnBackCount++,this.lastDirection=t;var s=r.node.getPosition(),c=cc.moveTo(.12,s.x,s.y),a=cc.callFunc(function(){i.myRole.axialCoordinate=o,i.isMoving=!1,i.checkWin()||i.doAction(t,!1)},this);this.addSelectedLines(o);var l=cc.sequence(c,a);i.myRole.node.runAction(l)}}else{var r;if(this.gameApplication.soundManager.playSound("done"),1==this.checkMoveDirectionCount(n,t)){if(t=this.getkMoveDirection(n,t),!this.checkWin())(r=this.getCellByCoordinate(this.myRole.axialCoordinate)).isIce?this.moveEnd():(this.isMoving=!1,i.doAction(t,!0))}else this.moveEnd()}}},getkMoveDirection:function(t,e){var i;i=0==e?2:3==e?1:1==e?3:0;for(var n=0;n<t.length;n++){if(t[n]&&n!=i)return n}},checkCanMoveCount:function(t){for(var e=0,i=0;i<t.length;i++){t[i]&&e++}return e},checkMoveDirectionCount:function(t,e){var i;i=0==e?2:3==e?1:1==e?3:0;for(var n=0,o=0;o<t.length;o++){t[o]&&o!=i&&n++}return n},checkMove:function(t){null==t&&(t=this.myRole.axialCoordinate);var e=o.getNeighborsOBJ(t),i=!0,n=!0,s=!0,c=!0,a=this.getCellByCoordinate(t);if(null!=a&&(a.leftActive&&(n=!1),a.rightActive&&(c=!1),a.topActive&&(i=!1),a.bottomActive&&(s=!1)),i){var l=this.getCellByCoordinate(e.t);null!=l&&l.bottomActive&&(i=!1)}if(s){var r=this.getCellByCoordinate(e.b);null!=r&&r.topActive&&(s=!1)}if(n){var d=this.getCellByCoordinate(e.l);null!=d&&d.rightActive&&(n=!1)}if(c){var h=this.getCellByCoordinate(e.r);null!=h&&h.leftActive&&(c=!1)}return[i,n,s,c]},checkMovePos:function(t){null==t&&(t=this.myRole.axialCoordinate);var e=o.getNeighborsOBJ(t),i=e.t,n=e.l,s=e.b,c=e.r,a=this.getCellByCoordinate(t);if(null!=a&&(a.leftActive&&(n=cc.v2(-1,-1)),a.rightActive&&(c=cc.v2(-1,-1)),a.topActive&&(i=cc.v2(-1,-1)),a.bottomActive&&(s=cc.v2(-1,-1))),i){var l=this.getCellByCoordinate(e.t);null!=l&&l.bottomActive&&(i=cc.v2(-1,-1))}if(s){var r=this.getCellByCoordinate(e.b);null!=r&&r.topActive&&(s=cc.v2(-1,-1))}if(n){var d=this.getCellByCoordinate(e.l);null!=d&&d.rightActive&&(n=cc.v2(-1,-1))}if(c){var h=this.getCellByCoordinate(e.r);null!=h&&h.leftActive&&(c=cc.v2(-1,-1))}return[i,n,s,c]},createEnemy:function(t){var e=d/100;if(!(t.length<=0))for(var i=0;i<t.length;i++){var n,o=t[i],s=this.getCellByCoordinate(cc.v2(o.x,o.y)),c=Math.random();(n=c<.33?cc.instantiate(this.enemyPrefab):c<.66?cc.instantiate(this.enemyPrefab1):cc.instantiate(this.enemyPrefab2)).parent=this.tileBox,n.setScale(e),n.setPosition(s.node.getPosition()),n.active=!0,(o=n.getComponent(a)).axialCoordinate=s.axialCoordinate,this.enemys.push(o)}},createRole:function(t,e){var i=d/100;t=this.checkXY(t,0,0),e=this.checkXY(e,0,0);var n=this.getCellByCoordinate(cc.v2(t.x,t.y)),o=this.getCellByCoordinate(cc.v2(e.x,e.y)),s=cc.instantiate(this.rolePrefab);s.parent=this.tileBox,s.setScale(i),s.setPosition(n.node.getPosition()),s.active=!0;var a=s.getComponent(c);this.myRole=a,this.myRole.init(),this.myRole.axialCoordinate=n.axialCoordinate,this.selectedLines.push(cc.v2(n.axialCoordinate.x,n.axialCoordinate.y));var l=this.checkMove();this.myRole.setArrow(l[0],l[1],l[2],l[3]);var r=cc.instantiate(this.endPrefab);r.parent=this.tileBox,r.setScale(i),r.setPosition(o.node.getPosition()),r.active=!0,this.endNode=r;var h=r.getComponent(c);this.endObj=h,this.endObj.axialCoordinate=o.axialCoordinate,this.myRole.gameView=this,this.myRole.setDark(4==mid)},collisionCallback:function(){this.die()},createGrid:function(t,e,i,c,a){this.gridOffset.x=0,this.gridOffset.y=0;Math.max(t.x,t.y);var l=cc.winSize,r=this.tileBox.getContentSize(),h=r.height,u=l.width;if(h<(d=(u-(lineWidth-lineWidth*t.x))/t.x)*t.y){var f=((u=r.height)-(lineWidth-lineWidth*t.y))/t.y;f<d&&(d=f,this.gridOffset.x=.5*(l.width-t.x*d+t.x*lineWidth))}var p,g=n=d;this.levelDimensions=t;var m=cc.v2(0,0),v=cc.v2(0,0),y=.5*(r.height-this.levelDimensions.y*d+this.levelDimensions.y*lineWidth);this.gridOffset.y=-1*r.height+y;for(var b=0;b<this.levelDimensions.x;b++)for(var C=0;C<this.levelDimensions.y;C++){m.x=b,m.y=C,(v=o.axialToScreen(m,n)).x+=this.gridOffset.x,v.y+=this.gridOffset.y,(p=cc.instantiate(this.hexCellPrefab)).parent=this.tileBox,p.setPosition(v.add(cc.v2(0,1e3))),p.setContentSize(cc.size(g,g)),p.active=!0;var w=this;C%2==0?p.runAction(cc.sequence(cc.moveTo(.2+.05*m.y,v.x,v.y),cc.callFunc(function(){w.gameApplication.soundManager.playSound("uplock")}))):p.runAction(cc.moveTo(.2+.05*m.y,v.x,v.y)),p.name="grid"+b.toString()+"_"+C.toString(),p.zIndex=0,(A=p.getComponent(s)).scaleChild(g/100,g/100),A.axialCoordinate=m,this.allCells.push(A)}if(!(null==e||e.length<=0)){for(w=this,b=0;b<e.length;b++){var x,S,A,_=e[b],I=w.checkXY(_.w1,0,0),M=w.checkXY(_.d1,0,0);I.x<M.x||I.y>M.y?(x=I,S=M):(x=M,S=I),(A=this.getCellByCoordinate(cc.v2(x.x,x.y-1)))?x.x==S.x?A.setLeft(!0):A.setTop(!0):(A=this.getCellByCoordinate(cc.v2(x.x,x.y)))?x.x==S.x?A.setRight(!0):A.setBottom(!0):(A=this.getCellByCoordinate(cc.v2(x.x-1,x.y-1)))&&(x.x==S.x?A.setRight(!0):A.setBottom(!0))}this.scheduleOnce(function(){if(null!=i&&i.length>0)for(var t=0;t<i.length;t++){var e=i[t];if(null!=(h=this.getCellByCoordinate(cc.v2(e.x,e.y)))){h.setIce(!0);var n=cc.instantiate(this.icePrefab);n.parent=this.iceBox,n.setPosition(h.node.getPosition()),n.setContentSize(h.node.getContentSize()),n.active=!0,n.setScale(.3,.3),n.runAction(cc.scaleTo(.35,1,1))}}if(null!=c&&c.length>0)for(t=0;t<c.length;t++){var o,s,l=c[t],r=w.checkXY(l.w1,0,0),d=w.checkXY(l.d1,0,0),h=null;r.x<d.x||r.y>d.y?(o=r,s=d):(o=d,s=r),1==l.direction?null==(h=this.getCellByCoordinate(cc.v2(Math.max(o.x,s.x)-1,s.y)))&&(h=this.getCellByCoordinate(cc.v2(Math.max(o.x,s.x),s.y))):3==l.direction?null==(h=this.getCellByCoordinate(cc.v2(Math.max(o.x,s.x),s.y)))&&(h=this.getCellByCoordinate(cc.v2(Math.max(o.x,s.x)-1,s.y))):0==l.direction?null==(h=this.getCellByCoordinate(cc.v2(o.x,Math.min(o.y,s.y))))&&(h=this.getCellByCoordinate(cc.v2(o.x,Math.max(o.y,s.y)))):2==l.direction&&null==(h=this.getCellByCoordinate(cc.v2(o.x,Math.max(o.y,s.y)-1)))&&(h=this.getCellByCoordinate(cc.v2(o.x,Math.max(o.y,s.y)))),null!=h&&(o.x==s.x?1==l.direction?(h.setRightTower(!0),this.pushTower(h.rightTower,h.axialCoordinate,l)):(h.setLeftTower(!0),this.pushTower(h.leftTower,h.axialCoordinate,l)):0==l.direction?(h.setTopTower(!0),this.pushTower(h.topTower,h.axialCoordinate,l)):(h.setBottomTower(!0),this.pushTower(h.bottomTower,h.axialCoordinate,l)),h.node.zIndex=1)}a&&a()}.bind(this),.5+.05*this.levelDimensions.y)}},pushTower:function(t,e,i){var n=t.getComponent(l);n.axialCoordinate=e,n.init(i),this.allTowers.push(n)},checkXY:function(t,e,i){return null==t.x&&(t.x=i),null==t.y&&(t.y=e),t},updateUI:function(){this.moved>this.maxValidMoves?this.moves.string="<color=#ff0000>"+this.moved+"</c>/"+this.maxValidMoves:this.moves.string=this.moved+"/"+this.maxValidMoves},setStar:function(t,e,i){},onBackBtnClicked:function(t){(null!=this.gameApplication&&this.gameApplication.soundManager.playSound("btn_click"),null!=t)&&(t.target.getComponent(cc.Button).interactable=!1);var e={};e.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),e.reason="\u5931\u8d25",cc.director.loadScene("main")},onNextBtnClicked:function(t,e){var i=t.target.getComponent(cc.Button);if(i.interactable=!1,this.scheduleOnce(function(){i.interactable=!0},1),"pass"!=e){var n={};n.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),n.reason="\u8fdb\u5165\u4e0b\u4e00\u5173"}this.gameApplication.soundManager.playSound("btn_click"),this.nextGame(i)},onPreviousBtnClicked:function(t){var e=t.target.getComponent(cc.Button);e.interactable=!1,this.scheduleOnce(function(){e.interactable=!0},1);var i={};i.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),i.reason="\u70b9\u51fb\u4e0a\u4e00\u5173\u6309\u94ae",this.gameApplication.soundManager.playSound("btn_click"),this.prevGame()},onReStarBtnClicked:function(t,e){var i=t.target.getComponent(cc.Button);i.interactable=!1,this.scheduleOnce(function(){i.interactable=!0},1);var n={};n.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),n.reason="\u70b9\u51fb\u91cd\u73a9\u6309\u94ae","1"==e&&(n.reason="\u65f6\u95f4\u4e0d\u591f"),this.gameApplication.soundManager.playSound("btn_click"),this.restarGame()},onHelpBtnClicked:function(t){this.gameOver||null==this.myRole||this.helpPath.length<=0||(this.helpCount>0?(this.gameApplication.soundManager.playSound("btn_click"),this.help()):(this.gameApplication.soundManager.playSound("btn_click"),this.watchVideoTip.active=!0))},onWatchVideoBtnClicked:function(t){this.gameApplication.soundManager.playSound("btn_click"),t.target.getComponent(cc.Button).interactable=!1},onShareInvBtnClicked:function(t){this.gameApplication.soundManager.playSound("btn_click");this.gameApplication.soundManager.playSound("done")},showInvAgain:function(t,e){var i=this;this.invAgain.active=!0,cc.find("box/btn_4",this.invAgain).getComponent(cc.Button).node.on("click",function(){1==t?i.onShareInvBtnClicked(e):2==t?i.onShareBtnClicked(e):3==t&&i.getMoreTimeInv(e),i.invAgain.active=!1},this)},onCloseWatchVideoTipClicked:function(){this.gameApplication.soundManager.playSound("btn_click"),this.watchVideoTip.active=!1,this.shareFriendTip.active=!1},onShareBtnClicked:function(t,e){this.gameApplication.soundManager.playSound("btn_click"),t.target.getComponent(cc.Button).interactable=!1,t.target.active=!0,this.gameApplication.soundManager.playSound("done")},goShare:function(){this.goShareView.active=!1,cc.Mgr.UserData.getScore("all",function(t){cc.Mgr.PlatformController.ShareToFriend(1)}.bind(this))},helpBtnShake:function(){this.helpBtn.getComponent("AnimFunc").shake()}}),cc._RF.pop()},{"../../Utils/Utils":"Utils","./Enemy":"Enemy","./HexCell":"HexCell","./Role":"Role","./Tower":"Tower",GUtils:"GUtils"}],HexCell:[function(t,e,i){"use strict";cc._RF.push(e,"9f2d9wJS0FLXJ2cTn40JI4b","HexCell"),cc.Class({extends:cc.Component,properties:{help_end:{default:null,type:cc.Node},help_start:{default:null,type:cc.Node},line_end:{default:null,type:cc.Node},line_start:{default:null,type:cc.Node},_axialCoordinate:{default:cc.v2(0,0),visible:!1},axialCoordinate:{get:function(){return this._axialCoordinate},set:function(t){this._axialCoordinate=cc.v2(t.x,t.y),this.onUpdateAxialCoordinate()}},iceNode:{default:null,type:cc.Node},isIce:{get:function(){return this.iceNode.active}},leftTower:{default:null,type:cc.Node},rightTower:{default:null,type:cc.Node},bottomTower:{default:null,type:cc.Node},topTower:{default:null,type:cc.Node},hasTower:{get:function(){return this.leftTower.active||this.rightTower.active||this.bottomTower.active||this.topTower.active}},coordinateText:{default:null,type:cc.Label},left:{default:null,type:cc.Node},right:{default:null,type:cc.Node},top:{default:null,type:cc.Node},bottom:{default:null,type:cc.Node},leftActive:{get:function(){return this.left.active}},rightActive:{get:function(){return this.right.active}},topActive:{get:function(){return this.top.active}},bottomActive:{get:function(){return this.bottom.active}}},onLoad:function(){this.initHexcell()},start:function(){},scaleChild:function(t,e){this.line_end.setScale(t,e),this.line_start.setScale(t,e),this.help_end.setScale(t,e),this.help_start.setScale(t,e),this.leftTower.getComponent("Tower").setScaleXY(t,e),this.topTower.getComponent("Tower").setScaleXY(t,e),this.rightTower.getComponent("Tower").setScaleXY(t,e),this.bottomTower.getComponent("Tower").setScaleXY(t,e)},showStartLine:function(t){null!=t&&(this.line_start.active=!0,this.axialCoordinate.x==t.x?this.axialCoordinate.y>t.y?this.line_start.setRotation(90):this.line_start.setRotation(-90):this.axialCoordinate.x>t.x?this.line_start.setRotation(180):this.line_start.setRotation(0))},showEndLine:function(t){null!=t&&(this.line_end.active=!0,this.axialCoordinate.x==t.x?this.axialCoordinate.y>t.y?this.line_end.setRotation(90):this.line_end.setRotation(-90):this.axialCoordinate.x>t.x?this.line_end.setRotation(180):this.line_end.setRotation(0))},showLine:function(t,e){this.showStartLine(e),this.showEndLine(t)},hideLine:function(){this.line_start.active=!1,this.line_end.active=!1},showStartHelp:function(t){null!=t&&(this.help_start.active=!0,this.axialCoordinate.x==t.x?this.axialCoordinate.y>t.y?this.help_start.setRotation(90):this.help_start.setRotation(-90):this.axialCoordinate.x>t.x?this.help_start.setRotation(180):this.help_start.setRotation(0))},showEndHelp:function(t){null!=t&&(this.help_end.active=!0,this.axialCoordinate.x==t.x?this.axialCoordinate.y>t.y?this.help_end.setRotation(90):this.help_end.setRotation(-90):this.axialCoordinate.x>t.x?this.help_end.setRotation(180):this.help_end.setRotation(0))},showHelp:function(t,e){this.showStartHelp(e),this.showEndHelp(t)},hideHelpLine:function(){this.help_start.active=!1,this.help_end.active=!1},setIce:function(t){this.iceNode.active=!0},setLeft:function(t){this.left.active=t},setRight:function(t){this.right.active=t},setTop:function(t){this.top.active=t},setBottom:function(t){this.bottom.active=t},setLeftTower:function(t){this.leftTower.active=t},setRightTower:function(t){this.rightTower.active=t},setTopTower:function(t){this.topTower.active=t},setBottomTower:function(t){this.bottomTower.active=t},initHexcell:function(){this.reset()},onUpdateAxialCoordinate:function(){this.coordinateText.string=parseInt(this.axialCoordinate.x)+","+parseInt(this.axialCoordinate.y),this.coordinateText.node.active=isDebug},reset:function(t){!!arguments[0]&&arguments[0];this.setLeft(!1),this.setRight(!1),this.setTop(!1),this.setBottom(!1),this.setLeftTower(!1),this.setRightTower(!1),this.setTopTower(!1),this.setBottomTower(!1)}}),cc._RF.pop()},{}],LevelView:[function(t,e,i){"use strict";cc._RF.push(e,"f23f1EV0cJDq6BQzHk3MAdR","LevelView"),cc.Class({extends:cc.Component,properties:{title:{default:null,type:cc.Label},starts:{default:null,type:cc.Node},pageView:{default:null,type:cc.PageView},content:{default:null,type:cc.Node},levelItem:{default:null,type:cc.Node},levelPage:{default:null,type:cc.Node},levels:{default:{}},bid:{default:0,type:cc.Integer},mid:{default:0,type:cc.Integer},_lastOpenLid:{default:0,type:cc.Integer},lastOpenLid:{get:function(){return this._lastOpenLid},set:function(t){this._lastOpenLid=t,this.updateCurrpage()}},gameApplication:{default:null,type:Object},lastLid:{default:0,type:cc.Integer}},onLoad:function(){this.gameApplication=cc.find("GameApplication").getComponent("GameApplication")},start:function(){},init:function(t,e){if(this.title.string="",null==this.levels||Object.keys(this.levels).length<=0||this.bid!=t||this.mid!=e){this.bid=t,this.mid=e;var i="conf/level_list/level_"+t+"_"+e;this.gameApplication.getConf(i,function(t){this.levels=t,this.initContents()}.bind(this))}else this.bid=t,this.mid=e,this.initContents();var n=this;cc.Mgr.UserData.getScore(t+"_"+e,function(i){n.starts.getComponent(cc.Label).string=i.toString();var o=i+1,s=[];s.push(o),o>1&&s.push(o-1),s.forEach(function(i){var o="conf/level_detail/b_"+t+"/"+e+"/"+i;n.gameApplication.getConf(o,null)})}.bind(this))},initContents:function(){var t=this;t.hideAllItem(),this.title.string=t.levels.title,this.lastLid=0,this.bid=t.levels.bid,this.mid=t.levels.mid;var e=1;t.levels.levels.forEach(function(i){t.initLevels(i,e),e++}),this.pageView._updatePageView()},initLevels:function(t,e){if(!(e<1||e>4)){var i=cc.instantiate(this.levelPage);i.active=!0,this.pageView.addPage(i);for(var n=i.getChildByName("content"),o=(t.total_level,1);o<=25;o++){var s=o.toString(),c=n.getChildByName(s);if(o>t.total_level)c.active=!1;else{var a=25*(e-1)+o;c.name=a.toString(),this.setItem(c,0,!1,a);var l=this;cc.Mgr.UserData.getScore(l.bid+"_"+l.mid+"_"+a,function(t,e,i){var n=!1;i<=l.lastLid+1||t>0?(n=!0,l.setItem(e,t,n,i)):openAllLevel&&l.setItem(e,t,!0,i),t>0&&(l.lastLid=i)},c,a)}}}},setItem:function(t,e,i,n){cc.find("unlock",t).active=i,cc.find("lock",t).active=!i,cc.find("unlock/text",t).getComponent(cc.Label).string=n,cc.find("lock/text",t).getComponent(cc.Label).string=n,t.active=!0,i&&(this.lastOpenLid=n)},updateCurrpage:function(){var t=Math.ceil(this.lastOpenLid/30)-1;t=t>=0?t:0,this.pageView.scrollToPage(t,!1)},onLevelItemClicked:function(t){this.gameApplication.soundManager.playSound("btn_click");var e=t.target,i=e.getComponent(cc.Button);i.interactable=!1;var n=parseInt(e.name);n<1||n>this.lastOpenLid?i.interactable=!0:(window.bid=this.bid,window.mid=this.mid,window.lid=n,cc.director.loadScene("gamescene"))},hideAllItem:function(){this.pageView.removeAllPages()},onBackBtnClicked:function(){this.hideAllItem(),this.gameApplication.openMainView(),this.gameApplication.soundManager.playSound("btn_click")}}),cc._RF.pop()},{}],LoadingView:[function(t,e,i){"use strict";cc._RF.push(e,"961c4S3IrNHB4M+zHyOMk6f","LoadingView"),cc.Class({extends:cc.Component,properties:{gameApplication:{default:null,type:Object}},onLoad:function(){this.gameApplication=cc.find("GameApplication").getComponent("GameApplication")},start:function(){"undefined"!=typeof bid&&"undefined"!=typeof mid&&"undefined"!=typeof lid&&this.gameApplication.openLevelView(bid,mid)},onPlayBtnClicked:function(){cc.log("onPlayBtnClicked"),this.gameApplication.openMainView(),this.gameApplication.soundManager.playSound("btn_click")}}),cc._RF.pop()},{}],MUtils:[function(t,e,i){"use strict";cc._RF.push(e,"d3dc7KucV1HRKTZjlMYDcIg","MUtils");var n=cc.Class({extends:cc.Component,statics:{screenStartTime:0,FormatNumToTime:function(t){var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),n=Math.floor(t-3600*e-60*i),o=e,s=i,c=n;return e<10&&(o="0"+e),i<10&&(s="0"+i),n<10&&(c="0"+n),o+":"+s+":"+c},GetSysTime:function(){return Math.round(new Date/1e3)-1545264e3}}});e.exports=n,cc._RF.pop()},{}],MainView:[function(t,e,i){"use strict";cc._RF.push(e,"5a326YqAwhD+IfA3lH1oKVk","MainView"),cc.Class({extends:cc.Component,properties:{noAdsView:{default:null,type:cc.Node},title:{default:null,type:cc.Label},starts:{default:null,type:cc.Node},content:{default:null,type:cc.Node},missionItem:{default:null,type:cc.Node},missionSpriteAtlas:{default:null,type:cc.SpriteAtlas},missions:{default:null},gameApplication:{default:null,type:Object},watchADTip:{default:null,type:cc.Node},unlock_bid:{default:0,type:cc.Integer},unlock_mid:{default:0,type:cc.Integer},unlock_ad:{default:0,type:cc.Integer},watched_ad:{default:0,type:cc.Integer},missionNodes:{default:{}},musicBtn:{default:null,type:cc.Sprite},musicOff:{default:null,type:cc.SpriteFrame},musicOn:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.gameApplication=cc.find("GameApplication").getComponent("GameApplication"),this.init(),cc.director.preloadScene("gamescene",function(){})},start:function(){},showNoAds:function(){this.noAdsView.active=!0},hideNoAds:function(){this.noAdsView.active=!1},onEnable:function(){this.checkMusic()},checkMusic:function(t,e){"turn"==e&&(gameApplication.soundManager.isOpen?gameApplication.soundManager.setIsOpen(!1):gameApplication.soundManager.setIsOpen(!0)),gameApplication.soundManager.isOpen?this.musicBtn.spriteFrame=this.musicOn:this.musicBtn.spriteFrame=this.musicOff},init:function(){null==this.missions||Object.keys(this.missions).length<=0?this.gameApplication.getMissions(function(t){this.missions=t,this.initContents()}.bind(this)):this.initContents();var t=this;cc.Mgr.UserData.getScore("all",function(e){t.starts.getComponent(cc.Label).string=e.toString()}.bind(this))},initContents:function(){this.hideAllItem();var t=0;this.missions.forEach(function(e){this.initMissionItem(e,t),t++}.bind(this))},initMissionItem:function(t,e){var i=cc.instantiate(this.missionItem);i.parent=this.content,i.active=!0,i.name=e.toString();var n=e%6+1;i.getChildByName("star"),i.getChildByName("lock");i.getChildByName("title").getComponent(cc.Label).string=t.title,i.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.missionSpriteAtlas.getSpriteFrame("mission_"+n);var o=t.stars,s=t.bid,c=t.mid,a=t.unlock_ad;if(this.missionNodes[s+"_"+c]=i,cc.Mgr.UserData.getScore(s+"_"+c,function(t){cc.find("unlock/count",i).getComponent(cc.Label).string=t+"/"+o,cc.find("lock/count",i).getComponent(cc.Label).string=t+"/"+o}),a<=0)cc.find("unlock",i).active=!0,cc.find("lock",i).active=!1;else{cc.find("unlock",i).active=!1,cc.find("lock",i).active=!0;var l=!1;cc.Mgr.UserData.getScore("unlock_"+s+"_"+c,function(t){t>=a&&(l=!0),cc.find("lock/tip",i).getComponent(cc.Label).string="watch "+a+" videos\n to unlock this new world",cc.find("lock/icon_play/val",i).getComponent(cc.Label).string=t+"/"+a,cc.find("unlock",i).active=l,cc.find("lock",i).active=!l}.bind(this))}var r="conf/level_list/level_"+s+"_"+c;this.gameApplication.getConf(r,null)},onWatchVideoBtnClicked:function(){var t=this;cc.Mgr.AdsMgr.ShowVideoAds(1,function(e){if(isCompleted){var i=t.unlock_bid,n=t.unlock_mid,o=t.unlock_ad;t.watched_ad++;var s=this.missionNodes[i+"_"+n];cc.find("lock/icon_play/val",s).getComponent(cc.Label).string=t.watched_ad+"/"+o,t.watched_ad>=o?(t.showLevelPanel(i,n),cc.find("unlock",s).active=!0,cc.find("lock",s).active=!1):(cc.find("unlock",s).active=!1,cc.find("lock",s).active=!0);var c={};c["unlock_"+i+"_"+n]=t.watched_ad,cc.Mgr.UserData.setScore(c,null)}else cc.log("\u64ad\u653e\u89c6\u9891\u5e7f\u544a\u5931\u8d25"),this.showNoAds()})},onMissionItemClicked:function(t){var e=this,i=t.target,n=i.getComponent(cc.Button);n.interactable=!1;var o=parseInt(i.name),s=this.missions[o];if(cc.log("\u4efb\u52a1\u7c7b\u578b = "+s.length),null!=s){var c=s.bid,a=s.mid,l=s.unlock_ad;if(l<=0)this.showLevelPanel(c,a),n.interactable=!0;else{var r=!1;cc.Mgr.UserData.getScore("unlock_"+c+"_"+a,function(t){t>=l&&(r=!0),r?(e.showLevelPanel(c,a),n.interactable=!0):(e.unlock_bid=c,e.unlock_mid=a,e.unlock_ad=l,e.watched_ad=t,e.onWatchVideoBtnClicked(),n.interactable=!0)}.bind(this))}}},hideAllItem:function(){this.content.childrenCount>0&&this.content.children.forEach(function(t){t.active=!1,t.destroy()})},showLevelPanel:function(t,e){this.gameApplication.openLevelView(t,e),this.gameApplication.soundManager.playSound("btn_click")},onBackBtnClicked:function(){this.gameApplication.backToWelcome(),this.gameApplication.soundManager.playSound("btn_click")}}),cc._RF.pop()},{}],NormalAnimation:[function(t,e,i){"use strict";cc._RF.push(e,"43480EzecBHBogcLHmzK8wB","NormalAnimation"),cc.Class({extends:cc.Component,properties:{loop:!0,isplay:!0,sprite:{default:null,type:cc.Sprite},sprites:{default:[],type:[cc.SpriteFrame]},fps:{default:5,type:cc.Integer},index:{default:0,type:cc.Integer,visible:!1},delta:{default:0,type:cc.Integer,visible:!1},rotationForever:!1},onLoad:function(){this.rotationForever&&this.rotation()},rotation:function(){var t=cc.repeatForever(cc.rotateBy(.3,90));this.rotationSeq=this.node.runAction(t)},play:function(){this.scheduleOnce(function(){null!=this.rotationSeq&&this.node.stopAction(this.rotationSeq)},.1),this.index=0,this.delta=0,this.isplay=!0,this.node.opacity=255,this.sprite.node.active=!0},update:function(t){if(this.isplay&&(this.delta+=t,this.fps>0&&this.sprites.length>0)){var e=1/this.fps;e<this.delta&&(this.delta=e>0?this.delta-e:0,this.sprite.spriteFrame=this.sprites[this.index],this.index=this.index+1>=this.sprites.length?0:this.index+1,this.index<=0&&0==this.loop&&(this.rotation(),this.isplay=!1,this.sprite.spriteFrame=this.sprites[0],this.node.opacity=0))}}}),cc._RF.pop()},{}],PlatformController:[function(t,e,i){"use strict";cc._RF.push(e,"14759KM7UND6qDYXLeSI+QE","PlatformController");var n=cc.Class({statics:{IsScreenRecord:!1,wxSubContextViewLock:0,platform:"wx",Init:function(){window.wx||window.tt||window.swan||(this.platform="pc")},IsLoginSync:function(){return"baidu"!=this.platform||!!swan.isLoginSync().isLogin&&(console.log("\u5df2\u7ecf\u6709\u767b\u9646\u4e86"),!0)},CheckTTSession:function(t){tt.checkSession({success:function(e){t(!0),console.log("session\u672a\u8fc7\u671f")},fail:function(e){console.log("session\u5df2\u8fc7\u671f\uff0c\u9700\u8981\u91cd\u65b0\u767b\u5f55"),t(!1)}})},Login:function(){var t=this;"baidu"==this.platform?swan.login({success:function(){t.setUserCloudStorage(cc.Mgr.UserData.getHighScore())},fail:function(){swan.showModal({title:"\u767b\u5f55\u5931\u8d25",content:"\u662f\u5426\u91cd\u65b0\u767b\u5f55\uff1f",cancelText:"\u9000\u51fa\u6e38\u620f",success:function(e){e.confirm?(console.log("\u70b9\u51fb\u4e86\u786e\u5b9a"),t.Login()):e.cancel&&(console.log("\u70b9\u51fb\u4e86\u53d6\u6d88"),swan.exit())}})}}):"tt"==this.platform&&tt.login({success:function(){t.setUserCloudStorage(cc.Mgr.UserDataMgr.HistoryHighAssets)},fail:function(){tt.showModal({title:"\u767b\u5f55\u5931\u8d25",content:"\u662f\u5426\u91cd\u65b0\u767b\u5f55\uff1f",cancelText:"\u9000\u51fa\u6e38\u620f",success:function(e){e.confirm?(console.log("\u70b9\u51fb\u4e86\u786e\u5b9a"),t.Login()):e.cancel&&(console.log("\u70b9\u51fb\u4e86\u53d6\u6d88"),tt.exitMiniProgram({}))}})}})},OpenServiceConversation:function(){"wx"==this.platform?wx.openCustomerServiceConversation({sessionFrom:"",showMessageCard:!0}):this.platform},ShareTopNav:function(){var t=Math.floor(4*Math.random()),e=cc.Mgr.ShareInfos.getShareInfos(t);"wx"==this.platform?(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:e.text,imageUrl:e.url}})):"tt"==this.platform?(tt.showShareMenu(!1),tt.onShareAppMessage(function(){return{title:e.text,imageUrl:e.url}})):"baidu"==this.platform&&(swan.showShareMenu(!1),swan.onShareAppMessage(function(){return{title:e.text,imageUrl:e.url}}))},ShareToFriendTxt:function(t){var e=Math.floor(4*Math.random()),i=cc.Mgr.ShareInfos.getShareInfos(e);"wx"==this.platform?(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),wx.shareAppMessage({title:t,imageUrl:i.url})):"tt"==this.platform?tt.shareAppMessage({title:t,imageUrl:i.url}):"baidu"==this.platform&&(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),swan.shareAppMessage({title:t,imageUrl:i.url}))},ShareToFriend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cb=null;var i=this;this.cb=e;var n=cc.Mgr.ShareInfos.getShareInfos(t);"wx"==this.platform?(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),wx.shareAppMessage({title:n.text,imageUrl:n.url})):"tt"==this.platform?tt.shareAppMessage({title:n.text,imageUrl:n.url,success:function(){null!=i.cb&&i.cb(0)},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}}):"baidu"==this.platform&&(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),swan.shareAppMessage({title:n.text,imageUrl:n.url,success:function(){null!=i.cb&&i.cb(0)},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}}))},showToast:function(t){cc.log(t),"wx"==this.platform?wx.showToast({title:t,icon:"none",duration:2e3}):"tt"==this.platform?tt.showToast({title:t,icon:"none",duration:2e3}):"baidu"==this.platform&&swan.showToast({title:t,icon:"none",duration:2e3})},setUserCloudStorage:function(t){var e,i;(console.log("setUserCloudStorage socre = "+t),"wx"==this.platform)&&((e={wxgame:{}}).wxgame.score=t,e.wxgame.update_time=(new Date).getTime(),console.log(JSON.stringify(e)),(i=new Array).push({key:"\bmkScore",value:JSON.stringify(e)}),wx.setUserCloudStorage({KVDataList:i,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail : "+t)}}));"baidu"==this.platform&&((e={wxgame:{}}).wxgame.score=t,e.wxgame.update_time=(new Date).getTime(),console.log(JSON.stringify(e)),(i=new Array).push({key:"\btzScore",value:JSON.stringify(e)}),swan.setUserCloudStorage({KVDataList:i,success:function(t){console.log("success:"+JSON.stringify(t))},fail:function(t){console.log("fail : "+t)}}))},IsSupportRank:function(){return"wx"==this.platform},showSubContentView:function(){"wx"==this.platform&&(this.wxSubContextViewLock++,console.log("showSubContentView   "+this.wxSubContextViewLock))},hideSubContentView:function(){"wx"==this.platform&&(this.wxSubContextViewLock--,console.log("hideSubContentView   "+this.wxSubContextViewLock))},SendMessageToSubView:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i={};i.code=t,i.curScore=e,"wx"==this.platform?wx.getOpenDataContext().postMessage({message:i}):"baidu"==this.platform&&swan.getOpenDataContext().postMessage({message:i})},QuakeScreen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];"pc"!=this.platform&&(1==t?"tt"==this.platform?tt.vibrateLong({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"baidu"==this.platform?swan.vibrateLong({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"wx"==this.platform&&wx.vibrateLong({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"tt"==this.platform?tt.vibrateShort({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}}):"baidu"==this.platform?swan.vibrateShort({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}}):"wx"==this.platform&&wx.vibrateShort({success:function(t){console.log(""+t)},fail:function(t){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}))},IsSupportRecordScreen:function(){return"tt"==this.platform||"baidu"==this.platform&&!!this.CompareSdkVesrion(swan.getSystemInfoSync().SDKVersion,"1.4.1")},CompareSdkVesrion:function(t,e){for(var i=t.split("."),n=e.split("."),o=0;o<i.length;o++){if(parseInt(i[o])<parseInt(n[o]))return 0;if(parseInt(i[o])>parseInt(n[o]))return 1}return 1},StartRecordScreen:function(){var t=this;this.videoPath="",this.IsScreenRecord=!0,this.showToast("\u5f00\u59cb\u5f55\u5236"),cc.Mgr.Utils.screenStartTime=cc.Mgr.Utils.GetSysTime(),"tt"==this.platform?(null==this.recorderManager&&(this.recorderManager=tt.getGameRecorderManager(),this.recorderManager.onStart(function(t){console.log("\u5f55\u5236\u5f00\u59cb\u4e86: "+t)}),this.recorderManager.onStop(function(e){t.showToast("\u7ed3\u675f\u5f55\u5236"),console.log("\u5f55\u5236\u7ed3\u675f\u4e86: "+e.videoPath),t.IsScreenRecord=!1,cc.director.emit("ScreenOver",{}),t.videoPath=e.videoPath,t.ShareRecordScreen()}),this.recorderManager.onPause(function(){console.log("\u5f55\u5236\u6682\u505c\u4e86")}),this.recorderManager.onResume(function(){console.log("\u5f55\u5236\u6062\u590d\u4e86")}),this.recorderManager.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519\u4e86:"+e),t.IsScreenRecord=!1})),this.recorderManager.start({duration:30})):"baidu"==this.platform&&(null==this.recorderManager&&(this.recorderManager=swan.getVideoRecorderManager(),this.recorderManager.onStart(function(t){console.log("\u5f55\u5236\u5f00\u59cb\u4e86: "+t)}),this.recorderManager.onStop(function(e){console.log("\u5f55\u5236\u7ed3\u675f\u4e86: "+e.videoPath),t.IsScreenRecord=!1,t.videoPath=e.videoPath,cc.director.emit("ScreenOver",{}),t.ShareRecordScreen()}),this.recorderManager.onPause(function(){console.log("\u5f55\u5236\u6682\u505c\u4e86")}),this.recorderManager.onResume(function(){console.log("\u5f55\u5236\u6062\u590d\u4e86")}),this.recorderManager.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519\u4e86:"+e),t.IsScreenRecord=!1})),this.recorderManager.start({duration:30,microphoneEnabled:!0}))},StopRecordScreen:function(){if(this.IsScreenRecord=!1,"tt"==this.platform){if(null==this.recorderManager)return;console.log("\u505c\u6b62\u5f55\u5236"),this.recorderManager.stop()}else if("baidu"==this.platform){if(null==this.recorderManager)return;console.log("\u505c\u6b62\u5f55\u5236"),this.recorderManager.stop()}},ShareRecordScreen:function(){var t=this;if(cc.Mgr.Utils.GetSysTime()-cc.Mgr.Utils.screenStartTime<=3)return cc.Mgr.Utils.screenStartTime=0,void this.showToast("\u5f55\u5236\u65f6\u95f4\u5c11\u4e8e\u4e09\u79d2,\u672a\u80fd\u6210\u529f\u4fdd\u5b58\u89c6\u9891");if(this.showToast("\u7ed3\u675f\u5f55\u5c4f"),"tt"==this.platform){if(null==this.recorderManager||""==this.videoPath)return;console.log("\u5206\u4eab\u5f55\u5236\u7684\u89c6\u9891"),tt.shareVideo({videoPath:""+this.videoPath,success:function(){t.showToast("\u5206\u4eab\u5f55\u5236\u89c6\u9891\u6210\u529f\uff01")},fail:function(e){t.showToast("\u5206\u4eab\u5f55\u5236\u89c6\u9891\u5931\u8d25\uff01")}})}else if("baidu"==this.platform){if(null==this.recorderManager||null==this.videoPath)return;console.log("\u5206\u4eab\u5f55\u5236\u7684\u89c6\u9891"),swan.shareVideo({videoPath:""+this.videoPath,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01")},fail:function(t){console.log("\u5206\u4eab\u5931\u8d25\uff01"+t)}})}},JumpToOtherApp:function(t){"wx"==this.platform?wx.navigateToMiniProgram({appId:t,envVersion:"release",success:function(t){console.log("\u6210\u529f\u6253\u5f00\u4e86\u5176\u4ed6\u5c0f\u7a0b\u5e8f")}}):"baidu"==this.platform?swan.navigateToMiniProgram({appKey:t,extraData:{},success:function(t){console.log("\u767e\u5ea6\u8df3\u8f6c success",t)},fail:function(t){console.log("\u767e\u5ea6\u8df3\u8f6c fail",t)}}):"tt"==this.platform&&tt.navigateToMiniProgram({appId:t,extraData:{},success:function(t){console.log(" success",t)},fail:function(t){console.log(" fail",t)}})}}});e.exports=n,cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"e32198K/PFAYI3D//JNhj6H","Player"),cc.Class({extends:cc.Component,properties:{age:{default:0,type:cc.Integer},avatar:{default:""},group_id:{default:0,type:cc.Integer},is_rebot:{default:0,type:cc.Integer},pname:{default:""},score:{default:0,type:cc.Integer},sex:{default:0,type:cc.Integer},user_id:{default:0,type:cc.Integer}},setUserInfo:function(t){this.age=t.age,this.avatar=t.avatar,this.group_id=t.group_id,this.is_rebot=t.is_rebot,this.pname=this.substrName(t.name,6),this.score=t.score,this.sex=t.sex,this.user_id=t.user_id},substrName:function(t,e){if(t.replace(/[\u4e00-\u9fa5]/g,"**").length<=e)return t;for(var i=0,n="",o=0;o<t.length&&(/[\u4e00-\u9fa5]/.test(t[o])?i+=2:i+=1,!(i>e));o++)n+=t[o];return n+" ..."}}),cc._RF.pop()},{}],Role:[function(t,e,i){"use strict";cc._RF.push(e,"01249Rk7stLqpgK0u1Ta5FD","Role");t("./HexCell");cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Node},die:{default:null,type:cc.Node},arrowNode:{default:null,type:cc.Node},leftNode:{default:null,type:cc.Node},rightNode:{default:null,type:cc.Node},bottomNode:{default:null,type:cc.Node},topNode:{default:null,type:cc.Node},_axialCoordinate:{default:cc.v2(0,0),visible:!1},axialCoordinate:{get:function(){return this._axialCoordinate},set:function(t){this._axialCoordinate=cc.v2(t.x,t.y)}},gameView:{default:null},darkNode:{default:null,type:cc.Node}},onLoad:function(){},start:function(){},init:function(){this.bg.active=!0,this.die.active=!1},onCollisionEnter:function(t,e){null!=this.gameView&&(cc.log("other.node:",t.node),cc.log("other.node.opacity:",t.node.opacity),null!=t.node&&t.node.opacity>0&&t.node.active&&this.gameView.collisionCallback())},setDark:function(t){this.darkNode.active=t},setArrow:function(t,e,i,n){this.topNode.active=t,this.bottomNode.active=i,this.leftNode.active=e,this.rightNode.active=n,this.arrowNode.active=!0},hideArrow:function(){this.arrowNode.active=!1},playDie:function(t){var e=this;this.bg.active=!0,this.die.active=!1,this.die.setContentSize(cc.size(100,100)),this.blinking(this.bg,function(){e.bg.active=!1,e.die.active=!0,e.blinking(e.die,function(){e.die.setContentSize(cc.size(180,180)),e.blinking(e.die,function(){e.scheduleOnce(function(){e.die.runAction(cc.fadeOut(.2))},.1)})})})},blinking:function(t,e){var i=cc.delayTime(.12),n=cc.fadeOut(.01),o=cc.delayTime(.1),s=cc.fadeIn(.01),c=cc.callFunc(function(){e&&e()}),a=cc.repeat(cc.sequence(i,n,o,s),2);t.stopAllActions(),t.runAction(cc.sequence(a,c))},moveTo:function(){}}),cc._RF.pop()},{"./HexCell":"HexCell"}],RotationForever:[function(t,e,i){"use strict";cc._RF.push(e,"fb6faggz8ZGIIj857YwdZTb","RotationForever"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.repeatForever(cc.rotateBy(.3,90));this.node.runAction(t)}}),cc._RF.pop()},{}],ShareInfos:[function(t,e,i){"use strict";cc._RF.push(e,"747b3uMa71Bx4tK12EFUCkl","ShareInfos");var n=cc.Class({extends:cc.Component,statics:{init:function(){this.Infos=[{text:"\u6765\u9020\u4e2a7\uff0c\u8da3\u5473\u5341\u8db3\u6570\u5b57\u7684\u5c0f\u6e38\u620f",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5oBDZqM0klDWktIr9CQvoOIUuwalwqh4EcY7fRrkxEn0AUY5Sxiaby7S/0"},{text:"Make7 \u6570\u5b57\u5408\u6210\uff0c\u8da3\u5473\u5341\u8db3",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5oBDZqM0klDWktIr9CQvoOIUuwalwqh4EcY7fRrkxEn0AUY5Sxiaby7S/0"},{text:"Make7 \u6570\u5b57\u5408\u6210\uff0c\u8da3\u5473\u5341\u8db3",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5r77cynvwBKJbx1VMR07uOzv6NQIRtOrtDjE1NpMW1SQWZSmGsuTU36/0"},{text:"\u6765\u9020\u4e2a7\uff0c\u8da3\u5473\u5341\u8db3\u6570\u5b57\u7684\u5c0f\u6e38\u620f",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5r77cynvwBKJbx1VMR07uOzv6NQIRtOrtDjE1NpMW1SQWZSmGsuTU36/0"}]},getShareInfos:function(t){return this.Infos[t]}}});e.exports=n,cc._RF.pop()},{}],SoundManager:[function(t,e,i){"use strict";cc._RF.push(e,"2e203tup99JJ5nSDvFuy7AM","SoundManager"),cc.Class({extends:cc.Component,properties:{audioSource:{type:cc.AudioSource,default:null},btn_click:{url:cc.AudioClip,default:null},gamewin:{url:cc.AudioClip,default:null},done:{url:cc.AudioClip,default:null},error:{url:cc.AudioClip,default:null},clock:{url:cc.AudioClip,default:null},uplock:{url:cc.AudioClip,default:null},isOpen:!0,isVoiceOpen:!0},playSound:function(t){if(this.isOpen)switch(t){case"btn_click":cc.audioEngine.play(this.btn_click,!1,1);break;case"done":cc.audioEngine.play(this.done,!1,1);break;case"error":cc.audioEngine.play(this.error,!1,1);break;case"clock":cc.audioEngine.play(this.clock,!1,1);break;case"gamewin":cc.audioEngine.play(this.gamewin,!1,1);break;case"uplock":cc.audioEngine.play(this.uplock,!1,1)}},playBg:function(){cc.log("_____playBg:function"),this.isOpen&&this.audioSource.play()},setVoiceIsOpen:function(t){if(this.isVoiceOpen=t,t)try{null!=str&&HiboGameJs.enableMic(0)}catch(t){}else try{null!=str&&HiboGameJs.enableMic(1)}catch(t){}},setIsOpen:function(t){if(this.isOpen=t,this.isOpen){this.playBg();try{null!=str&&HiboGameJs.mute(0)}catch(t){}}else{this.audioSource.pause();try{null!=str&&HiboGameJs.mute(1)}catch(t){}}}}),cc._RF.pop()},{}],Tower:[function(t,e,i){"use strict";cc._RF.push(e,"fffd1g1zLBJ9Zn7NHAXbn3T","Tower");t("./HexCell");var n=t("GUtils");cc.Class({extends:cc.Component,properties:{bubble:{default:null,type:cc.Node},bubbleAxialCoordinate:{default:cc.v2(0,0),visible:!1},_axialCoordinate:{default:cc.v2(0,0),visible:!1},axialCoordinate:{get:function(){return this._axialCoordinate},set:function(t){this._axialCoordinate=cc.v2(t.x,t.y),this.bubbleAxialCoordinate=cc.v2(t.x,t.y)}},isShooting:!1,direction:{default:-1,type:cc.Integer,visible:!1},f:{default:0,type:cc.Integer,visible:!1},s:{default:0,type:cc.Integer,visible:!1},delay:{default:0,type:cc.Integer,visible:!1},size:{default:cc.size(0,0),type:cc.Size,visible:!1},scaleX:{default:1,type:cc.Integer,visible:!1},scaleY:{default:1,type:cc.Integer,visible:!1}},onEnable:function(){this.schedule(this.check,.1)},onDisable:function(){this.unschedule(this.check)},init:function(t){this.direction=t.direction,this.f=t.f,this.s=t.s,this.delay=t.delay,this.isShooting=!1,this.bubble.active=!1,this.node.setContentSize(this.size),this.bubble.setScale(this.scaleX,this.scaleY)},setScaleXY:function(t,e){this.size=cc.size(34*t,51*e),this.scaleX=t,this.scaleY=e},check:function(){if(null!=gameView.myRole){var t=gameView.myRole.node.getPosition(),e=this.getUIPosition(this.bubble,gameView.myRole.node.parent);if(this.bubble.active&&n.pDistance(t,e)<=20){this.unschedule(this.check);var i={};i.level=mid+"0"+(lid>99?lid:lid>9?"0"+lid:"00"+lid),i.reason="\u88ab\u98de\u9556\u649e\u6b7b",gameView.die()}}},getUIPosition:function(t,e){var i=t.parent.convertToWorldSpaceAR(t.getPosition());return e.convertToNodeSpaceAR(i)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{"./HexCell":"HexCell",GUtils:"GUtils"}],UserData:[function(t,e,i){"use strict";cc._RF.push(e,"c644cdyTMtHq5CLMydZf1wB","UserData");var n=cc.Class({statics:{getScore:function(t,e,i,n){var o=JSON.parse(cc.sys.localStorage.getItem(t));return o=void 0===o||null==o?0:parseInt(o),null!=e&&e(o,i,n),o},setScore:function(t,e){for(var i in t)cc.sys.localStorage.setItem(i,t[i]);null!=e&&e()},initData:function(){var t=cc.sys.localStorage.getItem("qq_userdata");if(null!=t&&""!=t)console.log("\u5e72\uff0c\u6709\u6570\u636e");else{console.log("\u5e72\uff0c\u4e4b\u524d\u6ca1\u6709\u6570\u636e");cc.sys.localStorage.setItem("lbx_userdata",JSON.stringify({}))}},SaveData:function(){cc.log("\u4fdd\u5b58\u6570\u636e"),cc.sys.localStorage.setItem("lbx_userdata",JSON.stringify({}))}}});e.exports=n,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"3e427LrtQhKv7l/kjbf8v9+","Utils");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={},s=Math.sqrt(3);o.offsetToAxial=function(t){return t.x=t.x-Math.floor(t.y/2),t},o.axialToScreen=function(t,e){var i=e*t.y+.5*e-t.y*lineWidth,n=e*t.x+.5*e-t.x*lineWidth;return cc.v2(n,i)},o.screenToAxial=function(t,e){var i=cc.v2(0,0);i.y=t.x/(1.5*e),i.x=(t.y-t.x/s)/(s*e);var n=this.calculateCubicZ(i),o=Math.round(i.x),c=Math.round(i.y),a=Math.round(n);if(o+c+a==0)t.x=o,t.y=c;else{var l=Math.abs(i.x-o),r=Math.abs(i.y-c),d=Math.abs(n-a);l>r&&l>d?(t.x=-c-a,t.y=c):r>l&&r>d?(t.x=o,t.y=-o-a):d>l&&d>r&&(t.x=o,t.y=c)}return t},o.calculateCubicZ=function(t){return-t.x-t.y},o.axialToOffset=function(t){return t.x=t.x+Math.floor(t.y/2),t},o.getNeighbors=function(t){var e=cc.v2(0,0),i=[];return e.x=t.x+1,e.y=t.y,i.push(cc.v2(e.x,e.y)),e.x=t.x-1,e.y=t.y,i.push(cc.v2(e.x,e.y)),e.x=t.x,e.y=t.y-1,i.push(cc.v2(e.x,e.y)),e.x=t.x,e.y=t.y+1,i.push(cc.v2(e.x,e.y)),i},o.getNeighborsOBJ=function(t){var e=cc.v2(0,0),i={};return e.x=t.x+1,e.y=t.y,i.r=cc.v2(e.x,e.y),e.x=t.x-1,e.y=t.y,i.l=cc.v2(e.x,e.y),e.x=t.x,e.y=t.y-1,i.b=cc.v2(e.x,e.y),e.x=t.x,e.y=t.y+1,i.t=cc.v2(e.x,e.y),i},o.isNeighbors=function(t,e){for(var i=this.getNeighbors(t),n=!1,o=0;o<i.length;o++)i[o].equals(e)&&(n=!0);return n},o.cloneObj=function(t){var e=t&&t.constructor===Array?[]:{};for(var i in t)if(t.hasOwnProperty(i)){if(!t[i]){e[i]=t[i];continue}e[i]="object"===n(t[i])?o.cloneObj(t[i]):t[i]}return e},o.GetRandomNum=function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},o.inArray=function(t,e){for(var i=e.length;i--;)if(parseInt(e[i])===parseInt(t))return!0;return!1},e.exports=o,cc._RF.pop()},{}],ZoominForever:[function(t,e,i){"use strict";cc._RF.push(e,"0bfed705u9G85RWvZFfoZtO","ZoominForever"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=cc.repeatForever(cc.sequence(cc.scaleTo(.88,1.1,1.1),cc.scaleTo(.88,.9,.9)));this.node.runAction(t)}}),cc._RF.pop()},{}],facebook:[function(t,e,i){"use strict";cc._RF.push(e,"40c740t3npLE6TH8pxBVb/2","facebook");var n=t("../Utils/Utils"),o="AD_LOADING",s="AD_LOAD_SUCCESS",c="AD_COMPLETE",a=[0x5b7d1cf0050f3,0x63feaccfa70df],l=function(){this.cb=null,this.videoAd=null,this.videoAdState=null,this.InterstitialAd=null,this.InterstitialAdState=null},r={};l.prototype.init=function(t){},l.prototype.isGM=function(){if("undefined"==typeof FBInstant)return!1;var t=FBInstant.player.getID();return n.inArray(t,a)},l.prototype.clearData=function(){if("undefined"==typeof FBInstant)return!1;SDK().setScore({all:0},null),SDK().setScore({my_help:0},null);for(var t=1;t<=6;t++){for(var e=1;e<=100;e++){var i={};i["1_"+t+"_"+e]=0,this.setScore(i,null);var n={};n["1_"+t+"_"+e+"_moves"]=0,this.setScore(n,null)}var o={};o["1_"+t]=0,this.setScore(o,null);var s={};s["unlock_1_"+t]=0,SDK().setScore(s,null)}},l.prototype.getLocale=function(){if("undefined"!=typeof FBInstant)return FBInstant.getLocale()},l.prototype.share=function(t,e){if("undefined"!=typeof FBInstant){var i=this;FBInstant.context.chooseAsync().then(function(){i.doShare(t),null!=e&&e(!0)}).catch(function(t){null!=t.code&&"SAME_CONTEXT"==t.code&&null!=e&&e(!1)})}else null!=e&&e(!0)},l.prototype.doShare=function(t){var e=this.getName()+" finish "+t+" missions,Can you beat me?";this.getName();cc.loader.loadRes("texture2d/game_icon",cc.Texture2D,function(t,i){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=600,n.height=420;var s=i.getHtmlElementObj();o.drawImage(s,0,0);var c=n.toDataURL("image/png");FBInstant.updateAsync({action:"CUSTOM",cta:"Play Game",template:"join_fight",image:c,text:e,data:{myReplayData:"..."},strategy:"IMMEDIATE",notification:"NO_PUSH"}).then(function(){})})},l.prototype.loadInterstitialAd=function(){"undefined"!=typeof FBInstant&&FBInstant.getInterstitialAdAsync("160840521263423_160841827929959").then(function(t){return this.InterstitialAd=t,this.InterstitialAdState=o,this.InterstitialAd.loadAsync()}.bind(this)).catch(function(t){}.bind(this)).then(function(){this.InterstitialAdState=s}.bind(this))},l.prototype.switchGameAsync=function(t){if("undefined"==typeof FBInstant)return!1;FBInstant.switchGameAsync(t).catch(function(t){})},l.prototype.showInterstitialAd=function(t){"undefined"!=typeof FBInstant?null!=this.InterstitialAd?this.InterstitialAd.showAsync().then(function(){this.InterstitialAdState=c,t&&t(!0),this.loadInterstitialAd()}.bind(this)).catch(function(e){this.InterstitialAdState=c,t&&t(!1)}.bind(this)):(t&&t(!1),this.loadInterstitialAd()):t&&t(!1)},l.prototype.loadVideoAd=function(){"undefined"!=typeof FBInstant&&FBInstant.getRewardedVideoAsync("160840521263423_160841467929995").then(function(t){return this.videoAd=t,this.videoAdState=o,this.videoAd.loadAsync()}.bind(this)).then(function(){this.videoAdState=s}.bind(this)).catch(function(t){this.videoAdState=o,this.loadVideoAd()}.bind(this))},l.prototype.hasVideoAd=function(){return"undefined"!=typeof FBInstant&&null!=this.videoAd},l.prototype.showVideoAd=function(t){"undefined"!=typeof FBInstant?null!=this.videoAd?(cc.game.pause(),this.videoAd.showAsync().then(function(){this.videoAdState=c,t&&t(!0),cc.game.resume(),this.loadVideoAd()}.bind(this)).catch(function(e){this.videoAdState=c,t&&t(!1),cc.game.resume()}.bind(this))):(t&&t(!1),cc.game.resume(),this.loadVideoAd()):t&&t(!0)},l.prototype.getInfo=function(){return"undefined"==typeof FBInstant?{id:1}:r},l.prototype.getName=function(){return"undefined"==typeof FBInstant?"undefined":FBInstant.player.getName()},l.prototype.getScore=function(t,e,i,n){if("undefined"==typeof FBInstant){s=void 0===(s=JSON.parse(cc.sys.localStorage.getItem(t)))||null==s?0:parseInt(s),e(s,i,n)}else{var o=[];o.push(t);var s=0;FBInstant.player.getDataAsync(o).then(function(o){s=void 0===o[t]?0:parseInt(o[t]),e(s,i,n)})}},l.prototype.setScore=function(t,e){if("undefined"==typeof FBInstant){for(var i in t)cc.sys.localStorage.setItem(i,t[i]);null!=e&&e()}else FBInstant.player.setDataAsync(t).then(function(){null!=e&&e()})},e.exports=function(){var t;return function(){return t||(t=new l),t}}(),cc._RF.pop()},{"../Utils/Utils":"Utils",LanguageData:void 0}],globals:[function(t,e,i){"use strict";cc._RF.push(e,"f774aa2KJxEp68y3WRvT7GZ","globals"),window.playTimesAD=1,window.isDebug=!1,window.lineWidth=6,window.plusHelp=5,window.openAllLevel=!1,cc._RF.pop()},{}],scoreData:[function(t,e,i){"use strict";cc._RF.push(e,"a361dxsJkdCA5z4mnyi2iWd","scoreData");var n=cc.Class({name:"scoreData",properties:{step:0,time:0}});e.exports=n,cc._RF.pop()},{}]},{},["AppStart","AudioMgr","globals","GameApplication","Player","SoundManager","MUtils","DataAnalytics","facebook","AnimFunc","NormalAnimation","RotationForever","ZoominForever","Enemy","GameView","HexCell","Role","Tower","LevelView","LoadingView","MainView","UserData","GUtils","Utils","AdsMgr","AdsParam","PlatformController","ShareInfos","scoreData"]);