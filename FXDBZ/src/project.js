window.__require=function e(t,i,c){function o(a,r){if(!i[a]){if(!t[a]){var n=a.split("/");if(n=n[n.length-1],!t[n]){var l="function"==typeof __require&&__require;if(!r&&l)return l(n,!0);if(s)return s(n,!0);throw new Error("Cannot find module '"+a+"'")}}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){return o(t[a][1][e]||e)},u,u.exports,e,t,i,c)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<c.length;a++)o(c[a]);return o}({AudioMgr:[function(e,t,i){"use strict";cc._RF.push(t,"01b8eyM+U5JsqjSjwxjvVSx","AudioMgr");cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1,musicState:1},init:function(){var e;cc.Mgr.loadSound=!1,null!=(e=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/sound/"+e+".mp3")},playBGM:function(e){var t=this.getUrl(e);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){var t=this.getUrl(e);cc.audioEngine.play(t,!1,this.sfxVolume)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){this.musicState=0,this.bgmVolume=0,this.sfxVolume=0,cc.audioEngine.pauseAll()},resumeAll:function(){this.musicState=1,this.bgmVolume=1,this.sfxVolume=1,cc.audioEngine.resumeAll()},getVoiceState:function(){return this.musicState}});cc._RF.pop()},{}],DIR:[function(e,t,i){"use strict";cc._RF.push(t,"b2062Q+Fb1Gbq4Js4uNmlVX","DIR");var c=cc.Enum({LEFT:0,RIGHT:1});t.exports=c,cc._RF.pop()},{}],FollowPlayer:[function(e,t,i){"use strict";cc._RF.push(t,"fec5bLnridGM7viIAvlWpsC","FollowPlayer");var c=e("Player"),o=cc.Class({extends:cc.Component,properties:{player:c,offsetX:0,offsetY:0},onLoad:function(){this.offsetX=320,this.offsetY=this.player.node.getPosition().y-this.node.getPosition().y},start:function(){},update:function(e){var t=this.player.node.getPosition();this.node.setPosition(cc.v2(this.offsetX,t.y-this.offsetY))}});t.exports=o,cc._RF.pop()},{Player:"Player"}],FoodType:[function(e,t,i){"use strict";cc._RF.push(t,"321dcqx3hhIoKOEOTG0FT9K","FoodType");var c=cc.Enum({Null:0,Score:1,Shield:2,DoubleScore:3,Life:4});t.exports=c,cc._RF.pop()},{}],Food:[function(e,t,i){"use strict";cc._RF.push(t,"ce907ZJICRN57leO8JQzA6V","Food");var c=e("FoodType"),o=cc.Class({extends:cc.Component,properties:{Sp:cc.Sprite,foodType:{default:c.Score,type:c}}});t.exports=o,cc._RF.pop()},{FoodType:"FoodType"}],GameController:[function(e,t,i){"use strict";function c(){cc.Mgr={};var t=e("AudioMgr");cc.Mgr.AudioMgr=new t,cc.Mgr.AudioMgr.init(),cc.Mgr.Global=e("GlobalData");var i=e("UserData");cc.Mgr.UserData=new i,cc.Mgr.UserData.initData()}cc._RF.push(t,"e3340smfIZHdqgBFcGtJetj","GameController");var o=e("GameState"),s=e("Player"),a=e("PlayerState"),r=e("UIMgr"),n=e("GameMode"),l=e("DIR"),u=(e("Sky"),cc.Class({extends:cc.Component,properties:{gameState:{default:o.Menu,type:o},gameMode:{default:n.Endless,type:n},player:s,uiMgr:r,skyParent:cc.Node,Sky_1:cc.Node,Sky_2:cc.Node,SkyList:[cc.Prefab],SkyPassNum:1},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0;var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){t.touch.getLocation().x<e.node.width/2?e.player.AddUpForce(l.LEFT):e.player.AddUpForce(l.RIGHT)}),cc.director.on("gameover",function(t){e.GameOver()}),c(),this.initGameData()},initGameData:function(){this.gameState=o.Menu,this.gameMode=n.Endless},start:function(){cc.Mgr.AudioMgr.playBGM("bgm"),this.Sky_2.setPosition(cc.v2(320,2200*this.SkyPassNum)),this.Sky_1.getComponent("Sky").setRigidPos(0),this.Sky_2.getComponent("Sky").setRigidPos(1)},generateNewSky:function(){var e=Math.floor(Math.random()*this.SkyList.length),t=cc.instantiate(this.SkyList[e]);t.parent=this.skyParent,this.SkyPassNum+=1,t.setPosition(cc.v2(320,2200*this.SkyPassNum)),t.getComponent("Sky").setRigidPos(1),this.Sky_1=this.Sky_2,this.Sky_2=t},update:function(e){this.player.node.getPosition().y>this.Sky_1.getPosition().y+3400&&(this.Sky_1.destroy(),this.Sky_1=null,this.generateNewSky())},StartGame:function(){this.gameState=o.Play,this.uiMgr.StartPanel.active=!1,this.player.changeState(a.Normal)},ReStartGame:function(){this.gameState=o.Play,this.uiMgr.OverPanel.active=!1,this.player.rePlay()},GameOver:function(){this.uiMgr.OverPanel.active=!0,this.gameState=o.Over}}));t.exports=u,cc._RF.pop()},{AudioMgr:"AudioMgr",DIR:"DIR",GameMode:"GameMode",GameState:"GameState",GlobalData:"GlobalData",Player:"Player",PlayerState:"PlayerState",Sky:"Sky",UIMgr:"UIMgr",UserData:"UserData"}],GameMode:[function(e,t,i){"use strict";cc._RF.push(t,"9b64bJADUVGUbBlfSB+Y1XH","GameMode");var c=cc.Enum({Endless:0,Stage:1});t.exports=c,cc._RF.pop()},{}],GameState:[function(e,t,i){"use strict";cc._RF.push(t,"a4b90P2A2BGQ5HwwbOsCVpH","GameState");var c=cc.Enum({Menu:0,Play:1,Over:2,Pause:3});t.exports=c,cc._RF.pop()},{}],GlobalData:[function(e,t,i){"use strict";cc._RF.push(t,"61e78zVF2lEIb2YV4ku9ld3","GlobalData");var c=cc.Class({extends:cc.Component,statics:{linearVx:150,linearVy:350}});t.exports=c,cc._RF.pop()},{}],PlayerState:[function(e,t,i){"use strict";cc._RF.push(t,"365f3RAwodG16/MkXiiJzo4","PlayerState");var c=cc.Enum({Wait:0,Normal:1,Death:2,Invincible:3,Crazy:4});t.exports=c,cc._RF.pop()},{}],Player:[function(e,t,i){"use strict";cc._RF.push(t,"45ab9GG3l1Aa5XA0tLS0Iuf","Player");var c=e("PlayerState"),o=e("DIR"),s=e("UIMgr"),a=cc.Class({extends:cc.Component,properties:{rigidBody:cc.RigidBody,shieldAnima:cc.Animation,bodyAnima:cc.Animation,state:{default:c.Normal,type:c},uiMgr:s},start:function(){this.state=c.Wait},onCollisionEnter:function(e,t){this.state!=c.Death&&this.state!=c.Wait&&("box"==e.node.name?this.state==c.Normal&&(this.rigidBody.gravityScale=0,this.state=c.Death,cc.director.emit("gameover",{})):"socreObj"==e.node.name?(cc.Mgr.UserData.addCurScore(5),this.uiMgr.refreshScore(),cc.Mgr.AudioMgr.playSFX("coin"),e.node.active=!1):"foodShield"==e.node.name?(e.node.active=!1,this.playShiledAnima()):"foodlife"==e.node.name&&(e.node.active=!1,cc.Mgr.AudioMgr.playSFX("coin"),cc.Mgr.UserData.addCurLife(),this.uiMgr.refreshLife()))},playShiledAnima:function(){this.shieldAnima.node.active=!0,this.shieldAnima.play("shieldblink"),this.state=c.Invincible,this.scheduleOnce(function(){this.shieldAnima.stop("shieldblink"),this.shieldAnima.node.active=!1,this.state=c.Normal},5)},playBodyAnima:function(){this.playBodyAnima.play("playerbodycolor"),this.state=c.Crazy,this.scheduleOnce(function(){this.playBodyAnima.stop("playerbodycolor"),this.state=c.Normal},5)},changeState:function(e){this.state=e},rePlay:function(){this.rigidBody.gravityScale=1.75,this.playShiledAnima()},AddUpForce:function(e){if(this.state!=c.Death&&this.state!=c.Wait){cc.Mgr.AudioMgr.playSFX("click");var t=this.rigidBody.linearVelocity;t.y=cc.Mgr.Global.linearVy,e==o.RIGHT?(this.rigidBody.node.scaleX=1,t.x=cc.Mgr.Global.linearVx):(this.rigidBody.node.scaleX=-1,t.x=-cc.Mgr.Global.linearVx),this.rigidBody.linearVelocity=t}}});t.exports=a,cc._RF.pop()},{DIR:"DIR",PlayerState:"PlayerState",UIMgr:"UIMgr"}],SkyType:[function(e,t,i){"use strict";cc._RF.push(t,"e5ac0EFLoNEWYqsbN+Y6AuQ","SkyType");var c=cc.Enum({First:0,Second:1,Third:2,Fourth:3,Fifth:4,Sixth:5,Seventh:6});t.exports=c,cc._RF.pop()},{}],Sky:[function(e,t,i){"use strict";cc._RF.push(t,"65ea7HjV5FEupyjy7JEJT4k","Sky");var c=e("SkyType"),o=cc.Class({extends:cc.Component,properties:{skyType:{default:c.First,type:c},boundaryL:cc.Node,boundaryR:cc.Node,rigidList:[cc.Node],rigidPosList:[cc.Vec2]},setRigidPos:function(e){var t=cc.view.getVisibleSize().width;this.boundaryL.setPosition(cc.v2(-t/2,1100+1*e)),this.boundaryR.setPosition(cc.v2(t/2,1100+1*e));for(var i=0;i<this.rigidList.length;i++)this.rigidList[i].setPosition(cc.v2(this.rigidPosList[i].x,this.rigidPosList[i].y+1*e))}});t.exports=o,cc._RF.pop()},{SkyType:"SkyType"}],UIMgr:[function(e,t,i){"use strict";cc._RF.push(t,"32738cZIYpL0ZV/Oo0p8QCZ","UIMgr");var c=cc.Class({extends:cc.Component,properties:{ScoreLbl:cc.Label,LifeLbl:cc.Label,StartPanel:cc.Node,OverPanel:cc.Node},start:function(){this.ScoreLbl.string="\u5f97\u5206: "+cc.Mgr.UserData.curScore,this.LifeLbl.string="\u751f\u547d: "+cc.Mgr.UserData.LifeNum},refreshScore:function(){this.ScoreLbl.string="\u5f97\u5206: "+cc.Mgr.UserData.curScore},refreshLife:function(){this.LifeLbl.string="\u751f\u547d: "+cc.Mgr.UserData.LifeNum}});t.exports=c,cc._RF.pop()},{}],UserData:[function(e,t,i){"use strict";cc._RF.push(t,"43e0bs8Xs9J1KNtHsvNFPco","UserData");var c=cc.Class({extends:cc.Component,properties:{LifeNum:cc.Integer,PlayTimes:cc.Integer,HighScore:cc.Integer,curScore:cc.Integer},initData:function(){this.LifeNum=3,this.PlayTimes=0,this.curScore=0,cc.log("\u8349\u6ce5\u9a6c\u7684\u6570\u503c = "+cc.sys.localStorage.getItem("yb_highscore")),null!=cc.sys.localStorage.getItem("yb_highscore")?this.HighScore=cc.sys.localStorage.getItem("yb_highscore"):this.HighScore=0,null!=cc.sys.localStorage.getItem("yb_playtimes")?this.PlayTimes=cc.sys.localStorage.getItem("yb_playtimes"):this.PlayTimes=0},AddPlayTimes:function(){this.PlayTimes+=1},getPlayTimes:function(){return this.PlayTimes},getHighScore:function(){return this.HighScore},refreshHighScore:function(e){e>this.HighScore&&(this.HighScore=e)},addCurScore:function(e){this.curScore+=e},addCurLife:function(){this.LifeNum+=1},SaveData:function(){cc.sys.localStorage.setItem("yb_highscore",this.HighScore),cc.sys.localStorage.setItem("yb_playtimes",this.PlayTimes)}});t.exports=c,cc._RF.pop()},{}]},{},["AudioMgr","DIR","FollowPlayer","Food","FoodType","GameController","GameMode","GameState","GlobalData","Player","PlayerState","Sky","SkyType","UIMgr","UserData"]);