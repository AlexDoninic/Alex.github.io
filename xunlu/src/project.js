window.__require=function e(t,o,i){function s(n,r){if(!o[n]){if(!t[n]){var c=n.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+n+"'")}}var h=o[n]={exports:{}};t[n][0].call(h.exports,function(e){return s(t[n][1][e]||e)},h,h.exports,e,t,o,i)}return o[n].exports}for(var a="function"==typeof __require&&__require,n=0;n<i.length;n++)s(i[n]);return s}({AdsMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f5d07bLhSRFwpkOfkwHMju/","AdsMgr");var i=e("AdsParam"),s=cc.Class({statics:{platform:"wx",wxAppId:"",bdAppId:"",ttAppId:"",bannerId_baidu:"",bannerId_wx:"",bannerId_tt:"",bdVideoId_1:"",bdVideoId_2:"",bdVideoId_3:"",bdVideoId_4:"",bdVideoId_5:"",bdVideoId_6:"",bdVideoId_7:"",bdVideoId_8:"",bdVideoId_9:"",bdVideoId_10:"",wxVideoId_1:"",wxVideoId_2:"",wxVideoId_3:"",wxVideoId_4:"",wxVideoId_5:"",wxVideoId_6:"",wxVideoId_7:"",wxVideoId_8:"",wxVideoId_9:"",wxVideoId_10:"",ttVideoId_1:"",ttVideoId_2:"",ttVideoId_3:"",ttVideoId_4:"",ttVideoId_5:"",ttVideoId_6:"",ttVideoId_7:"",ttVideoId_8:"",ttVideoId_9:"",ttVideoId_10:"",allScreen:!1,Init:function(){window.wx||window.tt||window.swan||(this.platform="pc"),this.allScreen=!1},getBannerAdId:function(){return"wx"==this.platform?this.bannerId_wx:"baidu"==this.platform?this.bannerId_baidu:"tt"==this.platform?this.bannerId_tt:null},getVideoAdId:function(e){var t;if("wx"==this.platform)switch(e){case i.PointA:t=this.wxVideoId_1;break;case i.PointB:t=this.wxVideoId_2;break;case i.PointC:t=this.wxVideoId_3;break;case i.PointD:t=this.wxVideoId_4;break;case i.PointE:t=this.wxVideoId_5;break;case i.PointF:t=this.wxVideoId_6;break;case i.PointG:t=this.wxVideoId_7;break;case i.PointH:t=this.wxVideoId_8;break;case i.PointI:t=this.wxVideoId_9;break;case i.PointJ:t=this.wxVideoId_10}else if("baidu"==this.platform)switch(e){case i.PointA:t=this.bdVideoId_1;break;case i.PointB:t=this.bdVideoId_2;break;case i.PointC:t=this.bdVideoId_3;break;case i.PointD:t=this.bdVideoId_4;break;case i.PointE:t=this.bdVideoId_5;break;case i.PointF:t=this.bdVideoId_6;break;case i.PointG:t=this.bdVideoId_7;break;case i.PointH:t=this.bdVideoId_8;break;case i.PointI:t=this.bdVideoId_9;break;case i.PointJ:t=this.bdVideoId_10}else if("tt"==this.platform)switch(e){case i.PointA:t=this.ttVideoId_1;break;case i.PointB:t=this.ttVideoId_2;break;case i.PointC:t=this.ttVideoId_3;break;case i.PointD:t=this.ttVideoId_4;break;case i.PointE:t=this.ttVideoId_5;break;case i.PointF:t=this.ttVideoId_6;break;case i.PointG:t=this.ttVideoId_7;break;case i.PointH:t=this.ttVideoId_8;break;case i.PointI:t=this.ttVideoId_9;break;case i.PointJ:t=this.ttVideoId_10}return t},ShowBannerAds:function(){var e=this;if("wx"==this.platform){null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var t={};t.W=wx.getSystemInfoSync().windowWidth,t.H=wx.getSystemInfoSync().windowHeight;var o=0;o=this.allScreen?t.W:300,this.bannerAdCtrl=wx.createBannerAd({adUnitId:this.getBannerAdId(),style:{left:0,top:0,width:o}}),this.bannerAdCtrl.onResize(function(o){console.log("\u91cd\u7f6e\u5e7f\u544a\u5bbd\u5ea6 "+t.H+" , "+e.bannerAdCtrl.style.realHeight),e.bannerAdCtrl.style.top=t.H-e.bannerAdCtrl.style.realHeight,e.bannerAdCtrl.style.left=(t.W-e.bannerAdCtrl.style.realWidth)/2,e.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(e){console.log(e)}),console.log("\u663e\u793a\u5e7f\u544a")}else if("baidu"==this.platform){if("ios"==swan.getSystemInfoSync().platform)return;null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var i={};i.W=swan.getSystemInfoSync().windowWidth,i.H=swan.getSystemInfoSync().windowHeight,console.log("\u767e\u5ea6\u7684 bannerId = "+this.getBannerAdId()),this.bannerAdCtrl=swan.createBannerAd({adUnitId:this.getBannerAdId(),appSid:"c0fb407f",style:{left:0,top:0,width:321}}),this.allScreen?e.bannerAdCtrl.style.width=i.H:e.bannerAdCtrl.style.width=300,this.bannerAdCtrl.onResize(function(t){console.log("\u91cd\u7f6e\u5e7f\u544a\u5bbd\u5ea6 "),e.bannerAdCtrl.style.top=i.H-t.height,e.bannerAdCtrl.style.left=(i.W-t.width)/2,e.bannerAdCtrl.show()}),this.bannerAdCtrl.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210"),e.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(e){console.log(e)}),console.log("\u663e\u793a\u5e7f\u544a")}else if("tt"==this.platform){null!=this.bannerAdCtrl&&this.bannerAdCtrl.destroy();var s={};s.W=tt.getSystemInfoSync().windowWidth,s.H=tt.getSystemInfoSync().windowHeight,console.log("\u5934\u6761 bannerId = "+this.getBannerAdId()),this.bannerAdCtrl=tt.createBannerAd({adUnitId:this.getBannerAdId(),style:{left:0,top:0,width:321}}),this.allScreen?e.bannerAdCtrl.style.width=s.H:e.bannerAdCtrl.style.width=300,this.bannerAdCtrl.onResize(function(t){console.log("\u91cd\u7f6e\u5e7f\u544a\u5bbd\u5ea6 "),e.bannerAdCtrl.style.top=s.H-t.height,e.bannerAdCtrl.style.left=(s.W-t.width)/2,e.bannerAdCtrl.show()}),this.bannerAdCtrl.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210"),e.bannerAdCtrl.show()}),this.bannerAdCtrl.onError(function(e){console.log(e)}),console.log("\u663e\u793a\u5e7f\u544a")}},ShowVideoAds:function(e,t){var o=this;if(this.cb=null,this.cb=t,"wx"==this.platform){console.log("\u5fae\u4fe1\u7684\u89c6\u9891\u5e7f\u544a  "+this.getVideoAdId(e));var i=wx.createRewardedVideoAd({adUnitId:this.getVideoAdId(e)});i.load().then(function(){return i.show()}).catch(function(e){return console.log(e.errMsg)}),i.onError(function(e){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+e.errMsg),o.cb(-1)}),i.onLoad(function(){console.log("\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),i.onClose(function(e){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+e.isEnded),o.cb(e.isEnded?0:1),i.offLoad(),i.offError(),i.offClose()})}else if("baidu"==this.platform){console.log("\u767e\u5ea6\u7684\u89c6\u9891\u5e7f\u544a  "+this.getVideoAdId(e));var s=swan.createRewardedVideoAd({adUnitId:this.getVideoAdId(e),appSid:"ad8b61de"});s.load().then(function(){return s.show()}).catch(function(e){return console.log(e.errMsg)}),s.onError(function(e){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+e.errMsg),o.cb(-1)}),s.onLoad(function(){console.log("\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),s.onClose(function(e){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+e.isEnded),o.cb(e.isEnded?0:1),s.offLoad(),s.offError(),s.offClose()})}else if("tt"==this.platform){console.log("\u5934\u6761\u7684\u89c6\u9891\u5e7f\u544a  "+this.getVideoAdId(e));var a=tt.createRewardedVideoAd({adUnitId:this.getVideoAdId(e)});a.load().then(function(){return a.show()}).catch(function(e){return console.log(e.errMsg)}),a.onError(function(e){console.log("\u5e7f\u544a\u52a0\u8f7d\u51fa\u9519 "+e.errMsg),o.cb(-1)}),a.onLoad(function(){console.log("\u52a0\u8f7d\u4e8b\u4ef6\u56de\u8c03")}),a.onClose(function(e){console.log("\u662f\u5426\u89c2\u770b\u5b8c\u6574\u4e86 "+e.isEnded),o.cb(e.isEnded?0:1),a.offLoad(),a.offError(),a.offClose()})}else this.cb(0)}}});t.exports=s,cc._RF.pop()},{AdsParam:"AdsParam"}],AdsParam:[function(e,t,o){"use strict";cc._RF.push(t,"0e2c1Mqx69BDIpK5wM6z6HA","AdsParam");var i=cc.Enum({PointA:1,PointB:2,PointC:3,PointD:4,PointE:5,PointF:6,PointG:7,PointH:8,PointI:9,PointJ:10});t.exports=i,cc._RF.pop()},{}],AppStart:[function(e,t,o){"use strict";function i(){cc.Mgr={},cc.Mgr.InitAll=!1;var t=e("AudioMgr");cc.Mgr.AudioMgr=new t,cc.Mgr.AudioMgr.init(),cc.Mgr.Global=e("Global"),cc.Mgr.Global.InitData(),cc.Mgr.Utils=e("Utils");var o=e("DataMapMgr");cc.Mgr.DataMapMgr=new o,cc.Mgr.DataMapMgr.InitMaps();var i=e("UserData");cc.Mgr.UserData=new i,cc.Mgr.AdsMgr=e("AdsMgr"),cc.Mgr.AdsMgr.Init(),cc.Mgr.ShareInfos=e("ShareInfos"),cc.Mgr.ShareInfos.init(),cc.Mgr.PlatformController=e("PlatformController"),cc.Mgr.PlatformController.Init()}cc._RF.push(t,"1857aBD2CxP8r6kveq+KWQN","AppStart");var s=e("UIMgr");cc.Class({extends:cc.Component,properties:{uiMgr:s},onLoad:function(){i();var e=this;cc.director.on("DecoderMapsEnd",function(t){cc.Mgr.Global.RefreshBonusData(),cc.Mgr.UserData.initData(),cc.Mgr.PlatformController.setUserCloudStorage(cc.Mgr.UserData.getHighScore()),e.RefreshUI(),cc.Mgr.InitAll=!0}),cc.Mgr.Utils.GetSysTime()},RefreshUI:function(){this.uiMgr.RefreshUI()},start:function(){cc.Mgr.Global.InitRewardLifeTime(),cc.Mgr.PlatformController.ShareTopNav(),cc.Mgr.AudioMgr.playBGM("bgm"),cc.Mgr.AdsMgr.ShowBannerAds(),cc.Mgr.UserData.InitChooseMapLv()}}),cc._RF.pop()},{AdsMgr:"AdsMgr",AudioMgr:"AudioMgr",DataMapMgr:"DataMapMgr",Global:"Global",PlatformController:"PlatformController",ShareInfos:"ShareInfos",UIMgr:"UIMgr",UserData:"UserData",Utils:"Utils"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"fb34faItr9BNo7ofM1Dk7Xd","AudioMgr");var i=cc.Class({extends:cc.Component,properties:{bgmVolume:.5,sfxVolume:.5,bgmAudioID:-1,sfxAudioID:-1,musicState:1,voiceState:1},init:function(){var e;cc.Mgr.loadSound=!1,null!=(e=cc.sys.localStorage.getItem("bgmVolume"))&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/sound/"+e+".mp3")},playBGM:function(e){var t=this.getUrl(e);this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){if(0!=this.voiceState){var t=this.getUrl(e);cc.audioEngine.play(t,!1,this.sfxVolume)}},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},setBGMVolume:function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){this.musicState=0,this.voiceState=0,this.bgmVolume=0,this.sfxVolume=0,cc.audioEngine.pauseAll()},resumeAll:function(){this.musicState=1,this.voiceState=1,this.bgmVolume=.5,this.sfxVolume=.5,cc.audioEngine.resumeAll()},pauseMusic:function(){this.musicState=0,this.bgmVolume=0,this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},resumeMusic:function(){this.musicState=1,this.bgmVolume=.5,this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},pauseVoice:function(){this.voiceState=0,this.sfxVolume=0},resumeVoice:function(){this.voiceState=1,this.sfxVolume=.5},getMusicState:function(){return this.musicState},getVoiceState:function(){return this.voiceState}});t.exports=i,cc._RF.pop()},{}],BirdVoiceCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"36f07eHlpBG9qlBA2oJXPCk","BirdVoiceCtrl");var i=cc.Class({extends:cc.Component,properties:{AudioCtrl:cc.AudioSource,audioClip_1:{default:null,type:cc.AudioClip},audioClip_2:{default:null,type:cc.AudioClip},lastClip:2},SetData:function(){this.AudioCtrl.volume=.5,this.AudioCtrl.loop=!1},Stop:function(){this.AudioCtrl.volume=0},Resume:function(){this.AudioCtrl.volume=.5},start:function(){this.SetData(),this.schedule(function(){2==this.lastClip?(this.lastClip=1,this.AudioCtrl.clip=this.audioClip_1):(this.lastClip=2,this.AudioCtrl.clip=this.audioClip_2),this.AudioCtrl.play()},15)}});t.exports=i,cc._RF.pop()},{}],BonusType:[function(e,t,o){"use strict";cc._RF.push(t,"dce32AyQ3VKZZwIkBNZ99k4","BonusType");var i=cc.Enum({CoinBonus:1,DiamondBonus:2});t.exports=i,cc._RF.pop()},{}],BoxSubType:[function(e,t,o){"use strict";cc._RF.push(t,"f3c229oLZZKVpqJaguMraXu","BoxSubType");var i=cc.Enum({NULL:0,Mechanic:5,MechanicStone:6,Seed:10,Target:11});t.exports=i,cc._RF.pop()},{}],BoxType:[function(e,t,o){"use strict";cc._RF.push(t,"bc8b6hIS/lE0Jme8iyOdg5h","BoxType");var i=cc.Enum({Blank:0,Normal:1,Stone:2,Bubble:3,Flower:4,Aim:6,Mine:7});t.exports=i,cc._RF.pop()},{}],Box:[function(e,t,o){"use strict";cc._RF.push(t,"1e540AdGGFIb7sRN89LEHE/","Box");var i=e("BoxType"),s=e("BoxSubType"),a=e("Global"),n=e("DIR"),r=cc.Class({extends:cc.Component,properties:{flagNum:1,boxType:{default:i.Blank,type:i},subType:{default:s.NULL,type:s},ContentNode:cc.Node,ContentNodes:[cc.Node],RoleNodes:[cc.Node],targetNodes:[cc.Node],JiGuanNodes:[cc.Node],coinNode:cc.Node,seedNode:cc.Node,JiGuanStoneNode:cc.Node,exploreNode:cc.Node,boxAnima:cc.Animation,flowerBornAni:cc.Animation,effectAnima:cc.Animation,moveAnima:cc.Animation,MechanicStoneUp:!1,gameCtrl:null},start:function(){var e=this;cc.director.on("MoveRoleBox",function(t){if(t.DIR==n.LEFT)for(var o=0;o<e.RoleNodes.length;o++)e.RoleNodes[o].scaleX=-.7;else if(t.DIR==n.RIGHT)for(o=0;o<e.RoleNodes.length;o++)e.RoleNodes[o].scaleX=.7}),cc.director.on("StandOnMechanic",function(t){e.subType==s.MechanicStone&&e.SlowDownMechanicStone()}),cc.director.on("MechanicStoneMoveUp",function(t){e.subType==s.MechanicStone&&e.boxType==i.Blank&&e.RaiseUpMechanicStone()})},InitBox:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.NULL,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.gameCtrl=null,this.gameCtrl=a,this.HideLastContentNode(!0),this.HideTargetNodes(),this.HideSubNodes(),this.flagNum=o,this.subType=i,this.posX=e,this.posY=t,this.ContentNode.setPosition(0,0),this.coinNode.active=!1,this.seedNode.active=!1,this.subType==s.MechanicStone?this.MechanicStoneUp=!0:this.MechanicStoneUp=!1,this.ShowSubNodes(),this.RefreshBoxType()},HideTargetNodes:function(){for(var e=this.targetNodes.length-1;e>=0;e--)this.targetNodes[e].active=!1},RefreshBoxInit:function(){this.HideLastContentNode(),this.flagNum=0,this.ContentNode.setPosition(0,0),this.RefreshBoxType(),this.coinNode.active=!1,this.seedNode.active=!1},RefreshToBoxLastStep:function(e){this.HideLastContentNode(),this.flagNum=e.flagNum,this.ContentNode.setPosition(0,0),this.RefreshBoxType(),this.coinNode.active=e.showCoin,this.seedNode.active=e.showSeed},RefreshBoxFlagNum:function(e){this.HideLastContentNode(),this.flagNum=e,this.ContentNode.setPosition(0,0),this.RefreshBoxType()},RefreshBox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.NULL;if(this.HideLastContentNode(),this.flagNum=e.flagNum,this.flagNum!=i.Blank&&t!=n.NULL){var o=0,r=0;t==n.LEFT?o=80:t==n.RIGHT?o=-80:t==n.UP?r=-80:t==n.DOWN&&(r=80),this.ContentNode.setPosition(o,r)}else this.flagNum!=i.Blank&&t!=n.NULL||this.ContentNode.setPosition(0,0);if(this.RefreshBoxType(),this.boxType!=i.Blank&&t!=n.NULL){t==n.LEFT?this.moveAnima.play("boxmoveL"):t==n.RIGHT?this.moveAnima.play("boxmoveR"):t==n.UP?this.moveAnima.play("boxmoveU"):t==n.DOWN&&this.moveAnima.play("boxmoveD")}this.subType==s.MechanicStone&&0==this.MechanicStoneUp?null!=this.gameCtrl&&0==this.gameCtrl.CheckJiGuanBeStand()&&cc.director.emit("MechanicStoneMoveUp",{}):this.subType==s.Mechanic&&this.boxType==i.Blank&&null!=this.gameCtrl&&0==this.gameCtrl.CheckJiGuanBeStand()&&cc.director.emit("MechanicStoneMoveUp",{}),1==this.coinNode.active?(this.coinNode.active=!1,this.effectAnima.node.active=!0,this.effectAnima.play("coinEffect"),cc.Mgr.AudioMgr.playSFX("coin"),cc.director.emit("AddGameScore",{})):1==this.seedNode.active&&(cc.log("\u79cd\u5b50\u4eae\u8d77\u7684\u7684 \u9700\u8981\u7f6e\u9ed1  this.boxType = "+this.boxType),this.boxType==i.Blank||this.boxType==i.Normal?(this.seedNode.active=!1,this.subType=s.NULL,this.boxType==i.Blank&&(this.flagNum=i.Flower,this.RefreshBoxType(),this.flowerBornAni.play(),1==cc.Mgr.Global.GameType&&this.scheduleOnce(function(){cc.director.emit("CheckCanMoveAllDir",{})},a.WaitCheckCanMoveAllDir))):this.boxType==i.Mine&&cc.log("\u79cd\u5b50\u4eae\u8d77\u7684\u7684 \u4e0d\u9700\u8981\u7f6e\u9ed1  this.boxType = "+this.boxType))},IsMechanicStoneActive:function(){return 1==this.JiGuanStoneNode.active},IsMechanicStoneUp:function(){return!(1!=this.JiGuanStoneNode.active||!this.MechanicStoneUp)},IsMechanicStoneDown:function(){return 1==this.JiGuanStoneNode.active&&0==this.MechanicStoneUp},SlowDownMechanicStone:function(){var e=cc.sequence(cc.moveTo(.05,0,-15),cc.callFunc(function(){this.MechanicStoneUp=!1,cc.director.emit("SetPlayState",{})},this));this.JiGuanStoneNode.runAction(e)},RaiseUpMechanicStone:function(){this.MechanicStoneUp=!0,this.scheduleOnce(function(){var e=cc.sequence(cc.moveTo(.05,0,0),cc.callFunc(function(){cc.log("\u8d77\u6765")},this));this.JiGuanStoneNode.runAction(e)},.15)},RefreshBoxType:function(){this.flagNum<=9&&this.flagNum>=7?(this.boxType=i.Mine,this.RoleNodes[0].active=!0):(2==this.flagNum?this.boxType=i.Stone:1==this.flagNum?this.boxType=i.Normal:3==this.flagNum?this.boxType=i.Bubble:4==this.flagNum?this.boxType=i.Flower:0==this.flagNum&&(this.boxType=i.Blank),this.ContentNodes[this.flagNum].active=!0)},HideLastContentNode:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.flagNum<=9&&this.flagNum>=7?this.RoleNodes[0].active=!1:e?this.ContentNodes[this.flagNum].active=!1:this.subType==s.Target||this.subType==s.Mechanic||this.subType==s.MechanicStone||(this.ContentNodes[this.flagNum].active=!1)},ShowSubNodes:function(){this.subType==s.Mechanic?this.JiGuanNodes[1].active=!0:this.subType==s.MechanicStone?this.JiGuanStoneNode.active=!0:this.subType==s.Seed?this.seedNode.active=!0:this.subType==s.Target&&(this.targetNodes[0].active=!0)},HideSubNodes:function(){this.JiGuanNodes[1].active=!1,this.JiGuanStoneNode.active=!1,this.seedNode.active=!1,this.targetNodes[0].active=!1},PlayAnimation:function(e){"boxblink"==e&&this.setContentScale(1.1),this.boxAnima.play(e)},setContentScale:function(e){this.ContentNode.setScale(e)},DisShow:function(){this.RefreshBoxInit(),this.setContentScale(1),cc.director.emit("SetPlayState",{}),this.coinNode.active=!0},SpwanCoinNode:function(){this.RefreshBoxInit(),this.coinNode.active=!0},SpwanSeedNode:function(){this.RefreshBoxInit(),this.boxType=i.Seed,this.seedNode.active=!0},UseBoomSkill:function(){cc.Mgr.Global.checkPos[0]!=this.posX||cc.Mgr.Global.checkPos[1]!=this.posY?1==cc.Mgr.Global.UseSkillState&&(this.exploreNode.active=!0,this.boxAnima.play("explore"),cc.director.emit("UseBoomSkillEnd",{})):cc.log("\u4f60\u600e\u4e48\u80fd\u70b9\u51fb\u73a9\u5bb6\u8282\u70b9\u5462")},EndExplore:function(){this.RefreshBoxInit(),this.coinNode.active=!1,this.exploreNode.active=!1},IsCoinNodeActive:function(){return 1==this.coinNode.active},IsSeedNodeActive:function(){return 1==this.seedNode.active},IsTargetObjActive:function(){return 1==this.targetNodes[0].active},IsStandAtJiGuan:function(){return this.subType==s.Mechanic},PlayAction:function(){}});t.exports=r,cc._RF.pop()},{BoxSubType:"BoxSubType",BoxType:"BoxType",DIR:"DIR",Global:"Global"}],BuyBoomPanel:[function(e,t,o){"use strict";cc._RF.push(t,"f5d8f2wshRJk55Sday2RNXP","BuyBoomPanel");var i=cc.Class({extends:cc.Component,properties:{coinNumLbl:cc.Label,btnBgSp:cc.Sprite,Atlas:cc.SpriteAtlas},ShowPanel:function(){var e=cc.Mgr.UserData.getCoinNum();this.coinNumLbl.string=e,e>cc.Mgr.Global.BoomCost?this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_1"):this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_2")},ClosePanel:function(){this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],CoinEffect:[function(e,t,o){"use strict";cc._RF.push(t,"ec112Fg+QFEj7xH+P5yfcN1","CoinEffect");var i=cc.Class({extends:cc.Component,properties:{EffectNode:cc.Node},EndCoinEffect:function(){this.EffectNode.active=!1}});t.exports=i,cc._RF.pop()},{}],CommonTipPanel:[function(e,t,o){"use strict";cc._RF.push(t,"06394t6pTdPzrm3EZQkpRCk","CommonTipPanel");var i=cc.Class({extends:cc.Component,properties:{TipDesLbl:cc.Label},ShowPanel:function(e){this.TipDesLbl.string=e},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],CurUseData:[function(e,t,o){"use strict";cc._RF.push(t,"25a22U7aqFFwb0TM9POlqqf","CurUseData");var i=cc.Enum({});t.exports=i,cc._RF.pop()},{}],DIR:[function(e,t,o){"use strict";cc._RF.push(t,"151a1l9fORPRKWDH7vY769o","DIR");var i=cc.Enum({LEFT:1,RIGHT:2,UP:3,DOWN:4,NULL:5});t.exports=i,cc._RF.pop()},{}],DataMapMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ea360DSHMNHw79ZbQP7komE","DataMapMgr");var i=e("SkinMap"),s=e("LevelMap"),a=e("DataType"),n=cc.Class({extends:cc.Component,properties:{skinMap:null},InitMaps:function(e){this.skinMap=new i,this.levelMap=new s;var t=this;this.decodeAll=0,this.skinMap.DecodeJson(function(e){e&&(t.decodeAll+=50,100==t.decodeAll&&cc.director.emit("DecoderMapsEnd",{}))}),this.levelMap.DecodeJson(function(e){e&&(cc.log("\u6b63\u786e\u89e3\u6790\u5566 Level"),t.decodeAll+=50,100==t.decodeAll&&cc.director.emit("DecoderMapsEnd",{}))})},getDataByDataTypeAndId:function(e,t){var o=null;switch(e){case a.Skin:o=this.skinMap.getDataById(t);break;case a.Level:o=this.levelMap.getDataById(t)}return o},getDataListLengthByDataType:function(e){var t=0;switch(e){case a.Skin:t=this.skinMap.getJsonLength()}return t},getDataListByDataType:function(e){var t=0;switch(e){case a.Skin:t=this.skinMap.getDataList()}return t}});t.exports=n,cc._RF.pop()},{DataType:"DataType",LevelMap:"LevelMap",SkinMap:"SkinMap"}],DataType:[function(e,t,o){"use strict";cc._RF.push(t,"78fc2emXFlO7LF5tmlnAtzw","DataType");var i=cc.Enum({Skin:1,Level:2});t.exports=i,cc._RF.pop()},{}],DiamondPanel:[function(e,t,o){"use strict";cc._RF.push(t,"16cb1U33K5NiLLVQ5VdoEsb","DiamondPanel");var i=cc.Class({extends:cc.Component,properties:{startUiNode:cc.Node,Atlas:cc.SpriteAtlas,Icon:cc.Sprite},ShowPanel:function(e){this.Icon.spriteFrame=this.Atlas.getSpriteFrame("target_"+e)},ClosePanel:function(){0==this.startUiNode.active&&cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"1d84cMbAEBN570AMd9CemLg","GameController");e("Box");var i=e("DIR"),s=e("Global"),a=e("UIScore"),n=e("DataType"),r=e("GameState"),c=e("BoxType"),l=e("BoxSubType"),h=cc.Class({extends:cc.Component,properties:{colsNum:7,rowsNum:7,parentNode:cc.Node,playerFlagNum:10,gameState:{default:r.Play,type:r},checkPos:{default:[],type:[cc.Integer]},uiScore:a,uiOverNode:cc.Node},onLoad:function(){var e=this.parentNode.children;this.boxMap=new Array(this.rowsNum);for(var t=0;t<this.rowsNum;t++){for(var o=new Array(this.colsNum),i=0;i<this.colsNum;i++){var s=t*this.colsNum+i;o[i]=e[s].getComponent("Box")}this.boxMap[t]=o}this.addListeners();var a=this;cc.director.on("SetPlayState",function(e){a.gameState=r.Play}),cc.director.on("UseSkin",function(e){a.RefreshCheckBoxFlagNum()}),cc.director.on("CheckCanMoveAllDir",function(e){a.CheckCanDispelAfterSpwan()})},RefreshCheckBoxFlagNum:function(){this.boxMap[this.checkPos[0]][this.checkPos[1]].RefreshBoxFlagNum(cc.Mgr.UserData.getCurSkinId()),cc.Mgr.UserData.RefreshBoxMapRem(this.checkPos[0],this.checkPos[1],cc.Mgr.UserData.getCurSkinId(),!1,!1)},SaveReBoxMapData:function(){},ReturnOneStep:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++){var o=cc.Mgr.UserData.GetReBoxParam(e,t);if(this.boxMap[e][t].RefreshToBoxLastStep(o),this.boxMap[e][t].boxType==c.Mine){var i={};i.x=e,i.y=t,this.refreshCheckPos(i)}}},StartGameUseProgressData:function(){this.playerFlagNum=cc.Mgr.UserData.getCurSkinId(),this.RefreshLayOutUseProgress()},RefreshLayOutUseProgress:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++)this.boxMap[e][t].InitBox(e,t,0,0,this);var o=cc.Mgr.UserData.GetReBoxMapUnNullLength(),i=o.length-1,s=0;this.schedule(function(){cc.Mgr.AudioMgr.playSFX("du");var e=o[s].posX,t=o[s].posY,a=cc.Mgr.UserData.GetReBoxParam(e,t);if(this.boxMap[e][t].PlayAnimation("boxspwan"),this.boxMap[e][t].RefreshToBoxLastStep(a),this.boxMap[e][t].boxType==c.Mine){var n={};n.x=e,n.y=t,this.refreshCheckPos(n)}s==i&&(this.gameState=r.Play),s+=1},.15,i,.5)},StartGame:function(){this.playerFlagNum=cc.Mgr.UserData.getCurSkinId(),cc.Mgr.UserData.IsTutorialOver()?this.RefreshLayOut():this.RefreshLayOutForTutorial()},ReStartGame:function(){this.playerFlagNum=cc.Mgr.UserData.getCurSkinId(),this.RefreshLayOut()},OffTouchEventListener:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouched,this)},AddTouchEventListener:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},addListeners:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKey,this)},ClearBoard:function(){for(var e=this.rowsNum-1;e>=0;e--)for(var t=0;t<this.colsNum;t++)this.boxMap[e][t].RefreshBoxInit()},checkGameOver:function(){var e=this.checkCanMove(i.LEFT),t=this.checkCanMove(i.RIGHT),o=this.checkCanMove(i.UP),a=this.checkCanMove(i.DOWN);0==e.canMove&&0==t.canMove&&0==o.canMove&&0==a.canMove&&(cc.Mgr.AudioMgr.playSFX("di"),this.PlayScaleAnima(),cc.Mgr.UserData.ClearReBoxMap(),this.gameState=r.Over,this.scheduleOnce(function(){cc.director.emit("ShowOver",{})},s.WaitShowGameOver))},PlayScaleAnima:function(){for(var e=this.rowsNum-1;e>=0;e--)for(var t=this.colsNum-1;t>=0;t--)this.boxMap[e][t].boxType!=c.Blank&&this.boxMap[e][t].PlayAnimation("boxScale")},RefreshLevelMapLayOut:function(){var e=cc.Mgr.UserData.getFinishLv();cc.Mgr.UserData.AddChooseMapLv();for(var t=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(n.Level,e+1),o=t.tiles.length-1;o>=0;o--){var i=Math.floor(o/this.colsNum),s=o%this.colsNum;this.boxMap[i][s].InitBox(i,s,t.tiles[o].boxType,t.tiles[o].subType,this),t.tiles[o].boxType==c.Mine&&(this.checkPos[0]=i,this.checkPos[1]=s,cc.Mgr.Global.setCheckPos(i,s))}this.gameState=r.Play,this.uiScore.RefreshMapLvLbl()},RefreshLayOut:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++)this.boxMap[e][t].InitBox(e,t,c.Blank,0,this);if(1==s.GameType){var o=this.getArrayByItems(this.rowsNum*this.colsNum,10),i=0;Math.floor(9*Math.random());this.schedule(function(){var e=Math.floor(o[i]/this.colsNum),t=o[i]%this.colsNum;cc.log("\u884c = "+e+"   \u5217 = "+t),cc.Mgr.AudioMgr.playSFX("du"),this.boxMap[e][t].PlayAnimation("boxspwan"),9==i?(this.boxMap[e][t].InitBox(e,t,this.playerFlagNum,0,this),this.checkPos[0]=e,this.checkPos[1]=t,cc.Mgr.Global.setCheckPos(e,t),this.gameState=r.Play):this.boxMap[e][t].InitBox(e,t,1,0,this),i+=1},.15,9,.5)}else if(2==s.GameType){cc.Mgr.Global.hasAnyStandOnJiaGuan=!1;var a=cc.Mgr.UserData.getFinishLv(),l=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(n.Level,a+1);for(e=l.tiles.length-1;e>=0;e--){var h=Math.floor(e/this.colsNum),u=e%this.colsNum;this.boxMap[h][u].InitBox(h,u,l.tiles[e].boxType,l.tiles[e].subType,this),l.tiles[e].boxType==c.Mine&&(this.checkPos[0]=h,this.checkPos[1]=u,cc.Mgr.Global.setCheckPos(h,u))}this.gameState=r.Play}},RefreshLayOutForTutorial:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++)this.boxMap[e][t].InitBox(e,t,0,0,this);if(1==s.GameType){var o=[20,8,23,10,21,24,14,7,4,2],i=0;this.schedule(function(){var e=Math.floor(o[i]/this.colsNum),t=o[i]%this.colsNum;cc.log("\u884c = "+e+"   \u5217 = "+t),cc.Mgr.AudioMgr.playSFX("du"),this.boxMap[e][t].PlayAnimation("boxspwan"),9==i?(this.boxMap[e][t].InitBox(e,t,this.playerFlagNum,0,this),this.checkPos[0]=e,this.checkPos[1]=t,cc.Mgr.Global.setCheckPos(e,t),this.gameState=r.Play):this.boxMap[e][t].InitBox(e,t,1,0,this),i+=1},.15,9,.5)}else if(2==s.GameType){var a=cc.Mgr.UserData.getFinishLv(),l=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(n.Level,a+1);for(e=l.tiles.length-1;e>=0;e--){var h=Math.floor(e/this.colsNum),u=e%this.colsNum;this.boxMap[h][u].InitBox(h,u,l.tiles[e].boxType,l.tiles[e].subType,this),l.tiles[e].boxType==c.Mine&&(this.checkPos[0]=h,this.checkPos[1]=u,cc.Mgr.Global.setCheckPos(h,u))}this.gameState=r.Play}},getArrayByItems:function(e,t){for(var o=new Array,i=0;i<e;i++)o.push(i);for(var s=new Array,a=0;a<t&&o.length>0;a++){var n=Math.floor(Math.random()*o.length);s[a]=o[n],o.splice(n,1)}return s},checkCanMove:function(e){var t={canMove:!0,indexList:[]};if(e==i.LEFT){if(0==this.checkPos[1])return t.canMove=!1,t;for(var o=this.checkPos[1]-1;o>=0&&(this.boxMap[this.checkPos[0]][o].boxType!=c.Stone&&this.boxMap[this.checkPos[0]][o].boxType!=c.Flower&&this.boxMap[this.checkPos[0]][o].boxType!=c.Bubble&&!this.boxMap[this.checkPos[0]][o].IsMechanicStoneUp());o--)(this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].boxType==c.Seed||this.boxMap[this.checkPos[0]][o].subType==l.Target&&this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].subType==l.Mechanic&&this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].IsMechanicStoneDown())&&t.indexList.push(o);return 0==t.indexList.length&&(t.canMove=!1),t}if(e==i.RIGHT){if(this.checkPos[1]==this.colsNum-1)return t.canMove=!1,t;for(o=this.checkPos[1]+1;o<=this.colsNum-1&&(this.boxMap[this.checkPos[0]][o].boxType!=c.Stone&&this.boxMap[this.checkPos[0]][o].boxType!=c.Flower&&this.boxMap[this.checkPos[0]][o].boxType!=c.Bubble&&!this.boxMap[this.checkPos[0]][o].IsMechanicStoneUp());o++)(this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].boxType==c.Seed||this.boxMap[this.checkPos[0]][o].subType==l.Target&&this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].subType==l.Mechanic&&this.boxMap[this.checkPos[0]][o].boxType==c.Blank||this.boxMap[this.checkPos[0]][o].IsMechanicStoneDown())&&t.indexList.push(o);return 0==t.indexList.length&&(t.canMove=!1),t}if(e==i.DOWN){if(this.checkPos[0]==this.rowsNum-1)return t.canMove=!1,t;for(o=this.checkPos[0]+1;o<=this.rowsNum-1&&(this.boxMap[o][this.checkPos[1]].boxType!=c.Stone&&this.boxMap[o][this.checkPos[1]].boxType!=c.Flower&&this.boxMap[o][this.checkPos[1]].boxType!=l.Bubble&&!this.boxMap[o][this.checkPos[1]].IsMechanicStoneUp());o++)(this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].boxType==c.Seed||this.boxMap[o][this.checkPos[1]].subType==l.Target&&this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].subType==l.Mechanic&&this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].IsMechanicStoneDown())&&t.indexList.push(o);return 0==t.indexList.length&&(t.canMove=!1),t}if(e==i.UP){if(0==this.checkPos[0])return t.canMove=!1,t;for(o=this.checkPos[0]-1;o>=0&&(this.boxMap[o][this.checkPos[1]].boxType!=c.Stone&&this.boxMap[o][this.checkPos[1]].boxType!=c.Flower&&this.boxMap[o][this.checkPos[1]].boxType!=l.Bubble&&!this.boxMap[o][this.checkPos[1]].IsMechanicStoneUp());o--)(this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].boxType==c.Seed||this.boxMap[o][this.checkPos[1]].subType==l.Target&&this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].subType==l.Mechanic&&this.boxMap[o][this.checkPos[1]].boxType==c.Blank||this.boxMap[o][this.checkPos[1]].IsMechanicStoneDown())&&t.indexList.push(o);return 0==t.indexList.length&&(t.canMove=!1),t}return t},refreshCheckPos:function(e){this.checkPos[0]=e.x,this.checkPos[1]=e.y,cc.Mgr.Global.setCheckPos(e.x,e.y)},getCheckPos:function(){var e={};return e.row=this.checkPos[0],e.col=this.checkPos[1],e},getCheckPosBoxFlagNum:function(){return this.boxMap[this.checkPos[0]][this.checkPos[1]].flagNum},getPosBoxFlagNum:function(e,t){return this.boxMap[e][t].flagNum},getNullRectPos:function(){for(var e=[],t=0;t<this.colsNum;t++)for(var o=0;o<this.rowsNum;o++)if(this.boxMap[o][t].boxType==c.Blank&&0==this.boxMap[o][t].IsCoinNodeActive()&&0==this.boxMap[o][t].IsSeedNodeActive()){var i={};i.row=o,i.col=t,e.push(i)}return e},JudeHasCheckNumNormalBoxInCol:function(e,t){for(var o=0,i=this.rowsNum-1;i>=0;i--)this.boxMap[i][t].boxType==c.Normal&&(o+=1);return o==e},JudeHasCheckNumNormalBoxInRow:function(e,t){for(var o=0,i=this.colsNum-1;i>=0;i--)this.boxMap[t][i].boxType==c.Normal&&(o+=1);return o==e},PickOutNullPosCantDispel:function(e){for(var t=[],o=e.length-1;o>=0;o--){var i=e[o].col,s=e[o].row,a=this.JudeHasCheckNumNormalBoxInRow(this.colsNum-1,s);if(0==this.JudeHasCheckNumNormalBoxInCol(this.rowsNum-1,i)&&0==a){var n={};n.row=s,n.col=i,t.push(n)}}return t},IsPosOnCheckPosWay:function(e){var t=this.getCheckPos();return t.row==e.row||t.col==e.col},PickOutPosOnWayDisFromCheckPos:function(e,t){for(var o=this.getCheckPos(),i=[],s=t.length-1;s>=0;s--)t[s].row+e!=o.row&&t[s].row-e!=o.row&&t[s].col+e!=o.col&&t[s].col-e!=o.col||i.push(t[s]);return i},PickOutNullPosOnCheckPosWay:function(e){for(var t=[],o=e.length-1;o>=0;o--)this.IsPosOnCheckPosWay(e[o])&&t.push(e[o]);return t},SpwanSeedAtBox:function(){this.scheduleOnce(function(){var e=this.getNullRectPos(),t=this.PickOutNullPosCantDispel(e),o=this.PickOutNullPosOnCheckPosWay(t);if(0==e.length)return cc.Mgr.AudioMgr.playSFX("di"),this.gameState=r.Over,cc.Mgr.UserData.ClearReBoxMap(),void cc.director.emit("ShowOver",{});if(cc.Mgr.AudioMgr.playSFX("du"),0==t.length){var i=e[Math.floor(Math.random()*e.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}else if(0==o.length){i=t[Math.floor(Math.random()*t.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}else{if(Math.random()<.9){var s=Math.random();if(s<.5){var a=this.PickOutPosOnWayDisFromCheckPos(2,o);if(0==a.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}else{i=a[Math.floor(Math.random()*a.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}}else if(s<.9){var n=this.PickOutPosOnWayDisFromCheckPos(1,o);if(0==n.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}else{i=n[Math.floor(Math.random()*n.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}}else{var c=this.PickOutPosOnWayDisFromCheckPos(3,o);if(0==c.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}else{i=c[Math.floor(Math.random()*c.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}}}else{i=t[Math.floor(Math.random()*t.length)];this.boxMap[i.row][i.col].SpwanSeedNode()}}},s.WaitSpwanInterval)},SpwanCoinAtBox:function(){this.scheduleOnce(function(){var e=this.getNullRectPos(),t=this.PickOutNullPosCantDispel(e),o=this.PickOutNullPosOnCheckPosWay(t);if(0==e.length)return cc.Mgr.AudioMgr.playSFX("di"),this.gameState=r.Over,cc.Mgr.UserData.ClearReBoxMap(),void cc.director.emit("ShowOver",{});if(cc.Mgr.AudioMgr.playSFX("du"),0==t.length){var i=e[Math.floor(Math.random()*e.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}else if(0==o.length){i=t[Math.floor(Math.random()*t.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}else{if(Math.random()<.9){var s=Math.random();if(s<.5){var a=this.PickOutPosOnWayDisFromCheckPos(2,o);if(0==a.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}else{i=a[Math.floor(Math.random()*a.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}}else if(s<.9){var n=this.PickOutPosOnWayDisFromCheckPos(1,o);if(0==n.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}else{i=n[Math.floor(Math.random()*n.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}}else{var c=this.PickOutPosOnWayDisFromCheckPos(3,o);if(0==c.length){i=o[Math.floor(Math.random()*o.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}else{i=c[Math.floor(Math.random()*c.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}}}else{i=t[Math.floor(Math.random()*t.length)];this.boxMap[i.row][i.col].SpwanCoinNode()}}},s.WaitSpwanInterval)},SpwanNewBox:function(e){var t=this;t.func=e,this.scheduleOnce(function(){var e=this.getNullRectPos(),o=this.PickOutNullPosCantDispel(e),i=this.PickOutNullPosOnCheckPosWay(o),s=this.getRatioSpawnStone();if(0==e.length)return cc.Mgr.AudioMgr.playSFX("di"),this.gameState=r.Over,cc.Mgr.UserData.ClearReBoxMap(),void cc.director.emit("ShowOver",{});if(cc.Mgr.AudioMgr.playSFX("du"),0==o.length){var a=e[Math.floor(Math.random()*e.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}else if(0==i.length){a=o[Math.floor(Math.random()*o.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}else{if(Math.random()<.9){var h=Math.random();if(h<.5){var u=this.PickOutPosOnWayDisFromCheckPos(2,i);if(0==u.length){a=i[Math.floor(Math.random()*i.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}else{a=u[Math.floor(Math.random()*u.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}}else if(h<.9){var d=this.PickOutPosOnWayDisFromCheckPos(1,i);if(0==d.length){a=i[Math.floor(Math.random()*i.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}else{a=d[Math.floor(Math.random()*d.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}}else{var p=this.PickOutPosOnWayDisFromCheckPos(3,i);if(0==p.length){a=i[Math.floor(Math.random()*i.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}else{a=p[Math.floor(Math.random()*p.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}}}else{a=o[Math.floor(Math.random()*o.length)],n={},l=Math.random();n.flagNum=l<s?c.Stone:c.Normal,this.boxMap[a.row][a.col].RefreshBox(n),this.boxMap[a.row][a.col].PlayAnimation("boxspwan")}}t.func()},s.WaitSpwanInterval)},getRatioSpawnStone:function(){var e=cc.Mgr.UserData.getGameLv()-s.SpawnStoneLv,t=s.SpawnStoneInitRatio;return e>0?e/20>t?t:e/20:0},getRatioSpawnSeed:function(){var e=cc.Mgr.UserData.getGameLv()-s.SpawnSeedLv,t=s.SpawnSeedInitRatio;return e>0?e/20>t?t:e/20:0},CheckCanDispelAfterSpwan:function(){this.scheduleOnce(function(){var e=this.CheckCanDispelCol(),t=this.CheckCanDispelRow();if(0==e.length&&0==t.length)this.gameState=r.Play,this.checkGameOver();else{if(cc.Mgr.AudioMgr.playSFX("Crush"),cc.Mgr.PlatformController.QuakeScreen(!0),0!=e.length)for(var o=e.length-1;o>=0;o--)for(var i=this.rowsNum-1;i>=0;i--)this.boxMap[i][e[o]].boxType==c.Stone?s.DispelStoneScore:s.DispelNormalScore,this.boxMap[i][e[o]].PlayAnimation("boxblink");if(0!=t.length)for(o=t.length-1;o>=0;o--)for(i=this.colsNum-1;i>=0;i--)this.boxMap[t[o]][i].boxType==c.Stone?s.DispelStoneScore:s.DispelNormalScore,this.boxMap[t[o]][i].PlayAnimation("boxblink")}},s.WaitDispelInterval)},DoDispelOperate:function(){cc.Mgr.AudioMgr.playSFX("box"),this.scheduleOnce(function(){var e=this.CheckCanDispelCol(),t=this.CheckCanDispelRow();if(cc.log("\u7b2c\u51e0\u6b65 = "+s.SpwanStep),0==e.length&&0==t.length)if(2==s.SpwanStep){var o=Math.random();cc.Mgr.UserData.getGameLv()>=s.SpawnSeedLv&&o<s.SpwanSeedVsBoxRatio?(this.SpwanSeedAtBox(),this.gameState=r.Play):this.SpwanNewBox(function(){this.CheckCanDispelAfterSpwan()})}else cc.Mgr.UserData.getGameLv()>=s.SpawnCoinLv&&1==s.SpwanStep&&this.SpwanCoinAtBox(),this.gameState=r.Play;else{if(cc.Mgr.AudioMgr.playSFX("Crush"),cc.Mgr.PlatformController.QuakeScreen(!0),0!=e.length)for(var i=e.length-1;i>=0;i--)for(var a=this.rowsNum-1;a>=0;a--)this.boxMap[a][e[i]].boxType==c.Stone?s.DispelStoneScore:s.DispelNormalScore,this.boxMap[a][e[i]].PlayAnimation("boxblink");if(0!=t.length)for(i=t.length-1;i>=0;i--)for(a=this.colsNum-1;a>=0;a--)this.boxMap[t[i]][a].boxType==c.Stone?s.DispelStoneScore:s.DispelNormalScore,this.boxMap[t[i]][a].PlayAnimation("boxblink")}},s.WaitDispelInterval)},CheckCanDispelCol:function(){for(var e=[],t=this.colsNum-1;t>=0;t--){for(var o=!0,i=0;i<this.rowsNum;i++)if(this.boxMap[i][t].boxType!=c.Normal&&this.boxMap[i][t].boxType!=c.Stone&&this.boxMap[i][t].boxType!=c.Flower){o=!1;break}1==o&&e.push(t)}return e},CheckCanDispelRow:function(){for(var e=[],t=this.rowsNum-1;t>=0;t--){for(var o=!0,i=0;i<this.colsNum;i++)if(this.boxMap[t][i].boxType!=c.Normal&&this.boxMap[t][i].boxType!=c.Stone&&this.boxMap[t][i].boxType!=c.Flower){o=!1;break}1==o&&e.push(t)}return e},OperateMoveAction:function(e,t){var o=this.checkCanMove(e);if(0!=o.canMove){this.gameState=r.Merge;var a=this;a.func=t,e==i.LEFT?this.scheduleOnce(function(){for(var t=o.indexList[0];t<this.checkPos[1];t++){var s=t,n=this.getPosBoxFlagNum(this.checkPos[0],s+1),r={};r.flagNum=c.Blank,this.boxMap[this.checkPos[0]][s+1].RefreshBox(r);var l={};if(l.flagNum=n,this.boxMap[this.checkPos[0]][s].RefreshBox(l,i.LEFT),s==this.checkPos[1]-1){var h={};h.x=this.checkPos[0],h.y=s,this.refreshCheckPos(h)}}var u=this.checkCanMove(e);a.func(u)},s.moveOneInterval):e==i.RIGHT?this.scheduleOnce(function(){for(var t=o.indexList[0];t>this.checkPos[1];t--){var s=t,n=this.getPosBoxFlagNum(this.checkPos[0],s-1),r={};r.flagNum=c.Blank,this.boxMap[this.checkPos[0]][s-1].RefreshBox(r);var l={};if(l.flagNum=n,this.boxMap[this.checkPos[0]][s].RefreshBox(l,i.RIGHT),s==this.checkPos[1]+1){var h={};h.x=this.checkPos[0],h.y=s,this.refreshCheckPos(h)}}var u=this.checkCanMove(e);a.func(u)},s.moveOneInterval):e==i.UP?this.scheduleOnce(function(){for(var t=o.indexList[0];t<this.checkPos[0];t++){var s=t,n=this.getPosBoxFlagNum(s+1,this.checkPos[1]),r={};r.flagNum=c.Blank,this.boxMap[s+1][this.checkPos[1]].RefreshBox(r);var l={};if(l.flagNum=n,this.boxMap[s][this.checkPos[1]].RefreshBox(l,i.UP),s==this.checkPos[0]-1){var h={};h.x=s,h.y=this.checkPos[1],this.refreshCheckPos(h)}}var u=this.checkCanMove(e);a.func(u)},s.moveOneInterval):e==i.DOWN&&this.scheduleOnce(function(){for(var t=o.indexList[0];t>this.checkPos[0];t--){var s=t,n=this.getPosBoxFlagNum(s-1,this.checkPos[1]),r={};r.flagNum=c.Blank,this.boxMap[s-1][this.checkPos[1]].RefreshBox(r);var l={};if(l.flagNum=n,this.boxMap[s][this.checkPos[1]].RefreshBox(l,i.DOWN),s==this.checkPos[0]+1){var h={};h.x=s,h.y=this.checkPos[1],this.refreshCheckPos(h)}}var u=this.checkCanMove(e);a.func(u)},s.moveOneInterval)}},IsCheckPosOnTargetPos:function(){var e=this.getCheckPos();this.boxMap[e.row][e.col].IsTargetObjActive()?(this.gameState=r.Merge,cc.Mgr.UserData.AddFinishLv(),this.scheduleOnce(function(){cc.Mgr.UserData.SaveData(),cc.Mgr.Global.hasAnyStandOnJiaGuan=!1,this.RefreshLevelMapLayOut()},1)):this.CheckJiGuanBeStand()?(cc.log("\u8e29\u5728\u51fb\u5173\u4e0a\u4e86"),this.gameState=r.Merge,cc.director.emit("StandOnMechanic",{})):this.gameState=r.Play},CheckJiGuanBeStand:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++)if(this.boxMap[e][t].subType==l.Mechanic&&this.boxMap[e][t].boxType!=c.Blank)return!0;return!1},MoveBoxLeft:function(e){this.OperateMoveAction(i.LEFT,function(e){0==e.canMove?1==s.GameType?(s.AddSpwanStep(),this.gameState=r.Merge,this.DoDispelOperate()):2==s.GameType&&this.IsCheckPosOnTargetPos():this.MoveBoxLeft(i.LEFT)})},MoveBoxRight:function(e){this.OperateMoveAction(i.RIGHT,function(e){0==e.canMove?1==s.GameType?(s.AddSpwanStep(),this.gameState=r.Merge,this.DoDispelOperate()):2==s.GameType&&this.IsCheckPosOnTargetPos():this.MoveBoxRight(i.RIGHT)})},MoveBoxUp:function(e){this.OperateMoveAction(i.UP,function(e){0==e.canMove?1==s.GameType?(s.AddSpwanStep(),this.gameState=r.Merge,this.DoDispelOperate()):2==s.GameType&&this.IsCheckPosOnTargetPos():this.MoveBoxUp(i.UP)})},MoveBoxDown:function(e){this.OperateMoveAction(i.DOWN,function(e){0==e.canMove?1==s.GameType?(s.AddSpwanStep(),this.gameState=r.Merge,this.DoDispelOperate()):2==s.GameType&&this.IsCheckPosOnTargetPos():this.MoveBoxDown(i.DOWN)})},onTouched:function(e){if(this.gameState==r.Play){this.SaveReBoxMapData(),s.hasMove=!0;var t=e.getStartLocation(),o=e.getLocation(),a=o.x-t.x,n=o.y-t.y;Math.abs(a)>Math.abs(n)?a>0?a>5&&(cc.director.emit("MoveRoleBox",{DIR:i.RIGHT}),this.MoveBoxRight(i.RIGHT)):a<0&&a<-5&&(cc.director.emit("MoveRoleBox",{DIR:i.LEFT}),this.MoveBoxLeft(i.LEFT)):n>5?this.MoveBoxUp(i.UP):n<0&&this.MoveBoxDown(i.DOWN)}},onKey:function(e){if(this.gameState==r.Play)switch(this.SaveReBoxMapData(),s.hasMove=!0,e.keyCode){case cc.macro.KEY.up:case cc.macro.KEY.w:this.MoveBoxUp(i.UP);break;case cc.macro.KEY.down:case cc.macro.KEY.s:this.MoveBoxDown(i.DOWN);break;case cc.macro.KEY.left:case cc.macro.KEY.a:this.MoveBoxLeft(i.LEFT);break;case cc.macro.KEY.right:case cc.macro.KEY.d:this.MoveBoxRight(i.RIGHT)}}});t.exports=h,cc._RF.pop()},{Box:"Box",BoxSubType:"BoxSubType",BoxType:"BoxType",DIR:"DIR",DataType:"DataType",GameState:"GameState",Global:"Global",UIScore:"UIScore"}],GameState:[function(e,t,o){"use strict";cc._RF.push(t,"e8574c/3JdC3r6oCDUAjngc","GameState");var i=cc.Enum({Wait:0,Play:1,Over:2,Spwan:3,Merge:4,Pause:5});t.exports=i,cc._RF.pop()},{}],GameType:[function(e,t,o){"use strict";cc._RF.push(t,"19e3cuGADZDYrXXPkeNFwgD","GameType");cc.Enum({PushBox:1,Puzzle:2});cc._RF.pop()},{}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"d2af1TemoxOJb1Yy4Sfzn0a","Global");var i=e("BonusType"),s=e("DataType"),a=cc.Class({statics:{GameType:2,SpwanStep:0,SpwanFlag:2,moveOneInterval:.0525,WaitSpwanInterval:.2,WaitShowGameOver:.5,WaitCheckCanMoveAllDir:.25,WaitDispelInterval:.1,DispelNormalScore:10,DispelAddScore:50,LvScore:21,RuneRewardTimesForOneDay:3,DispelStoneScore:50,SpawnStoneLv:6,SpawnSeedLv:4,SpawnCoinLv:2,SpawnSeedInitRatio:.3,SpawnStoneInitRatio:.3,SpwanSeedVsBoxRatio:.15,ContinueRebornTimes:3,LeftRebornTime:3,UseSkillState:!1,SKillBoomNum:0,BoomCost:800,ReturnStepCost:500,PassLvGetCoin:100,DiamondGetScore:100,DiamondGetNum:90,CoinBonus:0,DiamondBonus:0,rewardGetInterval:7200,rewardGetLifeTime:7200,canGetReward:!1,hasMove:!1,checkPos:[],hasAnyStandOnJiaGuan:!1,RefreshBonusData:function(){var e=cc.Mgr.UserData.getCurSkinId(),t=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(s.Skin,e).bonusList;this.CoinBonus=0,this.DiamondBonus=0;for(var o=t.length-1;o>=0;o--)t[o].bonusType==i.CoinBonus?this.CoinBonus+=t[o].bonusNum:t[o].bonusType==i.DiamondBonus&&(this.DiamondBonus=t[o].bonusNum);this.CoinBonus=1+this.CoinBonus/100,this.DiamondBonus=1+this.DiamondBonus/100,cc.log("+++++++++++++++++++++++++++++++++ "+this.CoinBonus)},InitRewardLifeTime:function(){this.rewardGetLifeTime=7200,this.canGetReward=!1},SubLeftRewardTime:function(){0==this.canGetReward&&(cc.Mgr.Global.rewardGetLifeTime-=1,0==this.rewardGetLifeTime&&(this.canGetReward=!0))},AddSpwanStep:function(){this.SpwanStep+=1,this.SpwanStep>2&&(this.SpwanStep=1)},clearCheckPos:function(){this.checkPos[0]=-1,this.checkPos[1]=-1},InitData:function(){this.SpwanStep=0,this.SpwanFlag=2,this.SKillBoomNum=0,this.UseSkillState=!1,this.hasMove=!1,this.clearCheckPos()},InitReBornTime:function(){this.LeftRebornTime=3},setCheckPos:function(e,t){this.checkPos[0]=e,this.checkPos[1]=t}}});t.exports=a,cc._RF.pop()},{BonusType:"BonusType",DataType:"DataType"}],LevelData:[function(e,t,o){"use strict";cc._RF.push(t,"c58cdJJualO3oKtwkZF3+OE","LevelData");var i=e("TileData"),s=cc.Class({name:"LevelData",properties:{Id:"",tiles:[i]}});t.exports=s,cc._RF.pop()},{TileData:"TileData"}],LevelMap:[function(e,t,o){"use strict";cc._RF.push(t,"142ecTZLC9Oz4bnsE4RBxXq","LevelMap");var i=e("LevelData"),s=e("TileData"),a=cc.Class({extends:cc.Component,properties:{jsonName:"levels",lvList:{default:[],type:[i]}},DecodeJson:function(e){var t=this;t.reCb=e,cc.loader.loadRes("json/"+t.jsonName,function(e,o){if(e)t.reCb(!1);else{for(var a=o.json.levels,n=0;n<a.length;n++){var r=new i;r.Id=n+1;for(var c=0;c<a[n].tiles.length;c++){var l=new s;l.boxType=a[n].tiles[c][0],l.subType=a[n].tiles[c][1],r.tiles[c]=l}t.lvList[n]=r}t.reCb(!0)}})},getDataById:function(e){for(var t=null,o=this.lvList.length-1;o>=0;o--)if(e==this.lvList[o].Id){t=this.lvList[o];break}return t},getJsonLength:function(){return this.lvList.length},getDataList:function(){return this.lvList}});t.exports=a,cc._RF.pop()},{LevelData:"LevelData",TileData:"TileData"}],LvUpPanel:[function(e,t,o){"use strict";cc._RF.push(t,"5048b9EVlFHCLcDe/O9uWBI","LvUpPanel");var i=cc.Class({extends:cc.Component,properties:{getNumLbl:cc.Label},ShowPanel:function(e){this.getNumLbl.string=e}});t.exports=i,cc._RF.pop()},{}],MenuPanel:[function(e,t,o){"use strict";cc._RF.push(t,"8624eSf5iNHxauwEek72C4L","MenuPanel");var i=cc.Class({extends:cc.Component,properties:{Atlas:cc.SpriteAtlas,Icon:cc.Sprite},ShowPanel:function(e){this.Icon.spriteFrame=this.Atlas.getSpriteFrame("target_"+e)},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],OverPanel:[function(e,t,o){"use strict";cc._RF.push(t,"df80ee8UyRB9IE0kFIMVmvE","OverPanel");var i=cc.Class({extends:cc.Component,properties:{Atlas:cc.SpriteAtlas,scoreLbl:cc.Label,btnBgSp:cc.Sprite,btnLbl:cc.Label,shareLbl:cc.Label,rebornLeftLbl:cc.Label},ShowPanel:function(){this.scoreLbl.string=cc.Mgr.UserData.getCurScore(),this.rebornLeftLbl.string="("+cc.Mgr.Global.LeftRebornTime+"/3)",cc.Mgr.Global.LeftRebornTime>0?(this.shareLbl.string="\u5206\u4eab\u91cd\u7f6e",this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_1"),this.btnLbl.string="\u89c6\u9891\u91cd\u7f6e"):(this.shareLbl.string="\u70ab\u8000\u4e00\u4e0b",this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_2"),this.btnLbl.string="\u6e38\u620f\u7ed3\u675f")}});t.exports=i,cc._RF.pop()},{}],PlatformController:[function(e,t,o){"use strict";cc._RF.push(t,"05882nT34pGTa94tDlCdCoR","PlatformController");var i=cc.Class({statics:{wxSubContextViewLock:0,platform:"wx",QuakeState:1,isScreen:!1,Init:function(){window.wx||window.tt||window.swan||(this.platform="pc")},CreateFeedBackButton:function(){if("wx"==this.platform){var e=cc.view.getVisibleSize(),t=68/e.width,o=275/e.height,i=wx.getSystemInfoSync();this.lPos=i.windowWidth*t,this.tPos=i.windowHeight*o;var s=this;cc.loader.loadRes("/share.png",function(e,t){s.feedBackBtn=wx.createFeedbackButton({type:"image",image:t,style:{left:s.lPos-20,top:s.tPos-20,width:45,height:45}})})}},ShowFeedbackBtn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"wx"==this.platform&&null!=this.feedBackBtn&&(1==e?this.feedBackBtn.show():this.feedBackBtn.hide())},ShareTopNav:function(){var e=cc.Mgr.ShareInfos.getShareInfos(1);"wx"==this.platform?(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:e.text,imageUrl:e.url}})):"tt"==this.platform?(tt.showShareMenu(!1),tt.onShareAppMessage(function(){return{title:"\u6c99\u96d5,\u8fd9\u4e2a\u6e38\u620f\u4f60\u80fd\u73a9\u4e0b\u53bb\u5417",imageUrl:""}})):"baidu"==this.platform&&(swan.showShareMenu(!1),swan.onShareAppMessage(function(){return{title:e.text,imageUrl:e.url}}))},ShareToFriendTxt:function(e){var t=cc.Mgr.ShareInfos.getShareInfos(0);"wx"==this.platform?(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),wx.shareAppMessage({title:e,imageUrl:t.url})):"tt"==this.platform?tt.shareAppMessage({title:e}):"baidu"==this.platform&&(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),swan.shareAppMessage({title:e}))},getUrl:function(e){return cc.url.raw("resources/"+e+".jpg")},ShareToFriend:function(e){var t=cc.Mgr.ShareInfos.getShareInfos(e);"wx"==this.platform?wx.shareAppMessage({title:t.text,imageUrl:t.url}):"tt"==this.platform?tt.shareAppMessage({title:t.text,imageUrl:t.url}):"baidu"==this.platform&&(console.log("\u70b9\u51fb\u4e86\u5206\u4eab\u554a"),swan.shareAppMessage({title:t.text,imageUrl:t.url}))},showToast:function(e){cc.log(e),"wx"==this.platform?wx.showToast({title:e,icon:"none",duration:1e3}):"tt"==this.platform?tt.showToast({title:e,icon:"none",duration:1e3}):"baidu"==this.platform&&swan.showToast({title:e,icon:"success",duration:2e3})},setUserCloudStorage:function(e){if(cc.log("setUserCloudStorage socre = "+e),"wx"==this.platform){var t={wxgame:{}};t.wxgame.score=e,t.wxgame.update_time=(new Date).getTime(),console.log(JSON.stringify(t));var o=new Array;o.push({key:"\bjzScore",value:JSON.stringify(t)}),wx.setUserCloudStorage({KVDataList:o,success:function(e){console.log("success:"+JSON.stringify(e))},fail:function(e){console.log("fail : "+e)}})}},OpenServiceConversation:function(){"wx"==this.platform?wx.openCustomerServiceConversation({sessionFrom:"",showMessageCard:!0}):this.platform},IsSupportRank:function(){return"wx"==this.platform},showSubContentView:function(){if("wx"==this.platform){this.wxSubContextViewLock++,console.log("showSubContentView   "+this.wxSubContextViewLock);var e={flag:!0};cc.director.GlobalEvent.emit(cc.Mgr.Event.ShowRank,e)}},hideSubContentView:function(){if("wx"==this.platform&&(this.wxSubContextViewLock--,console.log("hideSubContentView   "+this.wxSubContextViewLock),0==this.wxSubContextViewLock)){var e={flag:!1};cc.director.GlobalEvent.emit(cc.Mgr.Event.ShowRank,e)}},SendMessageToSubView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o={};o.code=e,o.curScore=t,"wx"==this.platform&&wx.getOpenDataContext().postMessage({message:o})},IsSupportRecordScreen:function(){return"tt"==this.platform||"baidu"==this.platform&&!!this.CompareSdkVesrion(swan.getSystemInfoSync().SDKVersion,"1.4.1")},CompareSdkVesrion:function(e,t){for(var o=e.split("."),i=t.split("."),s=0;s<o.length;s++){if(parseInt(o[s])<parseInt(i[s]))return 0;if(parseInt(o[s])>parseInt(i[s]))return 1}return 1},StartRecordScreen:function(){var e=this;this.videoPath="","tt"==this.platform?(null==this.recorderManager&&(this.recorderManager=tt.getGameRecorderManager(),this.recorderManager.onStart(function(t){console.log("\u5f55\u5236\u5f00\u59cb\u4e86: "+t),e.showToast("\u5f00\u59cb\u5f55\u5c4f")}),this.recorderManager.onStop(function(t){e.showToast("\u7ed3\u675f\u5f55\u5c4f"),console.log("\u5f55\u5236\u7ed3\u675f\u4e86: "+t.videoPath),e.videoPath=t.videoPath,e.ShareRecordScreen()}),this.recorderManager.onPause(function(){console.log("\u5f55\u5236\u6682\u505c\u4e86")}),this.recorderManager.onResume(function(){console.log("\u5f55\u5236\u6062\u590d\u4e86")}),this.recorderManager.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519\u4e86:"+e)})),this.recorderManager.start({duration:30})):"baidu"==this.platform&&(null==this.recorderManager&&(this.recorderManager=swan.getVideoRecorderManager(),this.recorderManager.onStart(function(e){console.log("\u5f55\u5236\u5f00\u59cb\u4e86: "+e)}),this.recorderManager.onStop(function(t){console.log("\u5f55\u5236\u7ed3\u675f\u4e86: "+t.videoPath),e.videoPath=t.videoPath}),this.recorderManager.onPause(function(){console.log("\u5f55\u5236\u6682\u505c\u4e86")}),this.recorderManager.onResume(function(){console.log("\u5f55\u5236\u6062\u590d\u4e86")}),this.recorderManager.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519\u4e86:"+e)})),this.recorderManager.start({duration:30,microphoneEnabled:!0})),this.isScreen=!0},StopRecordScreen:function(){if("tt"==this.platform){if(null==this.recorderManager)return;console.log("\u505c\u6b62\u5f55\u5236"),this.recorderManager.stop()}else if("baidu"==this.platform){if(null==this.recorderManager)return;console.log("\u505c\u6b62\u5f55\u5236"),this.recorderManager.stop()}this.isScreen=!1},ShareRecordScreen:function(){var e=this;if("tt"==this.platform){if(null==this.recorderManager||""==this.videoPath)return;console.log("\u5206\u4eab\u5f55\u5236\u7684\u89c6\u9891"),tt.shareVideo({videoPath:""+this.videoPath,success:function(){e.showToast("\u5206\u4eab\u6210\u529f\uff01"),console.log("\u5206\u4eab\u6210\u529f\uff01")},fail:function(t){e.showToast("\u5206\u4eab\u5931\u8d25\uff01"),console.log("\u5206\u4eab\u5931\u8d25\uff01"+t)}})}else if("baidu"==this.platform){if(null==this.recorderManager||null==this.videoPath)return;console.log("\u5206\u4eab\u5f55\u5236\u7684\u89c6\u9891"),swan.shareVideo({videoPath:""+this.videoPath,success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01")},fail:function(e){console.log("\u5206\u4eab\u5931\u8d25\uff01"+e)}})}},QuakeScreen:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];1==this.QuakeState&&"pc"!=this.platform&&(1==e?"tt"==this.platform?tt.vibrateLong({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"baidu"==this.platform?swan.vibrateLong({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"wx"==this.platform&&wx.vibrateLong({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}):"tt"==this.platform?tt.vibrateShort({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}}):"baidu"==this.platform?swan.vibrateShort({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}}):"wx"==this.platform&&wx.vibrateShort({success:function(e){console.log(""+e)},fail:function(e){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}}))},SetQuakeState:function(){this.QuakeState=(this.QuakeState+1)%2},GetQuakeState:function(){return this.QuakeState},JumpToOtherApp:function(e){"wx"==this.platform?wx.navigateToMiniProgram({appId:e,envVersion:"release",success:function(e){console.log("\u6210\u529f\u6253\u5f00\u4e86\u5176\u4ed6\u5c0f\u7a0b\u5e8f")}}):"baidu"==this.platform||this.platform}}});t.exports=i,cc._RF.pop()},{}],RankPanel:[function(e,t,o){"use strict";cc._RF.push(t,"f97caUCsMBF4ZKKm77sXkmE","RankPanel");var i=cc.Class({extends:cc.Component,properties:{},ShowNextPage:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowNextPage")},ShowFrontPage:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontPage")}});t.exports=i,cc._RF.pop()},{}],ReBox:[function(e,t,o){"use strict";cc._RF.push(t,"e788bZGBn1MUJM+EnB7LQak","ReBox");var i=cc.Class({name:"ReBox",properties:{posX:-1,posY:-1,flagNum:0,showCoin:!1,showSeed:!1},InitBox:function(e,t){this.posX=e,this.posY=t,this.flagNum=0,this.showCoin=!1,this.showSeed=!1},RefreshReBox:function(e,t,o){this.flagNum=e,this.showCoin=t,this.showSeed=o}});t.exports=i,cc._RF.pop()},{}],SettingPanel:[function(e,t,o){"use strict";cc._RF.push(t,"99a9aWFrJJGAJhbDMGJ81Rh","SettingPanel");var i=e("BirdVoiceCtrl"),s=cc.Class({extends:cc.Component,properties:{Atlas:cc.SpriteAtlas,checkMarkM:cc.Sprite,checkMarkV:cc.Sprite,checkMarkQ:cc.Sprite,birdVoice:i},ShowPanel:function(){0==cc.Mgr.AudioMgr.musicState?this.checkMarkM.spriteFrame=this.Atlas.getSpriteFrame("m_off"):this.checkMarkM.spriteFrame=this.Atlas.getSpriteFrame("m_on"),0==cc.Mgr.AudioMgr.voiceState?this.checkMarkV.spriteFrame=this.Atlas.getSpriteFrame("v_off"):this.checkMarkV.spriteFrame=this.Atlas.getSpriteFrame("v_on"),1==cc.Mgr.PlatformController.GetQuakeState()?this.checkMarkQ.spriteFrame=this.Atlas.getSpriteFrame("quake_on"):this.checkMarkQ.spriteFrame=this.Atlas.getSpriteFrame("quake_off")},MusicTog:function(){0==cc.Mgr.AudioMgr.musicState?(this.OnMusic(),this.birdVoice.Resume()):(this.OffMusic(),this.birdVoice.Stop())},VoiceTog:function(){0==cc.Mgr.AudioMgr.voiceState?this.OnVoice():this.OffVoice()},QuakeTog:function(){0==cc.Mgr.PlatformController.GetQuakeState()?this.checkMarkQ.spriteFrame=this.Atlas.getSpriteFrame("quake_on"):this.checkMarkQ.spriteFrame=this.Atlas.getSpriteFrame("quake_off"),cc.Mgr.PlatformController.SetQuakeState()},OnMusic:function(){cc.Mgr.AudioMgr.resumeMusic(),this.checkMarkM.spriteFrame=this.Atlas.getSpriteFrame("m_on")},OffMusic:function(){cc.Mgr.AudioMgr.pauseMusic(),this.checkMarkM.spriteFrame=this.Atlas.getSpriteFrame("m_off")},OnVoice:function(){cc.Mgr.AudioMgr.resumeVoice(),this.checkMarkV.spriteFrame=this.Atlas.getSpriteFrame("v_on")},OffVoice:function(){cc.Mgr.AudioMgr.pauseVoice(),this.checkMarkV.spriteFrame=this.Atlas.getSpriteFrame("v_off")},Help:function(){},KeFu:function(){cc.Mgr.PlatformController.OpenServiceConversation()},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=s,cc._RF.pop()},{BirdVoiceCtrl:"BirdVoiceCtrl"}],ShareInfos:[function(e,t,o){"use strict";cc._RF.push(t,"cbabaJR2rFNv4Pbgoaogc9i","ShareInfos");var i=cc.Class({extends:cc.Component,statics:{init:function(){this.Infos=[{text:"\u4f60\u77e5\u9053\u7684,\u5f53\u4f60\u9700\u8981\u4e00\u4e2a\u6ca1\u6709\u8dcc\u5b95\u6625\u590f,\u6211\u5c31\u4f1a\u62fc\u547d\u52aa\u529b\u7684\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5oBqUjzhN2uaibicSTibICibjYHgdtvQea6hb8DSoibWiaTgcRPfFDNGCOksG/0"},{text:"\u4f60\u6cfc\u58a8\u4e86\u5899\u89d2\u6b8b\u7f3a\u7684\u9884\u8a00,\u4e8e\u662f\u5c31\u6e32\u67d3\u4e86\u4e00\u4e2a\u6ca1\u6709\u8dcc\u5b95\u7684\u6625\u590f\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5qUAfRgKImE17B02M5JUNtibZM8sQTMHickTdBrFw83NQvNmwuXID03dJ/0"},{text:"\u4f60\u6cfc\u58a8\u4e86\u5899\u89d2\u6b8b\u7f3a\u7684\u9884\u8a00,\u4e8e\u662f\u5c31\u6e32\u67d3\u4e86\u4e00\u4e2a\u6ca1\u6709\u8dcc\u5b95\u7684\u6625\u590f\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/VW5UT1uqQ5oabRezePO6O7kISDhVIHYWDN9KwnbiaTdwuVMOYqwIzXnxnuRC23lem/0"},{text:"\u4f60\u7684\u597d\u53cb\u5411\u4f60\u53d1\u51fa\u4e86\u6311\u6218,\u4f60\u6562\u5e94\u6218\u5417\uff1f",url:""},{text:"\u4f60\u7684\u597d\u53cb\u5411\u4f60\u53d1\u51fa\u4e86\u6311\u6218,\u4f60\u6562\u5e94\u6218\u5417\uff1f",url:""},{text:"\u4f60\u7684\u597d\u53cb\u5411\u4f60\u53d1\u51fa\u4e86\u6311\u6218,\u4f60\u6562\u5e94\u6218\u5417\uff1f",url:""},{text:"\u4f60\u7684\u597d\u53cb\u5411\u4f60\u53d1\u51fa\u4e86\u6311\u6218,\u4f60\u6562\u5e94\u6218\u5417\uff1f",url:""},{text:"\u4f60\u7684\u597d\u53cb\u5411\u4f60\u53d1\u51fa\u4e86\u6311\u6218,\u4f60\u6562\u5e94\u6218\u5417\uff1f",url:""},{text:"\u672c\u6765\u53ea\u662f\u968f\u4fbf\u73a9\u73a9\uff0c\u5367\u69fd\u505c\u4e0d\u4e0b\u6765",url:""}]},getShareInfos:function(e){return this.Infos[e]}}});t.exports=i,cc._RF.pop()},{}],ShopPanel:[function(e,t,o){"use strict";cc._RF.push(t,"bba64AB7eBNtIe2AywpxO+S","ShopPanel");var i=e("SkinItem"),s=e("DataType"),a=e("BonusType"),n=e("CommonTipPanel"),r=cc.Class({extends:cc.Component,properties:{tipPanel:n,Atlas:cc.SpriteAtlas,runeSp:cc.Sprite,DesLbl:cc.Label,priceLbl:cc.Label,BuyUseBtnBgSp:cc.Sprite,skinItemList:[i],BuyUseTxt:cc.Label,chooseId:5},start:function(){var e=this;cc.director.on("ChooseSkinItem",function(t){e.RefreshPanel(t.skinId)})},RefreshPanel:function(e){var t=cc.Mgr.UserData.IsSkinUnLock(e),o=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(s.Skin,e);this.BuyUseTxt.string=t?"\u4f7f  \u7528":"\u8d2d  \u4e70";for(var i="",n=o.bonusList.length-1;n>=0;n--)o.bonusList[n].bonusType==a.CoinBonus?i=i+"\u91d1\u5e01\u52a0\u6210:"+o.bonusList[n].bonusNum+"%":o.bonusList[n].bonusType==a.DiamondBonus&&(i=i+"\u7b26\u6587\u52a0\u6210:"+o.bonusList[n].bonusNum+"%"),0!=n&&(i+="\n");this.priceLbl.string="\u4ef7\u683c:"+o.price,this.DesLbl.string=i,this.chooseId=e,this.runeSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+o.skinRuneType)},ShowPanel:function(){for(var e=cc.Mgr.DataMapMgr.getDataListByDataType(s.Skin),t=0;t<=this.skinItemList.length-1;t++)null!=e[t]&&this.skinItemList[t].InitItem(e[t].skinId);this.RefreshPanel(cc.Mgr.UserData.getCurSkinId())},BuyUse:function(){var e=cc.Mgr.UserData.IsSkinUnLock(this.chooseId),t=cc.Mgr.DataMapMgr.getDataByDataTypeAndId(s.Skin,this.chooseId);if(e){cc.Mgr.UserData.refreshUseSkinId(this.chooseId);var o={};o.skinId=this.chooseId,cc.director.emit("UseSkin",o),this.ClosePanel()}else if(cc.Mgr.UserData.getRuneNum()>=t.price)cc.Mgr.UserData.addRuneFunc(-t.price,t.skinRuneType),cc.director.emit("BuySkin",{}),cc.Mgr.UserData.UnlockSkinById(this.chooseId),this.BuyUseTxt.string="\u4f7f  \u7528";else{this.tipPanel.node.active=!0;this.tipPanel.ShowPanel("\u4f60\u7684\u7b26\u6587\u4e0d\u591f,\u60a8\u53ef\u4ee5\u901a\u8fc7\u89c2\u770b\u89c6\u9891\u5e7f\u544a\u83b7\u5f97,\u6216\u8005\u5728\u6e38\u620f\u4e2d\u79ef\u6512\u8db3\u591f\u7b26\u6587")}},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=r,cc._RF.pop()},{BonusType:"BonusType",CommonTipPanel:"CommonTipPanel",DataType:"DataType",SkinItem:"SkinItem"}],SkillBackTipPanel:[function(e,t,o){"use strict";cc._RF.push(t,"99d0110CQ1C/q8O91oX/peA","SkillBackTipPanel");var i=cc.Class({extends:cc.Component,properties:{desLbl:cc.Label},ShowPanel:function(){this.desLbl.string="\u5269\u4f59\u4e2a\u6570:"+cc.Mgr.UserData.getSkillBackNum()},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],SkillUsePanel:[function(e,t,o){"use strict";cc._RF.push(t,"4acb1rSvg5N94jhZH7JV1Mx","SkillUsePanel");var i=cc.Class({extends:cc.Component,properties:{diamondLbl:cc.Label,btnBgSp:cc.Sprite,Atlas:cc.SpriteAtlas},ShowPanel:function(){var e=cc.Mgr.UserData.getCoinNum();this.diamondLbl.string=e,e>cc.Mgr.Global.ReturnStepCost?this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_1"):this.btnBgSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_2")},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],SkinBonus:[function(e,t,o){"use strict";cc._RF.push(t,"37e20KwaXVHq6zC2dE0WfBw","SkinBonus");cc.Class({name:"SkinBonus",properties:{bonusType:cc.Integer,bonusNum:cc.Integer}});cc._RF.pop()},{}],SkinData:[function(e,t,o){"use strict";cc._RF.push(t,"00be6HQojpEcqRlhiJGNEIw","SkinData");var i=e("SkinBonus"),s=cc.Class({name:"SkinData",properties:{skinId:cc.Integer,price:cc.Integer,skinRuneType:1,bonusList:[i]}});t.exports=s,cc._RF.pop()},{SkinBonus:"SkinBonus"}],SkinItem:[function(e,t,o){"use strict";cc._RF.push(t,"5451boFJshI3rdpO5cEgXWM","SkinItem");var i=cc.Class({extends:cc.Component,properties:{skinId:cc.Integer,tog:cc.Toggle},InitItem:function(e){this.skinId=e,this.skinId==cc.Mgr.UserData.getCurSkinId()?this.tog.isChecked=!0:this.tog.isChecked=!1},ChooseItem:function(){var e={};e.skinId=this.skinId,cc.director.emit("ChooseSkinItem",e)}});t.exports=i,cc._RF.pop()},{}],SkinMap:[function(e,t,o){"use strict";cc._RF.push(t,"abccajbhrJH3YbOodi4LwEo","SkinMap");var i=e("SkinData"),s=e("SkinBonus"),a=cc.Class({extends:cc.Component,properties:{jsonName:"skin",skinList:{default:[],type:[i]}},DecodeJson:function(e){var t=this;t.reCb=e,cc.loader.loadRes("json/"+t.jsonName,function(e,o){if(e)t.reCb(!1);else{for(var a=o.json.skin,n=0;n<a.length;n++){var r=new i;r.skinId=a[n].skinId,r.price=a[n].price,r.skinRuneType=a[n].skinRuneType;for(var c=0;c<a[n].bonusList.length;c++){var l=new s;l.bonusType=a[n].bonusList[c][0],l.bonusNum=a[n].bonusList[c][1],r.bonusList[c]=l}t.skinList[n]=r}t.reCb(!0)}})},getDataById:function(e){for(var t=null,o=this.skinList.length-1;o>=0;o--)if(e==this.skinList[o].skinId){t=this.skinList[o];break}return t},getJsonLength:function(){return this.skinList.length},getDataList:function(){return this.skinList}});t.exports=a,cc._RF.pop()},{SkinBonus:"SkinBonus",SkinData:"SkinData"}],SkinStruct:[function(e,t,o){"use strict";cc._RF.push(t,"6f331O4fGJFobQN8AIUKtpF","SkinStruct");var i=cc.Class({name:"SkinStruct",properties:{skinId:cc.Integer,price:cc.Integer,unLock:0}});t.exports=i,cc._RF.pop()},{}],StartPanel:[function(e,t,o){"use strict";cc._RF.push(t,"5a50cIF/iZHh4OK+WnBNng6","StartPanel");var i=cc.Class({extends:cc.Component,properties:{startAni:cc.Animation},start:function(){this.startAni.play()},ShowPanel:function(){this.startAni.play()}});t.exports=i,cc._RF.pop()},{}],TileData:[function(e,t,o){"use strict";cc._RF.push(t,"2d750oTfkZHCITgpJSLUYYW","TileData");var i=cc.Class({name:"TileData",properties:{boxType:0,subType:0}});t.exports=i,cc._RF.pop()},{}],TipPlayPanel:[function(e,t,o){"use strict";cc._RF.push(t,"415ebZw2TNDtIijRAb6Xidq","TipPlayPanel");var i=cc.Class({extends:cc.Component,properties:{},ClosePanel:function(){this.node.active=!1}});t.exports=i,cc._RF.pop()},{}],TutorialPanel:[function(e,t,o){"use strict";cc._RF.push(t,"44327xJKAVIJ5y40suV+Bs9","TutorialPanel");var i=e("GameController"),s=e("DIR"),a=cc.Class({extends:cc.Component,properties:{gameCtrl:i,FingerNode:cc.Node,Anima:cc.Animation,TipDesLbl:cc.Label,GoStep:1},start:function(){this.AddTouchEventListener()},OperFirstStep:function(){this.GoStep=1,this.Anima.play("tutorialFinger"),this.TipDesLbl.string="\u5411\u4e0b\u6ed1\u52a8,\u63a7\u5236\u5c0f\u5973\u5b69\u79fb\u52a8,\u5c06\u6728\u7bb1\u63a8\u79fb\u5230\u4e00\u6761\u76f4\u7ebf\u4e0a"},OperFirstSubStep:function(){this.GoStep=2,this.Anima.play("tutorialFinger"),this.TipDesLbl.string="\u5f53\u6728\u7bb1\u5f62\u6210\u4e00\u6761\u76f4\u7ebf\u65f6\uff0c\u6728\u7bb1\u4f1a\u88ab\u6253\u5f00\uff0c\u7bb1\u5b50\u6253\u5f00\u540e\u51fa\u73b0\u8d1d\u58f3,\u62fe\u53d6\u53ef\u83b7\u5f97\u79ef\u5206"},OperSecondStep:function(){this.GoStep=3,this.Anima.play("tutorialFingerH"),this.TipDesLbl.string="\u8ba9\u5c0f\u5973\u5b69\u5de6\u53f3\u884c\u8d70,\u62fe\u53d6\u8d1d\u58f3,\u83b7\u5f97\u79ef\u5206"},OperThirdStep:function(){this.GoStep=4,this.FingerNode.active=!1,this.TipDesLbl.string="\u975e\u5e38\u597d,\u4f60\u5df2\u7ecf\u638c\u63e1\u4e86\u57fa\u672c\u6e38\u620f\u89c4\u5219,\u5c3d\u60c5\u7684\u6e38\u620f\u5427",cc.Mgr.UserData.FinishTutorial()},ClosePanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.node.active=!1},AddTouchEventListener:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouched,this)},onTouched:function(e){this.gameCtrl.SaveReBoxMapData(),cc.Mgr.Global.hasMove=!0;var t=e.getStartLocation(),o=e.getLocation(),i=o.x-t.x,a=o.y-t.y;Math.abs(i)>Math.abs(a)?i>0?i>5&&(cc.director.emit("MoveRoleBox",{DIR:s.RIGHT}),3==this.GoStep?(this.gameCtrl.MoveBoxRight(s.RIGHT),this.scheduleOnce(function(){this.OperThirdStep()},.1)):4==this.GoStep&&(this.gameCtrl.MoveBoxRight(s.RIGHT),this.ClosePanel())):i<0&&i<-5&&(cc.director.emit("MoveRoleBox",{DIR:s.LEFT}),3==this.GoStep?(this.gameCtrl.MoveBoxLeft(s.LEFT),this.scheduleOnce(function(){this.OperThirdStep()},.1)):4==this.GoStep&&(this.gameCtrl.MoveBoxLeft(s.LEFT),this.ClosePanel())):a>5?4==this.GoStep&&(this.gameCtrl.MoveBoxUp(s.UP),this.ClosePanel()):a<0&&(1==this.GoStep?(this.gameCtrl.MoveBoxDown(s.DOWN),this.scheduleOnce(function(){this.OperFirstSubStep()},.5)):2==this.GoStep?(this.gameCtrl.MoveBoxDown(s.DOWN),this.scheduleOnce(function(){this.OperSecondStep()},.1)):4==this.GoStep&&(this.gameCtrl.MoveBoxDown(s.DOWN),this.ClosePanel()))}});t.exports=a,cc._RF.pop()},{DIR:"DIR",GameController:"GameController"}],UIMgr:[function(e,t,o){"use strict";cc._RF.push(t,"865c6W6/69HUqhmC8vxYaPi","UIMgr");var i=e("GameController"),s=e("SettingPanel"),a=e("GameState"),n=e("UIScore"),r=e("SkillUsePanel"),c=e("ShopPanel"),l=e("TutorialPanel"),h=e("OverPanel"),u=e("CommonTipPanel"),d=e("BuyBoomPanel"),p=e("TipPlayPanel"),g=e("MenuPanel"),m=e("AdsParam"),f=e("SkillBackTipPanel"),S=e("StartPanel"),M=cc.Class({extends:cc.Component,properties:{pauseForReborn:!1,lastShareTime:0,gameCtrl:i,StartUINode:S,RankUINode:cc.Node,boomSkillBuyPanel:d,BoomSkillTipNode:cc.Node,ProgressTipNode:cc.Node,skillUsePanel:r,skillBackTip:f,settingPanel:s,shopPanel:c,tutorialPanel:l,overPanel:h,tipPanel:u,tipPlayPanel:p,menuPanel:g,highScoreLbl:cc.Label,boomHasNumLbl:cc.Label,backHasNumLbl:cc.Label,uiScore:n,wxSubContextView:cc.Node},start:function(){var e=this;cc.director.on("ShowOver",function(t){e.ShowRebornPanel()}),cc.director.on("UseBoomSkillEnd",function(t){e.UseBoomSkillEnd()}),cc.game.on(cc.game.EVENT_HIDE,function(){1==e.pauseForReborn&&(e.lastShareTime=cc.Mgr.Utils.GetSysTime())}),cc.game.on(cc.game.EVENT_SHOW,function(){1==e.pauseForReborn&&e.RebornCallFunc()})},RefreshUI:function(){this.highScoreLbl.string=cc.Mgr.UserData.getHighScore(),this.boomHasNumLbl.string=cc.Mgr.UserData.getSkillBoomNum(),this.backHasNumLbl.string=cc.Mgr.UserData.getSkillBackNum()},CloseProgressTipNode:function(){this.ProgressTipNode.active=!1},JumpToApp:function(){cc.Mgr.PlatformController.JumpToOtherApp("wxc025faa647b85f03")},BackUIMenu:function(){this.menuPanel.node.active=!1,this.StartUINode.node.active=!0,this.StartUINode.ShowPanel(),this.overPanel.node.active=!1,this.RankUINode.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("CloseAllNodes"),this.RefreshUI()},StartPlay:function(){this.overPanel.node.active=!1,0==cc.Mgr.UserData.hasLastProgress&&cc.Mgr.AudioMgr.playSFX("dong"),1==this.ProgressTipNode.active&&(this.ProgressTipNode.active=!1,cc.Mgr.UserData.ClearReBoxMap()),this.scheduleOnce(function(){cc.Mgr.Global.InitData(),cc.Mgr.UserData.InitChooseMapLv(),this.gameCtrl.gameState=a.Wait,1==cc.Mgr.UserData.hasLastProgress?(cc.Mgr.AudioMgr.playSFX("dong"),this.ProgressTipNode.active=!0):(this.uiScore.ResetScore(),this.StartUINode.node.active=!1,this.gameCtrl.StartGame(),cc.Mgr.PlatformController.SendMessageToSubView("GetRankList"),0==cc.Mgr.UserData.IsTutorialOver()&&this.scheduleOnce(function(){this.tutorialPanel.node.active=!0,this.tutorialPanel.OperFirstStep()},1.5))},.25)},StartGameUseProgress:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.overPanel.node.active=!1,this.scheduleOnce(function(){this.StartUINode.node.active=!1,this.ProgressTipNode.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("GetRankList"),this.uiScore.ResetScore(),this.uiScore.ResetScoreUseProgress(cc.Mgr.UserData.remScore),cc.Mgr.Global.InitData(),cc.Mgr.Global.InitReBornTime(),this.gameCtrl.gameState=a.Wait,this.gameCtrl.StartGameUseProgressData(),0==cc.Mgr.UserData.IsTutorialOver()&&this.scheduleOnce(function(){this.tutorialPanel.node.active=!0,this.tutorialPanel.OperFirstStep()},1.5)},.25)},RePlayStart:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.overPanel.node.active=!1,this.scheduleOnce(function(){this.StartUINode.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("GetRankList"),this.uiScore.ResetScore(),this.gameCtrl.ClearBoard(),cc.Mgr.Global.InitData(),cc.Mgr.Global.InitReBornTime(),this.gameCtrl.gameState=a.Wait,this.gameCtrl.ReStartGame()},.25)},OpenShop:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.menuPanel.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.shopPanel.node.active=!0,this.shopPanel.ShowPanel()},RebornGame:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.overPanel.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("GetRankList"),this.scheduleOnce(function(){this.StartUINode.node.active=!1,this.gameCtrl.ClearBoard(),cc.Mgr.Global.InitData(),this.gameCtrl.gameState=a.Wait,this.gameCtrl.ReStartGame()},.25)},RebornToGame:function(){cc.Mgr.Global.LeftRebornTime<=0?this.BackUIMenu():(this.pauseForReborn=!0,cc.Mgr.PlatformController.ShareToFriend(2))},RebornCallFunc:function(){console.log("\u73b0\u5728\u7684\u65f6\u95f4 = "+cc.Mgr.Utils.GetSysTime()+"    \u8bb0\u5f55\u7684\u65f6\u95f4 = "+this.lastShareTime),cc.Mgr.Utils.GetSysTime()>this.lastShareTime+3?(cc.Mgr.PlatformController.SendMessageToSubView("RefreshBeyondNormalNode",this.uiScore.score),this.RebornGame(),cc.Mgr.Global.LeftRebornTime-=1,cc.Mgr.Global.LeftRebornTime<0&&(cc.Mgr.Global.LeftRebornTime=0)):cc.Mgr.PlatformController.showToast("\u8bf7\u5148\u5b8c\u6210\u5206\u4eab"),this.pauseForReborn=!1},RebornBackFunc:function(){cc.Mgr.PlatformController.SendMessageToSubView("RefreshBeyondNormalNode",this.uiScore.score),this.RebornGame(),cc.Mgr.Global.LeftRebornTime-=1,cc.Mgr.Global.LeftRebornTime<0&&(cc.Mgr.Global.LeftRebornTime=0)},ShareToFriend:function(){if(cc.Mgr.Global.LeftRebornTime<=0){var e="\u6211\u5728-\u8a00\u5ead\u4e4b\u590f-\u62fe\u53d6\u4e86"+this.uiScore.score+"\u4e2a\u8d1d\u58f3,\u4e00\u8d77\u6765\u73a9\u5427?";cc.Mgr.PlatformController.ShareToFriendTxt(e)}else{this.pauseForReborn=!0;e="\u6211\u5728-\u8a00\u5ead\u4e4b\u590f-\u62fe\u53d6\u4e86"+this.uiScore.score+"\u4e2a\u8d1d\u58f3,\u4e00\u8d77\u6765\u73a9\u5427?";cc.Mgr.PlatformController.ShareToFriendTxt(e)}},WatchAdsReborn:function(){if(cc.Mgr.Global.LeftRebornTime<=0)this.BackUIMenu();else{var e=this;cc.Mgr.AdsMgr.ShowVideoAds(m.PointA,function(t){0==t&&e.RebornBackFunc()})}},OpenRankPanel:function(){cc.Mgr.AudioMgr.playSFX("dong"),cc.Mgr.PlatformController.SendMessageToSubView("RankPanelOpen"),"wx"==cc.Mgr.PlatformController.platform&&(this.RankUINode.active=!0)},CloseRankPanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("RankPanelCloseInMainView"),this.RankUINode.active=!1},ShowRebornPanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.overPanel.node.active=!0,cc.Mgr.PlatformController.setUserCloudStorage(cc.Mgr.UserData.getHighScore()),this.overPanel.ShowPanel(),cc.Mgr.UserData.SaveData(),cc.Mgr.PlatformController.SendMessageToSubView("ShowThreeNodes")},UseBoomSkillOpen:function(){if(cc.Mgr.AudioMgr.playSFX("dong"),this.gameCtrl.gameState==a.Play){if(cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),0==cc.Mgr.UserData.getSkillBoomNum())return this.boomSkillBuyPanel.node.active=!0,void this.boomSkillBuyPanel.ShowPanel();cc.Mgr.Global.UseSkillState=!0,this.BoomSkillTipNode.active=!0,this.gameCtrl.OffTouchEventListener()}},CancelUseBoomSkill:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),cc.Mgr.Global.UseSkillState=!1,this.BoomSkillTipNode.active=!1,this.gameCtrl.AddTouchEventListener()},UseBoomSkillEnd:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),cc.Mgr.UserData.addSkillBoomNum(-1),this.boomHasNumLbl.string=cc.Mgr.UserData.getSkillBoomNum(),cc.Mgr.Global.UseSkillState=!1,this.BoomSkillTipNode.active=!1,this.gameCtrl.AddTouchEventListener()},BuyBoomSkill:function(){if(cc.Mgr.UserData.coin<cc.Mgr.Global.BoomCost){var e={des:"\u60a8\u7684\u91d1\u5e01\u4e0d\u591f,\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u5de6\u4e0a\u89d2\u89c6\u9891\u6309\u94ae,\u89c2\u770b\u89c6\u9891\u5e7f\u544a\u83b7\u5f97\u6280\u80fd\u70b9,\u6216\u8005\u5728\u6e38\u620f\u4e2d\u8d5a\u8db3\u591f\u7684\u91d1\u5e01\u8d2d\u4e70\u6280\u80fd\u70b9"};this.ShowTipDesPanel(e)}else cc.Mgr.UserData.addSkillBoomNum(1),cc.Mgr.UserData.coin-=cc.Mgr.Global.BoomCost,this.uiScore.coinLbl.string=cc.Mgr.UserData.getCoinNum(),this.boomHasNumLbl.string=cc.Mgr.UserData.getSkillBoomNum()},CloseBuyBoomPanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.boomSkillBuyPanel.node.active=!1},ShowTipDesPanel:function(e){cc.Mgr.AudioMgr.playSFX("dong"),this.tipPanel.node.active=!0,this.tipPanel.ShowPanel(e.des)},CloseTipDesPanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.tipPanel.node.active=!1},OpenSetting:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.menuPanel.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.settingPanel.node.active=!0,this.settingPanel.ShowPanel()},OpenTipPlay:function(){cc.Mgr.AudioMgr.playSFX("dong"),cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.tipPlayPanel.node.active=!0},CloseSettingPanel:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.settingPanel.node.active=!1},ReturnOneStep:function(){if(cc.Mgr.UserData.getCoinNum()<cc.Mgr.Global.ReturnStepCost){var e={des:"\u60a8\u7684\u91d1\u5e01\u4e0d\u591f,\u53ef\u4ee5\u901a\u8fc7\u70b9\u51fb\u5de6\u4e0a\u89d2\u89c6\u9891\u6309\u94ae,\u89c2\u770b\u89c6\u9891\u5e7f\u544a\u83b7\u5f97\u6280\u80fd\u70b9,\u6216\u8005\u5728\u6e38\u620f\u4e2d\u8d5a\u8db3\u591f\u7684\u91d1\u5e01\u8d2d\u4e70\u6280\u80fd\u70b9"};this.ShowTipDesPanel(e)}else cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),this.uiScore.AddCoinFunc(-cc.Mgr.Global.ReturnStepCost),this.skillUsePanel.node.active=!1,this.skillBackTip.node.active=!1,this.gameCtrl.ReturnOneStep(),cc.Mgr.Global.hasMove=!1},ReturnOneStepUseOne:function(){cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes"),cc.Mgr.UserData.addSkillBackNum(-1),this.backHasNumLbl.string=cc.Mgr.UserData.getSkillBackNum(),this.uiScore.AddCoinFunc(-cc.Mgr.Global.ReturnStepCost),this.skillUsePanel.node.active=!1,this.skillBackTip.node.active=!1,this.gameCtrl.ReturnOneStep(),cc.Mgr.Global.hasMove=!1},OpenUseSkillPanel:function(){if(cc.Mgr.AudioMgr.playSFX("dong"),this.gameCtrl.gameState==a.Play)if(cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),0!=cc.Mgr.Global.hasMove){if(cc.Mgr.UserData.getSkillBackNum()>0)return this.skillBackTip.node.active=!0,void this.skillBackTip.ShowPanel();this.skillUsePanel.node.active=!0,this.skillUsePanel.ShowPanel()}else{var e={des:"\u65e0\u9700\u56de\u9000,\u53ea\u6709\u79fb\u52a8\u8fc7\u540e\u624d\u80fd\u6267\u884c\u56de\u9000"};this.ShowTipDesPanel(e)}},ScreenRecord:function(){cc.Mgr.AudioMgr.playSFX("dong"),0==cc.Mgr.PlatformController.isScreen?cc.Mgr.PlatformController.StartRecordScreen():cc.Mgr.PlatformController.StopRecordScreen()},OpenMenuPanel:function(){cc.Mgr.AudioMgr.playSFX("dong"),cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.menuPanel.node.active=!0,this.menuPanel.ShowPanel(this.uiScore.runeType)},OpenTimeReward:function(){cc.Mgr.AudioMgr.playSFX("dong"),this.menuPanel.node.active=!1,this.uiScore.OpenTimeReward()},AdsRewardSkill:function(){var e=this;cc.Mgr.AdsMgr.ShowVideoAds(m.PointE,function(t){0==t&&(cc.Mgr.UserData.addSkillBackNum(2),cc.Mgr.UserData.addSkillBoomNum(2),e.RefreshUI())})}});t.exports=M,cc._RF.pop()},{AdsParam:"AdsParam",BuyBoomPanel:"BuyBoomPanel",CommonTipPanel:"CommonTipPanel",GameController:"GameController",GameState:"GameState",MenuPanel:"MenuPanel",OverPanel:"OverPanel",SettingPanel:"SettingPanel",ShopPanel:"ShopPanel",SkillBackTipPanel:"SkillBackTipPanel",SkillUsePanel:"SkillUsePanel",StartPanel:"StartPanel",TipPlayPanel:"TipPlayPanel",TutorialPanel:"TutorialPanel",UIScore:"UIScore"}],UIScore:[function(e,t,o){"use strict";cc._RF.push(t,"849e3dPAkJPLqkYfhXhB8yQ","UIScore");var i=e("Global"),s=e("LvUpPanel"),a=e("AdsParam"),n=e("DiamondPanel");cc.Class({extends:cc.Component,properties:{score:0,gameLv:1,mapLv:1,Atlas:cc.SpriteAtlas,ScoreLbl:cc.Label,diamondLbl:cc.Label,runeType:2,StartUiRuneSp:cc.Sprite,runeBNumLbl:cc.Label,runeCNumLbl:cc.Label,gameLvLbl:cc.Label,mapLvLbl:cc.Label,coinLbl:cc.Label,lvUpPanel:s,startUiNode:cc.Node,scoreGetDiaLbl:cc.Label,getDiamondLbl:cc.Label,diamondDesLbl:cc.Label,getDiamondDesLbl:cc.Label,diamondBtnSp:cc.Sprite,DiamondRewardNode:n,DiamondTimePanel:n,doubleBtnSp:cc.Sprite,diamondForm:"Score"},start:function(){var e=this;cc.director.on("AddGameScore",function(t){e.AddScoreFunc(1)}),cc.director.on("BuySkin",function(t){e.RefreshUILbl()}),this.StartUiRuneSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+this.runeType),this.schedule(function(){if(this.SubLeftRewardTime(),1==cc.Mgr.Global.canGetReward)this.diamondBtnSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_1"),this.doubleBtnSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_1"),this.getDiamondDesLbl.string="\u53ef\u83b7\u5f97\u5956\u52b1";else if(this.doubleBtnSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_2"),this.diamondBtnSp.spriteFrame=this.Atlas.getSpriteFrame("btnbg_2"),cc.Mgr.UserData.gerRewardHasTimes()>=cc.Mgr.Global.RuneRewardTimesForOneDay)this.getDiamondDesLbl.string="\u4eca\u65e5\u7684\u9886\u53d6\u6b21\u6570\u5df2\u7ecf\u7528\u5b8c";else{var e=cc.Mgr.UserData.getRewardLastTime()+cc.Mgr.Global.rewardGetInterval-cc.Mgr.Utils.GetSysTime(),t=cc.Mgr.Utils.FormatNumToTime(e);this.getDiamondDesLbl.string=t+" \u540e\u53ef\u83b7\u5f97\u5956\u52b1\n(\u5269\u4f59"+(3-cc.Mgr.UserData.gerRewardHasTimes())+"/"+cc.Mgr.Global.RuneRewardTimesForOneDay+")"}this.getDiamondLbl.string=200},1)},RefreshUILbl:function(){this.runeCNumLbl.string=cc.Mgr.UserData.getRuneNum(3),this.runeBNumLbl.string=cc.Mgr.UserData.getRuneNum(2),this.coinLbl.string=cc.Mgr.UserData.getCoinNum()},SubLeftRewardTime:function(){cc.Mgr.Utils.GetSysTime()-cc.Mgr.UserData.getRewardLastTime()>=cc.Mgr.Global.rewardGetInterval&&cc.Mgr.UserData.gerRewardHasTimes()<cc.Mgr.Global.RuneRewardTimesForOneDay?cc.Mgr.Global.canGetReward=!0:cc.Mgr.Global.canGetReward=!1},AddScoreFunc:function(e){this.score+=e,cc.Mgr.UserData.addScore(e),this.ScoreLbl.string=this.score,0==this.lvUpPanel.node.active&&0==this.DiamondRewardNode.node.active&&cc.Mgr.PlatformController.SendMessageToSubView("RefreshBeyondNormalNode",this.score);var t=cc.scaleTo(.01,1,1.5),o=cc.scaleTo(.01,1.5,1),s=cc.sequence(t,o);this.ScoreLbl.node.runAction(s);var a=this.gameLv;if(this.gameLv=Math.floor(this.score/i.LvScore)+1,this.gameLvLbl.string=this.gameLv,this.score>cc.Mgr.UserData.getHighScore()&&cc.Mgr.UserData.refreshHighScore(this.score),this.gameLv>a){cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),cc.Mgr.AudioMgr.playSFX("lv"),this.lvUpPanel.node.active=!0;var n=Math.floor((cc.Mgr.Global.PassLvGetCoin+10*this.gameLv)*cc.Mgr.Global.CoinBonus);this.lvUpPanel.ShowPanel(n)}if(cc.Mgr.UserData.refreshGameLv(this.score),this.score%100==0&&0!=this.score&&0==this.lvUpPanel.node.active){cc.Mgr.AudioMgr.playSFX("lv"),cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes"),this.diamondForm="Score",this.DiamondRewardNode.node.active=!0,this.DiamondRewardNode.ShowPanel(this.runeType),this.diamondDesLbl.node.active=!0;n=Math.floor((cc.Mgr.Global.DiamondGetNum+10*this.gameLv)*cc.Mgr.Global.DiamondBonus);this.scoreGetDiaLbl.string=n}},AddGetCoinFunc:function(){var e=Math.floor((cc.Mgr.Global.PassLvGetCoin+10*this.gameLv)*cc.Mgr.Global.CoinBonus);cc.Mgr.UserData.addCoinFunc(e),this.coinLbl.string=cc.Mgr.UserData.getCoinNum(),this.lvUpPanel.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes")},ShareGetCoin:function(){var e=this.score+"\u4e2a\u8d1d\u58f3\u4e86,\u8fde\u6211\u81ea\u5df1\u90fd\u65e0\u6cd5\u76f8\u4fe1\u6211\u6709\u8fd9\u4e48\u5389\u5bb3";cc.Mgr.PlatformController.ShareToFriendTxt(e),this.AddGetCoinFunc()},WatchAdsAddDoubleCoin:function(){var e=this;cc.Mgr.AdsMgr.ShowVideoAds(a.PointC,function(t){0==t&&e.AddDoubleCoinFunc()})},WatchAdsAddDoubleDiaScore:function(){var e=this;cc.Mgr.AdsMgr.ShowVideoAds(a.PointB,function(t){0==t&&e.AddDoubleDiamondFunc()})},WatchAdsAddDoubleDiaTime:function(){if(0!=cc.Mgr.Global.canGetReward){var e=this;cc.Mgr.AdsMgr.ShowVideoAds(a.PointD,function(t){0==t&&e.AddDoubleDiamondFunc()})}},AddDoubleCoinFunc:function(){var e=2*Math.floor((cc.Mgr.Global.PassLvGetCoin+10*this.gameLv)*cc.Mgr.Global.CoinBonus);cc.Mgr.UserData.addCoinFunc(e),this.coinLbl.string=cc.Mgr.UserData.getCoinNum(),this.lvUpPanel.node.active=!1,cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes")},AddCoinFunc:function(e){cc.Mgr.UserData.addCoinFunc(e),this.coinLbl.string=cc.Mgr.UserData.getCoinNum()},AddDiamondFunc:function(e){cc.Mgr.UserData.addDiamondFunc(e),this.runeCNumLbl.string=cc.Mgr.UserData.getRuneNum(3),this.runeBNumLbl.string=cc.Mgr.UserData.getRuneNum(2)},AddGetDiamondFunc:function(){if("Score"==this.diamondForm){var e=Math.floor((cc.Mgr.Global.DiamondGetNum+10*this.gameLv)*cc.Mgr.Global.DiamondBonus);cc.Mgr.UserData.addRuneFunc(e,this.runeType),this.runeType=this.runeType+1>3?2:3,this.StartUiRuneSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+this.runeType)}else if(1==cc.Mgr.Global.canGetReward){e=200;cc.Mgr.UserData.addRuneFunc(e,this.runeType),this.runeType=this.runeType+1>3?2:3,this.StartUiRuneSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+this.runeType),cc.Mgr.UserData.RefreshRewardTimeData()}this.runeCNumLbl.string=cc.Mgr.UserData.getRuneNum(3),this.runeBNumLbl.string=cc.Mgr.UserData.getRuneNum(2),this.DiamondRewardNode.node.active=!1,this.DiamondTimePanel.node.active=!1,0==this.startUiNode.active&&cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes")},AddDoubleDiamondFunc:function(){if("Score"==this.diamondForm){var e=2*Math.floor((cc.Mgr.Global.DiamondGetNum+10*this.gameLv)*cc.Mgr.Global.DiamondBonus);cc.Mgr.UserData.addRuneFunc(e,this.runeType),this.runeType=this.runeType+1>3?2:3,this.StartUiRuneSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+this.runeType)}else if(1==cc.Mgr.Global.canGetReward){e=400;cc.Mgr.UserData.addRuneFunc(e,this.runeType),this.runeType=this.runeType+1>3?2:3,this.StartUiRuneSp.spriteFrame=this.Atlas.getSpriteFrame("target_"+this.runeType),cc.Mgr.UserData.RefreshRewardTimeData()}this.runeCNumLbl.string=cc.Mgr.UserData.getRuneNum(3),this.runeBNumLbl.string=cc.Mgr.UserData.getRuneNum(2),this.DiamondRewardNode.node.active=!1,this.DiamondTimePanel.node.active=!1,0==this.startUiNode.active&&cc.Mgr.PlatformController.SendMessageToSubView("ShowFrontNodes")},ResetScore:function(){this.score=0,this.gameLv=1,this.ScoreLbl.string="0",this.gameLvLbl.string="1",cc.Mgr.UserData.ResetScore(),this.coinLbl.string=cc.Mgr.UserData.getCoinNum(),this.RefreshMapLvLbl(),this.runeCNumLbl.string=cc.Mgr.UserData.getRuneNum(3),this.runeBNumLbl.string=cc.Mgr.UserData.getRuneNum(2),cc.Mgr.PlatformController.SendMessageToSubView("RefreshBeyondNormalNode",this.score)},RefreshMapLvLbl:function(){this.mapLvLbl.string="\u5173\u5361:"+cc.Mgr.UserData.getChooseMapLv()},ResetScoreUseProgress:function(e){this.ScoreLbl.string=e,this.score=e},OpenTimeReward:function(){this.diamondForm="Time",this.DiamondTimePanel.node.active=!0,this.DiamondTimePanel.ShowPanel(this.runeType),this.getDiamondDesLbl.node.active=!0,cc.Mgr.PlatformController.SendMessageToSubView("CloseFrontNodes")}});cc._RF.pop()},{AdsParam:"AdsParam",DiamondPanel:"DiamondPanel",Global:"Global",LvUpPanel:"LvUpPanel"}],UserData:[function(e,t,o){"use strict";cc._RF.push(t,"36acdoQvwJHyaYwk2zo7hgr","UserData");var i=e("Global"),s=e("ReBox"),a=e("DataType"),n=e("SkinStruct"),r=cc.Class({extends:cc.Component,properties:{HighScore:0,coin:0,diamond:0,runeB:0,runeC:0,curUseSkinId:7,chooseMapLv:0,finishLv:0,skillBoomNum:2,skillBackNum:2,skinList:{default:[],type:[n]},hasLastProgress:0,remScore:0,rewardLastTime:0,rewardGetTimes:0,CurUseDataType:0,tutorialOver:1,score:0,gameLv:1,colsNum:7,rowsNum:7,nextGetRewardTime:7200},initData:function(){var e=cc.sys.localStorage.getItem("jz_userdata");if(null!=e&&""!=e){console.log("\u5e72\uff0c\u6709\u6570\u636e");var t=JSON.parse(e);this.HighScore=t.highscore,this.finishLv=t.finishLv,this.diamond=t.diamond,this.runeB=t.runeB,this.runeC=t.runeC,this.coin=t.coin,this.skillBoomNum=t.skillBoomNum,this.skillBackNum=t.skillBackNum,this.curUseSkinId=t.curUseSkinId,this.skinList=t.skinList,this.tutorialOver=t.tutorialOver,this.rewardLastTime=t.rewardLastTime,this.rewardGetTimes=t.rewardGetTimes,cc.log("\u6570\u636e = "+JSON.stringify(e))}else{console.log("\u5e72\uff0c\u4e4b\u524d\u6ca1\u6709\u6570\u636e");var o={skinList:null,highscore:0,coin:0,finishLv:0,diamond:0,tutorialOver:1,rewardGetTimes:0,rewardLastTime:0,curUseSkinId:7,runeB:0,runeC:0,skillBoomNum:2,skillBackNum:2};this.HighScore=o.highscore,this.finishLv=o.finishLv,this.coin=o.coin,this.diamond=o.diamond,this.runeB=o.runeB,this.runeC=o.runeC,this.skillBoomNum=o.skillBoomNum,this.skillBackNum=o.skillBackNum,this.curUseSkinId=o.curUseSkinId,this.tutorialOver=o.tutorialOver,this.rewardLastTime=o.rewardLastTime,this.rewardGetTimes=o.rewardGetTimes;for(var i=cc.Mgr.DataMapMgr.getDataListByDataType(a.Skin),s=0;s<i.length;s++){var r=i[s],c=new n;c.skinId=r.skinId,c.price=r.price,5==r.skinId?c.unLock=1:c.unLock=0,this.skinList[s]=c}o.skinList=this.skinList,cc.sys.localStorage.setItem("jz_userdata",JSON.stringify(o))}this.GetInitProgess(),this.AdjustTimeRewardData(),this.score=0,this.gameLv=1,this.chooseMapLv=1},AdjustTimeRewardData:function(){Math.floor(cc.Mgr.Utils.GetSysTime()/86400)-Math.floor(this.rewardLastTime/86400)>=1&&(this.rewardGetTimes=0)},InitChooseMapLv:function(){this.chooseMapLv=this.finishLv},GetInitProgess:function(){var e=cc.sys.localStorage.getItem("jz_progressdata");if(null==e||""==e){var t={};this.ReBoxMap=new Array(this.rowsNum);for(var o=0;o<this.rowsNum;o++){for(var i=new Array(this.colsNum),a=0;a<this.colsNum;a++)i[a]=new s;this.ReBoxMap[o]=i}for(o=0;o<this.rowsNum;o++)for(a=0;a<this.colsNum;a++)this.ReBoxMap[o][a].InitBox(o,a);this.hasLastProgress=0,this.remScore=0,t.remScore=this.remScore,t.ReBoxMap=this.ReBoxMap,t.hasLastProgress=this.hasLastProgress,cc.sys.localStorage.setItem("jz_progressdata",JSON.stringify(t))}else{var n=JSON.parse(e);this.remScore=n.remScore,this.ReBoxMap=n.ReBoxMap,this.hasLastProgress=n.hasLastProgress}},SaveBoxMapData:function(e,t){this.remScore=e,this.hasLastProgress=t;var o={};o.remScore=e,o.ReBoxMap=this.ReBoxMap,o.hasLastProgress=this.hasLastProgress,cc.sys.localStorage.setItem("jz_progressdata",JSON.stringify(o))},GetReBoxMapUnNullLength:function(){for(var e=[],t=0;t<this.rowsNum;t++)for(var o=0;o<this.colsNum;o++)0==this.ReBoxMap[t][o].flagNum&&1!=this.ReBoxMap[t][o].showCoin&&1!=this.ReBoxMap[t][o].showSeed||e.push(this.ReBoxMap[t][o]);return e},GetReBoxParam:function(e,t){var o={};return o.flagNum=this.ReBoxMap[e][t].flagNum,o.showCoin=this.ReBoxMap[e][t].showCoin,o.showSeed=this.ReBoxMap[e][t].showSeed,o},RefreshBoxMapRem:function(e,t,o){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.ReBoxMap[e][t].showCoin=i,this.ReBoxMap[e][t].showSeed=s,this.ReBoxMap[e][t].flagNum=o},ClearReBoxMap:function(){for(var e=0;e<this.rowsNum;e++)for(var t=0;t<this.colsNum;t++)this.ReBoxMap[e][t].posX=e,this.ReBoxMap[e][t].posY=t,this.ReBoxMap[e][t].flagNum=0,this.ReBoxMap[e][t].showCoin=!1,this.ReBoxMap[e][t].showSeed=!1;this.SaveBoxMapData(0,0)},getHighScore:function(){return this.HighScore},getCoinNum:function(){return this.coin},addCoinFunc:function(e){this.coin+=e},addDiamondFunc:function(e){this.diamond+=e},addRuneFunc:function(e,t){2==t?this.runeB+=e:3==t&&(this.runeC+=e)},getRuneNum:function(e){return 2==e?this.runeB:3==e?this.runeC:void 0},getSkillBoomNum:function(){return this.skillBoomNum},addSkillBoomNum:function(e){this.skillBoomNum+=e},getSkillBackNum:function(){return this.skillBackNum},addSkillBackNum:function(e){this.skillBackNum+=e},getDiamondNum:function(){return this.diamond},addScore:function(e){this.score+=e},ResetScore:function(){this.score=0},getCurScore:function(){return this.score},refreshHighScore:function(e){e>this.HighScore&&(this.HighScore=e)},getGameLv:function(){return this.gameLv},refreshGameLv:function(e){this.gameLv=Math.floor(e/i.LvScore)+1},getCurSkinId:function(){return this.curUseSkinId},refreshUseSkinId:function(e){this.curUseSkinId=e,cc.Mgr.Global.RefreshBonusData(),this.SaveData()},UnlockSkinById:function(e){for(var t=this.skinList.length-1;t>=0;t--)if(this.skinList[t].skinId==e)return this.skinList[t].unLock=1,this.SaveData(),!0;return!1},IsSkinUnLock:function(e){for(var t=this.skinList.length-1;t>=0;t--)if(this.skinList[t].skinId==e)return 1==this.skinList[t].unLock;return!1},IsTutorialOver:function(){return 1==this.tutorialOver},FinishTutorial:function(){this.tutorialOver=1,this.SaveData()},getRewardLastTime:function(){return this.rewardLastTime},gerRewardHasTimes:function(){return this.rewardGetTimes},RefreshRewardTimeData:function(){this.rewardLastTime=cc.Mgr.Utils.GetSysTime(),this.rewardGetTimes+=1,this.rewardGetTimes>=3&&(this.rewardGetTimes=3),this.SaveData()},getFinishLv:function(){return this.finishLv},AddFinishLv:function(){this.finishLv+=1,this.chooseMapLv=this.finishLv},AddChooseMapLv:function(){this.chooseMapLv+=1,this.chooseMapLv>this.finishLv+1&&(this.chooseMapLv=this.finishLv+1)},getChooseMapLv:function(){return this.chooseMapLv},SaveData:function(){var e={};e.highscore=this.HighScore,e.finishLv=this.finishLv,e.coin=this.coin,e.diamond=this.diamond,e.runeB=this.runeB,e.runeC=this.runeC,e.skillBoomNum=this.skillBoomNum,e.skillBackNum=this.skillBackNum,e.curUseSkinId=this.curUseSkinId,e.skinList=this.skinList,e.tutorialOver=this.tutorialOver,e.rewardLastTime=this.rewardLastTime,e.rewardGetTimes=this.rewardGetTimes,cc.sys.localStorage.setItem("jz_userdata",JSON.stringify(e))}});t.exports=r,cc._RF.pop()},{DataType:"DataType",Global:"Global",ReBox:"ReBox",SkinStruct:"SkinStruct"}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"a60aanWjolALZiocmyzHge3","Utils");var i=cc.Class({extends:cc.Component,statics:{FormatNumToTime:function(e){var t=Math.floor(e/3600),o=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*o),s=t,a=o,n=i;return t<10&&(s="0"+t),o<10&&(a="0"+o),i<10&&(n="0"+i),s+":"+a+":"+n},GetSysTime:function(){return Math.round(new Date/1e3)-1545264e3}}});t.exports=i,cc._RF.pop()},{}]},{},["AudioMgr","BonusType","Box","BoxSubType","BoxType","CurUseData","DIR","DataMapMgr","LevelData","LevelMap","TileData","SkinBonus","SkinData","SkinMap","DataType","GameController","GameState","GameType","Global","PlatformController","ReBox","ShareInfos","SkinStruct","UserData","Utils","AdsMgr","AdsParam","AppStart","BirdVoiceCtrl","BuyBoomPanel","CoinEffect","CommonTipPanel","DiamondPanel","LvUpPanel","MenuPanel","OverPanel","RankPanel","SettingPanel","ShopPanel","SkillBackTipPanel","SkillUsePanel","SkinItem","StartPanel","TipPlayPanel","TutorialPanel","UIMgr","UIScore"]);